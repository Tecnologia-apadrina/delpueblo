(()=>{"use strict";var t=jQuery,e=t("body"),i=function(e){var i;if(void 0!==t.fn.block){var r="#fff center center no-repeat";"undefined"!=typeof yith_wcan_shortcodes&&null!==(i=yith_wcan_shortcodes)&&void 0!==i&&i.loader&&(r="url('".concat(yith_wcan_shortcodes.loader,"') ").concat(r)),e.block({message:null,overlayCSS:{background:r,opacity:.7}})}},r=function(e){void 0!==t.fn.unblock&&e.unblock()};function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function a(t,e,i){return(e=l(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function l(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}var s=function(){function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),a(this,"xhr",null),a(this,"doingAjax",!1),a(this,"originalSearch",location.search),a(this,"initialized",!1),a(this,"filtered",!1),this.initPopState(),this.initialized=!0}var s,c,u;return s=l,c=[{key:"initPopState",value:function(){yith_wcan_shortcodes.reload_on_back&&(this.pushUrlToHistory(window.location,document.title,null,!0),t(window).on("popstate",(function(){var t;null!==(t=window.history.state)&&void 0!==t&&t._yithWcan&&window.location.reload(!0)})))}},{key:"doFilter",value:function(e,i,r){var n,o,a=this,l=t(i||"body");return(o=t(document).triggerHandler("yith_wcan_filters_parameters",[e]))&&(e=o),l&&this.block(l),n=this.buildUrl(e),yith_wcan_shortcodes.ajax_filters?(this.doingAjax=!0,this._doAjax(n).done((function(t){n=a.searchAlternativeUrl(t,n),a._beforeFilter(t,e),a.refreshFragments(i,r,t),a.pushUrlToHistory(n,t.pageTitle,e),a.originalSearch=location.search,l&&a.unblock(l),a._afterFilter(t,e),a.doingAjax=!1}))):(this.pushUrlToHistory(n,document.title,e),void(window.location=n))}},{key:"_beforeFilter",value:function(e,i){t(document).trigger("yith-wcan-ajax-loading",[e,i]),yith_wcan_shortcodes.query_vars=i}},{key:"_afterFilter",value:function(i,r){t(".woocommerce-ordering").on("change","select.orderby",(function(){t(this).closest("form").submit()})),this.filtered=r&&!!Object.keys(r).length,this.filtered?e.addClass("filtered"):e.removeClass("filtered"),t(window).trigger("scroll"),t(document).trigger("yith-wcan-ajax-filtered",[i,r]).trigger("yith_wcwl_reload_after_ajax")}},{key:"buildUrl",value:function(e){var i,r=this,o=yith_wcan_shortcodes.query_param,a={},l=window.location,s=yith_wcan_shortcodes.base_url?yith_wcan_shortcodes.base_url:(null==l?void 0:l.origin)+(null==l?void 0:l.pathname),c=this,u="object"===n(e)&&Object.keys(e).length;if(yith_wcan_shortcodes.session_param&&(s=s.replace(new RegExp("/"+yith_wcan_shortcodes.session_param+"/[^/]*/"),"")),u&&(a[o]=1),this.originalSearch){var h=this.originalSearch.replace("?","").split("&").reduce((function(t,e){var i=e.split("=");if(2===i.length){if(r.isFilterParam(i[0]))return t;t[i[0]]=i[1]}return t}),{});a=t.extend(a,h)}return u&&(a=t.extend(a,e)),(i=Object.keys(a).reduce((function(t,e){var i=a[e];return i&&e?t+=c._cleanParam(e)+"="+c._cleanParam(i)+"&":t}),"?").replace(/&$/g,"").replace(/%2B/g,"+").replace(/%2C/g,",")).length>1&&(s+=i),s}},{key:"searchAlternativeUrl",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return-1===t.indexOf("yith_wcan:sharing_url")?i:i=(e=t.match(/<meta name="yith_wcan:sharing_url" content="([^"]*)">/))&&1 in e?e[1]:i}},{key:"pushUrlToHistory",value:function(t,e,i,r){if(yith_wcan_shortcodes.change_browser_url&&!navigator.userAgent.match(/msie/i)){var n="pushState";r&&(n="replaceState"),window.history[n]({_yithWcan:!0,pageTitle:e,filters:i},"",t)}}},{key:"refreshFragments",value:function(e,i,r){var n=document.createElement("html"),o=t(n);if(n.innerHTML=r,e){var a,l=t(i),s=t(e);l.length&&(a=o.find(i)).length&&l.replaceWith(a.first()),s.length&&(a=o.find(e)).length&&s.replaceWith(a.first())}else{var c=t(yith_wcan_shortcodes.content);c.length?c.replaceWith(o.find(yith_wcan_shortcodes.content)):t("body").replaceWith(o.find("body"))}t(document).trigger("yith_wcan_init_shortcodes")}},{key:"_cleanParam",value:function(t){var e,i;return null===(e=yith_wcan_shortcodes)||void 0===e||!e.process_sanitize||null!==(i=yith_wcan_shortcodes)&&void 0!==i&&i.skip_sanitize?t:encodeURIComponent(t)}},{key:"_doAjax",value:function(e,i){return this.xhr&&this.xhr.abort(),i=t.extend({url:e,headers:{"X-YITH-WCAN":1}},i),this.xhr=t.ajax(i),this.xhr}},{key:"block",value:function(t){return i(t)}},{key:"unblock",value:function(t){return r(t)}},{key:"isFilterParam",value:function(e){var i,r=["rating_filter","min_price","max_price","price_ranges","onsale_filter","instock_filter","featured_filter","orderby","product-page",yith_wcan_shortcodes.query_param];return(i=t(document).triggerHandler("yith_wcan_supported_filters_parameters",[r]))&&(r=i),-1!==(r=r.concat(yith_wcan_shortcodes.supported_taxonomies.map((function(t){return t.replace("pa_","filter_")})))).indexOf(e)||-1!==e.indexOf("filter_")||-1!==e.indexOf("query_type_")}}],c&&o(s.prototype,c),u&&o(s,u),Object.defineProperty(s,"prototype",{writable:!1}),l}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function h(t,e,i){return(e=f(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function f(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===c(e)?e:String(e)}var d=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"$label_set",null),h(this,"$labels",!1),this.$label_set=t,this._initLabels(),this.$label_set.data("filter_labels",this).addClass("enhanced")}var i,r,n;return i=e,(r=[{key:"_initLabels",value:function(){var e=this;this.getLabels().each((function(){var i=t(this);e._initLabel(i)}))}},{key:"_initLabel",value:function(t){var e=this;t.on("click",(function(i){e.disableLabel(t)&&i.preventDefault()}))}},{key:"getLabels",value:function(){return!1===this.$labels&&(this.$labels=this.$label_set.find(".active-filter-label")),this.$labels}},{key:"disableLabel",value:function(e){var i=e.data("filters"),r=!1;return t(".yith-wcan-filters").each((function(){var e=t(this).data("preset");r=r||e.deactivateFilterByProperties(i,!0)})),r}}])&&u(i.prototype,r),n&&u(i,n),Object.defineProperty(i,"prototype",{writable:!1}),e}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function v(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function y(t,e,i){return e&&v(t.prototype,e),i&&v(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=function(t,e){if("object"!==p(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===p(e)?e:String(e)}var g=y((function e(i){var r,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=null,(n=m(n="$reset"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this.$reset=i,this.$reset.on("click",(function(e){e.preventDefault(),t(".yith-wcan-filters").each((function(){var e=t(this).data("preset");e.deactivateAllFilters(!0),e.closeModal()}))})),this.$reset.data("reset",this).addClass("enhanced")}));function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function b(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k(r.key),r)}}function w(t,e,i){return(e=k(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function k(t){var e=function(t,e){if("object"!==_(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===_(e)?e:String(e)}var S=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),w(this,"$button",null),w(this,"preset",null),w(this,"$preset",null),w(this,"isMobile",!1),this.$button=t,this._initPreset(),this._initResponsive(),this._initActions(),this.$button.data("modalOpener",this).addClass("enhanced")}var i,r,n;return i=e,(r=[{key:"_initPreset",value:function(){var e,i=this.$button.data("target");(e=t(i?"#".concat(i):".yith-wcan-filters")).length&&(this.$preset=e.first(),this.preset=this.$preset.data("preset"))}},{key:"_initResponsive",value:function(){var e=this;if(yith_wcan_shortcodes.modal_on_mobile&&this.preset){var i=window.matchMedia("(max-width: ".concat(yith_wcan_shortcodes.mobile_media_query,"px)"));t(window).on("resize",(function(){var t=!!i.matches;t!==e.isMobile&&(e.isMobile=t,e._afterLayoutChange())})).resize()}else this.$button.hide()}},{key:"_initActions",value:function(){var t;if(null!==(t=this.$preset)&&void 0!==t&&t.length){var e=this;this.$button.on("click",(function(t){t.preventDefault(),e.preset.openModal()}))}}},{key:"_afterLayoutChange",value:function(){this.isMobile?this.$button.show():this.$button.hide()}}])&&b(i.prototype,r),n&&b(i,n),Object.defineProperty(i,"prototype",{writable:!1}),e}();function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function F(t){return function(t){if(Array.isArray(t))return x(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return x(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return x(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function O(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */O=function(){return t};var t={},e=Object.prototype,i=e.hasOwnProperty,r=Object.defineProperty||function(t,e,i){t[e]=i.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",l=n.toStringTag||"@@toStringTag";function s(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,i){return t[e]=i}}function c(t,e,i,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),l=new x(n||[]);return r(a,"_invoke",{value:w(t,i,l)}),a}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function f(){}function d(){}function p(){}var v={};s(v,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(j([])));m&&m!==e&&i.call(m,o)&&(v=m);var g=p.prototype=f.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(r,o,a,l){var s=u(t[r],t,o);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==C(h)&&i.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,l)}),(function(t){n("throw",t,a,l)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,l)}))}l(s.arg)}var o;r(this,"_invoke",{value:function(t,i){function r(){return new e((function(e,r){n(t,i,e,r)}))}return o=o?o.then(r,r):r()}})}function w(t,e,i){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return P()}for(i.method=n,i.arg=o;;){var a=i.delegate;if(a){var l=k(a,i);if(l){if(l===h)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===r)throw r="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r="executing";var s=u(t,e,i);if("normal"===s.type){if(r=i.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:i.done}}"throw"===s.type&&(r="completed",i.method="throw",i.arg=s.arg)}}}function k(t,e){var i=e.method,r=t.iterator[i];if(void 0===r)return e.delegate=null,"throw"===i&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==i&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+i+"' method")),h;var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function F(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,l,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,i,r,n,o){void 0===o&&(o=Promise);var a=new b(c(e,i,r,n),o);return t.isGeneratorFunction(i)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(g),s(g,l,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),i=[];for(var r in e)i.push(r);return i.reverse(),function t(){for(;i.length;){var r=i.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(F),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(i,r){return a.type="throw",a.arg=t,e.next=i,r&&(e.method="next",e.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),s=i.call(o,"finallyLoc");if(l&&s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),F(i),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var n=r.arg;F(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:j(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=void 0),h}},t}function j(t,e,i,r,n,o,a){try{var l=t[o](a),s=l.value}catch(t){return void i(t)}l.done?e(s):Promise.resolve(s).then(r,n)}function P(t){return function(){var e=this,i=arguments;return new Promise((function(r,n){var o=t.apply(e,i);function a(t){j(o,r,n,a,l,"next",t)}function l(t){j(o,r,n,a,l,"throw",t)}a(void 0)}))}}function $(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A(r.key),r)}}function T(t,e,i){return(e=A(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function A(t){var e=function(t,e){if("object"!==C(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===C(e)?e:String(e)}var E=function(){function e(i,r){var n,o,a,l;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),T(this,"$originalSelect",null),T(this,"_items",[]),T(this,"$_main",null),T(this,"$_label",null),T(this,"$_dropdown",null),T(this,"$_search",null),T(this,"$_showMore",null),T(this,"$_items",null),T(this,"paginate",!1),T(this,"hasMore",!1),T(this,"needsRefresh",!0),T(this,"multiple",!1),T(this,"currentPage",1),T(this,"options",{}),this.$originalSelect=i,this.$originalSelect.is("select")){var s=this.$originalSelect.data("per_page"),c=this.$originalSelect.data("order"),u=this.$originalSelect.data("all-label"),h={showSearch:this.$originalSelect.data("show_search"),paginate:this.$originalSelect.data("paginate"),perPage:s||10,hasMore:!1,order:c||"ASC",getElements:null,labels:{emptyLabel:u||(null===(n=yith_wcan_shortcodes.labels)||void 0===n?void 0:n.empty_option),searchPlaceholder:null===(o=yith_wcan_shortcodes.labels)||void 0===o?void 0:o.search_placeholder,noItemsFound:null===(a=yith_wcan_shortcodes.labels)||void 0===a?void 0:a.no_items,showMore:null===(l=yith_wcan_shortcodes.labels)||void 0===l?void 0:l.show_more}};this.multiple=this.$originalSelect.prop("multiple"),this.options=t.extend(h,r),this.paginate=this.options.paginate||!1,this.hasMore=this.options.hasMore||!1,this._hideSelect(),this._initTemplate(),this._initActions(),this.$originalSelect.data("dropdown",this).addClass("enhanced")}}var i,r,n,o,a;return i=e,r=[{key:"_hideSelect",value:function(){this.$originalSelect.hide()}},{key:"_initTemplate",value:function(){var e=t("<div/>",{class:"yith-wcan-dropdown closed"}),i=t("<div/>",{class:"dropdown-label",html:this.getLabel()}),r=t("<div>",{class:"dropdown-wrapper"}),n=t("<ul/>",{class:"matching-items filter-items"});r.append(n),e.append(i).append(r),this.options.showSearch&&this._initSearchTemplate(r),this.options.paginate&&this._initShowMoreTemplate(r),this.$originalSelect.after(e),this.$_main=e,this.$_label=i,this.$_dropdown=r,this.$_items=n}},{key:"_initSearchTemplate",value:function(e){var i=t("<div/>",{class:"search-field-container"}),r=t("<input/>",{name:"s",class:"search-field",type:"search",placeholder:this.options.labels.searchPlaceholder}).attr("autocomplete","off");i.append(r).prependTo(e),this.$_search=r}},{key:"_initShowMoreTemplate",value:function(e){var i,r=t("<a/>",{class:"show-more",text:null===(i=this.options.labels.showMore)||void 0===i?void 0:i.replace("%d",this.options.perPage)});r.on("click",this.loadNextPage.bind(this)).hide(),e.append(r),this.$_showMore=r}},{key:"_initActions",value:function(){var e,i,r=this,n=this;null===(e=this.$_main)||void 0===e||e.on("click",(function(t){t.stopPropagation(),n.toggleDropdown()})),this.$_dropdown.on("click",(function(t){t.stopPropagation()})),null===(i=this.$_search)||void 0===i||i.on("keyup search change",(function(){return r.paginate=!1,r._populateItems().then((function(){r.needsRefresh=!0})),!1})),this.$_items.on("change",":input",(function(){var e,i=t(this).closest("li"),r=i.data("value");if(i.hasClass("disabled")&&!n.isValueSelected(r))return!1;i.toggleClass("active"),e=i.hasClass("active"),n._changeItemStatus(r,e)})),this.$_items.on("click","li:not(.checkbox) a",(function(e){var i,r=t(this).closest("li"),o=r.data("value");if(e.preventDefault(),r.hasClass("disabled")&&!n.isValueSelected(o))return!1;r.toggleClass("active"),(i=r.hasClass("active"))&&r.siblings().removeClass("active"),n._changeItemStatus(o,i)})),this.$_items.on("click","label > a",(function(e){var i=t(this).parent().find(":input");e.preventDefault(),(i.is('[type="radio"]')||i.is('[type="checkbox"]'))&&i.prop("checked",!i.prop("checked")),i.change()})),this.$originalSelect.on("change",(function(t,e){e||n.updateLabel()})),null!==globalThis&&void 0!==globalThis&&globalThis.yith_wcan_dropdown_init||(t(document).on("click",this._closeAllDropdowns),globalThis.yith_wcan_dropdown_init=!0)}},{key:"openDropdown",value:function(){var t;null===(t=this.$_main)||void 0===t||t.addClass("open").removeClass("closed"),this._afterDropdownOpen()}},{key:"closeDropdown",value:function(){var t;null===(t=this.$_main)||void 0===t||t.removeClass("open").addClass("closed")}},{key:"_closeAllDropdowns",value:function(){t(document).find("select.enhanced").filter((function(e,i){return!!t(i).data("dropdown")})).each((function(){t(this).data("dropdown").closeDropdown()}))}},{key:"_closeOtherDropdowns",value:function(){var e=this;t(document).find("select.enhanced").filter((function(i,r){var n=t(r);return!!n.data("dropdown")&&!n.is(e.$originalSelect)})).each((function(){t(this).data("dropdown").closeDropdown()}))}},{key:"toggleDropdown",value:function(){var t,e;null===(t=this.$_main)||void 0===t||t.toggleClass("open").toggleClass("closed"),null!==(e=this.$_main)&&void 0!==e&&e.hasClass("open")&&this._afterDropdownOpen()}},{key:"_afterDropdownOpen",value:function(){var t;this._closeOtherDropdowns(),null!==(t=this.$_search)&&void 0!==t&&t.length&&this.$_search.val(""),this._maybePopulateItems()}},{key:"getItems",value:(a=P(O().mark((function e(i){var r,n,o=this;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._items.length||this.getOptions().each((function(e,i){var r=t(i),n=r.val(),a=r.html();o._items.push({value:n,label:a})})),e.next=3,this.getMatchingElements(i);case 3:return r=e.sent,(n=this.paginate?this.options.perPage:0)&&r.length>n&&(this.hasMore=!0,r=r.slice(0,n)),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)}))),function(t){return a.apply(this,arguments)})},{key:"getMatchingElements",value:function(t){var e=this,i=this._items;return new Promise((function(r){i=t?i.filter((function(e){var i=e.label,r=e.value,n=new RegExp(".*"+t+".*","i");return n.test(r)||n.test(i)})):i,e.options.getElements?e.options.getElements.call(e,t).then((function(t){t&&(t=Object.keys(t).reduce((function(e,i){return t[i].label?(e.push(t[i]),e):(e.push({label:t[i],value:i}),e)}),[]),i=[].concat(F(i),F(t))),r(e._formatItems(i))})):r(e._formatItems(i))}))}},{key:"_formatItems",value:function(t){var e=this,i=[];return t.filter((function(t){var r=t.value,n=t.label;return-1===i.indexOf(r)&&(i.push(r),e.getOptionByValue(r).length||e.$originalSelect.append('<option class="filter-item" value="'.concat(r,'">').concat(n,"</option>")),!0)}))}},{key:"_generateItem",value:function(e,i){var r,n=this.isValueSelected(e),o=this.getOptionByValue(e),a=t("<li/>",{"data-value":e,class:o.length?o.attr("class"):""});if(o.length){var l=o.data("template"),s=o.data("count");i=l||i,s&&(i+=s)}if(r=t("<a/>",{href:o.length?o.data("filter_url"):"#",html:i,rel:"nofollow","data-title":o.length?o.data("title"):""}),this.multiple){var c=t("<input/>",{type:"checkbox",value:e}),u=t("<label>");c.prop("checked",n),u.prepend(c).append(r),a.append(u).addClass("checkbox")}else a.append(r);return n?a.addClass("active"):a.removeClass("active"),a}},{key:"_maybePopulateItems",value:function(){this.needsRefresh&&this._populateItems()}},{key:"_populateItems",value:function(){var t,e=this,i=!(null===(t=this.$_search)||void 0===t||!t.length)&&this.$_search.val();return this.getItems(i).then((function(t){e._emptyItems(),e._hideLoadMore(),e.$_items.append(t.map((function(t){var i=t.label,r=t.value;return e._generateItem(r,i)}))),e.$originalSelect.trigger("yith_wcan_dropdown_updated"),e.needsRefresh=!1,e.paginate&&e.hasMore&&e._showLoadMore()}))}},{key:"loadNextPage",value:(o=P(O().mark((function t(){var e=this;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.paginate=!1,this._populateItems().then((function(){e.hasMore=!1}));case 2:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"_selectItem",value:function(t){return this._changeItemStatus(t,!0)}},{key:"_deselectItem",value:function(t){return this._changeItemStatus(t,!1)}},{key:"_changeItemStatus",value:function(t,e){var i=this.$originalSelect.find('option[value="'.concat(t,'"]'));return!!i.length&&(i.prop("selected",e),!yith_wcan_shortcodes.instant_filters&&this.multiple||this.closeDropdown(),this.updateLabel(),this.$originalSelect.trigger("change",[!0]),!0)}},{key:"_emptyItems",value:function(){this.$_items.html("")}},{key:"_showLoadMore",value:function(){this.$_showMore.show()}},{key:"_hideLoadMore",value:function(){this.$_showMore.hide()}},{key:"getLabel",value:function(){return this.hasSelectedValues()?this.getSelectedLabels().join(", "):this.options.labels.emptyLabel}},{key:"updateLabel",value:function(){var t,e=this.getLabel();null===(t=this.$_label)||void 0===t||t.html(e)}},{key:"getOptions",value:function(){return this.$originalSelect.find("option")}},{key:"hasSelectedValues",value:function(){return this.getSelectedOptions().length}},{key:"isValueSelected",value:function(t){return-1!==this.getSelectedValues().indexOf(t.toString())}},{key:"getSelectedOptions",value:function(){return this.$originalSelect.find("option").filter(":selected")}},{key:"getOptionByValue",value:function(t){return this.$originalSelect.find('option[value="'.concat(t,'"]'))}},{key:"getSelectedLabels",value:function(){var e=[];return this.getSelectedOptions().each((function(){var i=t(this),r=i.data("template");r=r||i.html().replace(/\([0-9]*\)/,""),e.push(r)})),e}},{key:"getSelectedValues",value:function(){var e=[];return this.getSelectedOptions().each((function(){e.push(t(this).val())})),e}},{key:"destroy",value:function(){}}],r&&$(i.prototype,r),n&&$(i,n),Object.defineProperty(i,"prototype",{writable:!1}),e}();function L(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return M(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return M(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){l=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw o}}}}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function H(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */H=function(){return t};var t={},e=Object.prototype,i=e.hasOwnProperty,r=Object.defineProperty||function(t,e,i){t[e]=i.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",l=n.toStringTag||"@@toStringTag";function s(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,i){return t[e]=i}}function c(t,e,i,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),l=new F(n||[]);return r(a,"_invoke",{value:w(t,i,l)}),a}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function f(){}function d(){}function p(){}var v={};s(v,o,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(x([])));m&&m!==e&&i.call(m,o)&&(v=m);var g=p.prototype=f.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(r,o,a,l){var s=u(t[r],t,o);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==z(h)&&i.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,l)}),(function(t){n("throw",t,a,l)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,l)}))}l(s.arg)}var o;r(this,"_invoke",{value:function(t,i){function r(){return new e((function(e,r){n(t,i,e,r)}))}return o=o?o.then(r,r):r()}})}function w(t,e,i){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return O()}for(i.method=n,i.arg=o;;){var a=i.delegate;if(a){var l=k(a,i);if(l){if(l===h)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===r)throw r="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r="executing";var s=u(t,e,i);if("normal"===s.type){if(r=i.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:i.done}}"throw"===s.type&&(r="completed",i.method="throw",i.arg=s.arg)}}}function k(t,e){var i=e.method,r=t.iterator[i];if(void 0===r)return e.delegate=null,"throw"===i&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==i&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+i+"' method")),h;var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:O}}function O(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,l,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,i,r,n,o){void 0===o&&(o=Promise);var a=new b(c(e,i,r,n),o);return t.isGeneratorFunction(i)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(g),s(g,l,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),i=[];for(var r in e)i.push(r);return i.reverse(),function t(){for(;i.length;){var r=i.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=x,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(i,r){return a.type="throw",a.arg=t,e.next=i,r&&(e.method="next",e.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),s=i.call(o,"finallyLoc");if(l&&s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),C(i),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var n=r.arg;C(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:x(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=void 0),h}},t}function I(t,e,i,r,n,o,a){try{var l=t[o](a),s=l.value}catch(t){return void i(t)}l.done?e(s):Promise.resolve(s).then(r,n)}function D(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function B(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?D(Object(i),!0).forEach((function(e){N(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function R(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G(r.key),r)}}function N(t,e,i){return(e=G(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function G(t){var e=function(t,e){if("object"!==z(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===z(e)?e:String(e)}var U=function(){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),N(this,"preset",!1),N(this,"$preset",!1),N(this,"target",!1),N(this,"$target",!1),N(this,"$filters",!1),N(this,"$filterButtons",!1),N(this,"modalElements",{}),N(this,"activeFilters",!1),N(this,"isMobile",!1),N(this,"sliderTimeout",!1),N(this,"originalFilters",null),N(this,"dirty",!1),N(this,"loaded",void 0),N(this,"inhibitFilters",!1),this.preset="#"+i.attr("id"),this.$preset=i,this.target=this.$preset.data("target"),this.$target=!!this.target&&t(this.target),this._regiterStatus(),this._initFilterButton(),this._initFilters(),this._initResponsive(),this._initActions(),this.$preset.data("preset",this).addClass("enhanced").trigger("yith_wcan_preset_initialized",[this])}var n,o,a;return n=e,o=[{key:"_initFilters",value:function(){var e=this,i=this.getFilters().get().map((function(i){return e._initFilter(t(i))}));this.loaded=Promise.all(i),this.maybeShowClearAllFilters()}},{key:"_initFilterButton",value:function(){var t=this;this.$filterButtons=this.$preset.find(".apply-filters"),this.$filterButtons.length&&this.$filterButtons.on("click",(function(e){e.preventDefault(),t.filter()})).hide()}},{key:"_initActions",value:function(){this.$preset.find("form").on("submit",(function(t){t.preventDefault()}))}},{key:"_initResponsive",value:function(){var e=this;if(yith_wcan_shortcodes.modal_on_mobile){var i=window.matchMedia("(max-width: ".concat(yith_wcan_shortcodes.mobile_media_query,"px)"));t(window).on("resize",(function(){var t=!!i.matches;t!==e.isMobile&&(e.isMobile=t,e._afterLayoutChange())})).resize()}}},{key:"_initFilter",value:function(e){var i=this,r=this,n=function(i){var n=t(this),o=n.closest(".yith-wcan-filter"),a=!!o.length&&"yes"===o.data("multiple"),l=n.closest(".filter-item"),s=l.length?o.find(".filter-item").not(l):[];return!o.is(".filter-price-slider")&&!(l.is(".disabled")&&!l.is(".active"))&&(i.preventDefault(),s.length&&!a&&s.removeClass("active").children("label").find(":input").prop("checked",!1).parent(".checked").removeClass("checked"),l.length&&l.toggleClass("active"),r.activeFilters=!1,r.maybeFilter(e),r.maybeToggleClearAllFilters(),void r.maybeToggleClearFilter(o))};return this._maybeLoadFilter(e).then((function(e){return e.on("click","a",(function(e){var i=t(this).closest(".filter-item");!i.length||i.is(".checkbox")||i.is(".radio")||n.call(this,e)})),e.on("change",":input",(function(e){var i=t(this),r=i.closest(".filter-item");if(r.is(".disabled")&&!r.is(".active"))return i.prop("checked",!1),!1;n.call(this,e)})),e.on("click","label > a",(function(e){var i=t(this),r=i.closest(".filter-item");if(e.preventDefault(),r.is(".disabled")&&!r.is(".active"))return!1;var n=i.parent().find(":input");(n.is('[type="radio"]')||n.is('[type="checkbox"]'))&&n.prop("checked",!n.prop("checked")),n.change()})),i._initFilterChildren(e),i.maybeShowClearFilter(e),e}))}},{key:"_initFilterChildren",value:function(e){var i,r=this;this._initTooltip(e),this._initPriceSlider(e),this._initDropdown(e),this._initCollapsable(e),this._initShowMore(e),null!==(i=this.$preset)&&void 0!==i&&i.hasClass("custom-style")&&(this._initCustomInput(e),e.on("yith_wcan_dropdown_updated",(function(e){var i=t(e.target).closest(".yith-wcan-filter");r._initCustomInput(i)})))}},{key:"_maybeLoadFilter",value:function(e){var i=this;return e.hasClass("filter-placeholder")?new Promise((function(r){var n;t.ajax({method:"GET",url:yith_wcan_shortcodes.base_url,data:B({"wc-ajax":"yith_wcan_render_filter",_preset_id:i.getId(),_filter_id:e.data("filter-id"),security:null===(n=yith_wcan_shortcodes.nonces)||void 0===n?void 0:n.render_filter},i.originalFilters)}).then((function(t){var n;return r(i._loadFilter(e,t.success?null==t||null===(n=t.data)||void 0===n?void 0:n.html:""))}))})):Promise.resolve(e)}},{key:"_loadFilter",value:function(e,i){if(!i)return e.remove();var r=t(i);return e.replaceWith(r),this.$filters=!1,r}},{key:"_initTooltip",value:function(e,i){e.find("[data-title]").each((function(){var e=t(this);!e.hasClass("tooltip-added")&&e.data("title")&&(e.on("mouseenter",(function(){var e,r=t(this),n=null,o=r.outerWidth(),a=0;if(!i||"top"!==i&&"right"!==i){var l=r.closest(".filter-item");i=l.hasClass("color")||l.hasClass("label")?"top":"right"}n=t("<span>",{class:"yith-wcan-tooltip",html:r.data("title")}),r.append(n),e=n.outerWidth()+6,n.outerWidth(e),a="top"===i?(o-e)/2:o+15,n.css({left:a.toFixed(0)+"px"}).fadeIn(200),r.addClass("with-tooltip")})).on("mouseleave",(function(){var e=t(this);e.find(".yith-wcan-tooltip").fadeOut(200,(function(){e.removeClass("with-tooltip").find(".yith-wcan-tooltip").remove()}))})),e.addClass("tooltip-added"))}))}},{key:"_initDropdown",value:function(e){var i=e.find("select.filter-dropdown");if(i.length&&!i.hasClass("enhanced")){i.hasClass("select2-hidden-accessible")&&void 0!==t.fn.selectWoo&&i.selectWoo("destroy");var r=this,n=i.data("has-more");this._initDropdownObject(i,B({paginate:!0,hasMore:n,perPage:parseInt(yith_wcan_shortcodes.terms_per_page)},n?{getElements:function(t){var i,n=this;return(i=H().mark((function i(){return H().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!n.paginate&&n.hasMore||t){i.next=2;break}return i.abrupt("return",n._items);case 2:return i.abrupt("return",r._getTerms(e,t));case 3:case"end":return i.stop()}}),i)})),function(){var t=this,e=arguments;return new Promise((function(r,n){var o=i.apply(t,e);function a(t){I(o,r,n,a,l,"next",t)}function l(t){I(o,r,n,a,l,"throw",t)}a(void 0)}))})()}}:{}))}}},{key:"_initDropdownObject",value:function(t,e){return new E(t,e)}},{key:"_initPriceSlider",value:function(t){var e=this;if(t.hasClass("filter-price-slider")){var i=this,r=t.find(".price-slider"),n=r.find(".price-slider-min"),o=r.find(".price-slider-max"),a=parseFloat(r.data("min")),l=parseFloat(r.data("max")),s=parseFloat(n.val()),c=parseFloat(o.val()),u=parseFloat(r.data("step")),h=function(){i.sliderTimeout&&clearTimeout(i.sliderTimeout),i.sliderTimeout=setTimeout((function(){i.maybeFilter(t)}),300)};t.find(".price-slider-ui").off("change").ionRangeSlider({skin:"round",type:"double",min:a,max:l,step:u,from:s,to:c,min_interval:u,values_separator:" - ",prettify:function(t){return e.formatPrice(t)},onChange:function(t){n.val(t.from),o.val(t.to)},onFinish:h}),n.add(o).off("change").on("change",h).on("keyup",(function(t){if(!t.key.match(/[0-9,.]/))return t.preventDefault(),!1;n.val()&&o.val()&&h()}))}}},{key:"_initCollapsable",value:function(t){this._initTitleCollapsable(t),this._initHierarchyCollapsable(t)}},{key:"_initShowMore",value:function(t){var e=this,i=t.find(".filter-content").children(".show-more");i.length&&!i.hasClass("initialized")&&i.addClass("initialized").on("click",(function(){return e._loadItems(t).then((function(){return i.remove()}))}))}},{key:"_getTerms",value:function(e,n){var o=this;return new Promise((function(a){t.ajax({method:"GET",beforeSend:function(){return i(e)},complete:function(){return r(e)},url:yith_wcan_shortcodes.base_url,data:B({"wc-ajax":"yith_wcan_get_filter_terms",_preset_id:o.getId(),_filter_id:e.data("filter-id"),security:yith_wcan_shortcodes.nonces.get_filter_terms,search:n},o.originalFilters)}).then((function(t){var e,i=t.success?null==t||null===(e=t.data)||void 0===e?void 0:e.items:{};a(i)}))}))}},{key:"_loadItems",value:function(e){var n=this;return new Promise((function(o){t.ajax({method:"GET",beforeSend:function(){return i(e)},complete:function(){return r(e)},url:yith_wcan_shortcodes.base_url,data:B({"wc-ajax":"yith_wcan_render_remaining_terms",_preset_id:n.getId(),_filter_id:e.data("filter-id"),security:yith_wcan_shortcodes.nonces.render_remaining_terms},n.originalFilters)}).then((function(t){var i,r=e.find(".filter-content").children(".filter-items");r.append(t.success?null==t||null===(i=t.data)||void 0===i?void 0:i.html:""),n._initFilterChildren(e),o(r)}))}))}},{key:"_initTitleCollapsable",value:function(t){var e=t.find(".collapsable");e.length&&!e.hasClass("toggle-initialized")&&this._initToggle(e,e,t.find(".filter-content"))}},{key:"_initHierarchyCollapsable",value:function(e){var i=e.find(".hierarchy-collapsable");if(i.length){var r=this,n=e.find(".active");n.length&&(n.parents(".hierarchy-collapsable").removeClass("closed").addClass("opened"),n.hasClass("hierarchy-collapsable")&&yith_wcan_shortcodes.show_current_children&&n.removeClass("closed").addClass("opened")),i.each((function(){var e=t(this);if(!e.hasClass("toggle-initialized")){var i=t("<span/>",{class:"toggle-handle"});i.appendTo(e),r._initToggle(i,e,e.children("ul.filter-items"))}}))}}},{key:"_initToggle",value:function(t,e,i){var r=this;e.hasClass("toggle-initialized")||(e.hasClass("closed")&&i.hide(),t.off("click").on("click",(function(t){t.stopPropagation(),t.preventDefault(),r.toggle(i,e),i.trigger("yith_wcan_after_toggle_element",[e])})),e.addClass("toggle-initialized"))}},{key:"_initCustomInput",value:function(e){e.find(":input").each((function(){var e,i=t(this),r=i.attr("type"),n="".concat(r,"button");"checkbox"!==r&&"radio"!==r||i.closest(".".concat(n)).length||(i.is(":checked")&&(n+=" checked"),e=t("<span/>",{class:n}),i.wrap(e).on("change",(function(){var e=t(this);e.prop("checked")?e.parent().addClass("checked"):e.parent().removeClass("checked")})))}))}},{key:"_regiterStatus",value:function(){this.originalFilters=this.mergeProperties(yith_wcan_shortcodes.query_vars,this.getFiltersProperties())}},{key:"_afterLayoutChange",value:function(){var e,i,r=this;this.isMobile?(this.$preset.addClass("filters-modal").attr("role","dialog").attr("tabindex","-1").hide(),this._addCloseModalButton(),this._addApplyFiltersModalButton(),this.loaded.then((function(){return r._switchToCollapsables()})),null===(e=this.$filterButtons)||void 0===e||e.hide()):(this.$preset.removeClass("filters-modal").removeClass("open").removeAttr("role").removeAttr("tabindex").show(),t("body").css("overflow","auto").removeClass("yith-wcan-preset-modal-open"),this._removeCloseModalButton(),this._removeApplyFiltersModalButton(),this.loaded.then((function(){return r._switchBackCollapsables()})),null===(i=this.$filterButtons)||void 0===i||i.show())}},{key:"_addCloseModalButton",value:function(){var e=t("<a/>",{class:"close-button",html:"&times;","data-dismiss":"modal","aria-label":yith_wcan_shortcodes.labels.close});e.prependTo(this.$preset).on("click",this.closeModal.bind(this)),this.modalElements.closeButton=e}},{key:"_removeCloseModalButton",value:function(){var t,e;null===(t=this.modalElements)||void 0===t||null===(e=t.closeButton)||void 0===e||e.remove()}},{key:"_addApplyFiltersModalButton",value:function(){var e=this,i=t("<button/>",{class:"apply-filters main-modal-button",html:yith_wcan_shortcodes.labels.show_results,"data-dismiss":"modal"});i.appendTo(this.$preset).on("click",(function(){e.filter(),e.closeModal()})),this.modalElements.applyFiltersButton=i}},{key:"_removeApplyFiltersModalButton",value:function(){var t,e;null===(t=this.modalElements)||void 0===t||null===(e=t.applyFiltersButton)||void 0===e||e.remove()}},{key:"_switchToCollapsables",value:function(){var e=this;this.getFilters().each((function(){var i=t(this),r=i.find(".filter-title");r.length&&!r.hasClass("collapsable")&&(r.addClass("collapsable").data("disable-collapse",!0),e._initTitleCollapsable(i))}))}},{key:"_switchBackCollapsables",value:function(){this.getFilters().each((function(){var e=t(this),i=e.find(".filter-title");i.length&&i.hasClass("collapsable")&&i.data("disable-collapse")&&(i.removeClass("collapsable").removeData("disable-collapse",!0).off("click"),e.find(".filter-content").show())}))}},{key:"_openAllCollapsables",value:function(){var e=this;this.getFilters().not(".no-title").not((function(i,r){return e.isFilterActive(t(r))})).find(".filter-content").show().end().find(".filter-title").removeClass("closed").addClass("opened")}},{key:"_closeAllCollapsables",value:function(){var e=this;this.getFilters().not(".no-title").not((function(i,r){return e.isFilterActive(t(r))})).find(".filter-content").hide().end().find(".filter-title").addClass("closed").removeClass("opened")}},{key:"maybeRegisterStatusChange",value:function(){var t=this.getFiltersProperties(),e=JSON.stringify(t),i=JSON.stringify(this.originalFilters);this.dirty=e!==i}},{key:"maybeFilter",value:function(t){if(this.maybeRegisterStatusChange(),!this.inhibitFilters)if(yith_wcan_shortcodes.instant_filters&&!this.isMobile)this.filter();else if(yith_wcan_shortcodes.instant_filters||this.isMobile){if(this.isMobile&&this.dirty){var e;this.$preset.addClass("with-filter-button"),null===(e=this.modalElements.applyFiltersButton)||void 0===e||e.show()}}else{var i,r;this.dirty?null===(i=this.$filterButtons)||void 0===i||i.show():null===(r=this.$filterButtons)||void 0===r||r.hide()}}},{key:"filter",value:function(){var e,i,r,n=this,o=null===(e=window)||void 0===e?void 0:e.product_filter;null==o||null===(i=o.doFilter(this.getFiltersProperties(),this.target,this.preset))||void 0===i||i.done((function(){var e=t(n.preset);if(e.length&&yith_wcan_shortcodes.scroll_top){var i=e.offset().top;if(yith_wcan_shortcodes.scroll_target){var r=t(yith_wcan_shortcodes.scroll_target);i=r.length?r.offset().top:i}else n.isMobile&&(i=100);t("body, html").animate({scrollTop:i-100})}n._regiterStatus(),n.dirty=!1})),this.isMobile&&(this.$preset.removeClass("with-filter-button"),null===(r=this.modalElements.applyFiltersButton)||void 0===r||r.hide(),this.closeModal())}},{key:"getId",value:function(){return this.$preset.data("preset-id")}},{key:"getFilters",value:function(){return!1===this.$filters&&(this.$filters=this.$preset.find(".yith-wcan-filter")),this.$filters}},{key:"getActiveFilters",value:function(){return!1===this.activeFilters&&(this.activeFilters=this.getFiltersProperties()),this.activeFilters}},{key:"isAnyFilterActive",value:function(){return!!Object.keys(this.getActiveFilters()).length}},{key:"isFilterActive",value:function(t){var e,i;switch(t.data("filter-type")){case"tax":case"review":case"price_range":var r=t.find(".filter-dropdown");if(r.length){var n=r.val();e="object"===z(n)?!(null==n||!n.length):!!n;break}case"stock_sale":e=t.find(".filter-item").filter(".active").length;break;case"price_slider":var o=parseFloat(t.find(".price-slider").data("step")),a=parseFloat(t.find(".price-slider").data("min")),l=parseFloat(t.find(".price-slider").data("max")),s=parseFloat(t.find(".price-slider-min").val()),c=parseFloat(t.find(".price-slider-max").val());e=Math.abs(s-a)>=o||Math.abs(c-l)>=o;break;case"orderby":e="menu_order"!==t.find(".filter-order-by").val();break;default:e=!1}return e=void 0!==(i=t.triggerHandler("yith_wcan_is_filter_active",[e,this]))?i:e}},{key:"countActiveItems",value:function(t){var e;switch(t.data("filter-type")){case"tax":case"review":case"price_range":var i=t.find(".filter-dropdown");if(i.length){var r=i.val();e="object"===z(r)?null==r?void 0:r.length:+!!r;break}case"stock_sale":e=t.find(".filter-items").find(".active").length;break;case"orderby":this.isFilterActive(t)&&(e=1);break;default:e=0}return e}},{key:"getFilterProperties",value:function(e){var i,r,n=e.data("filter-type"),o="yes"===e.data("multiple"),a=e.find(".filter-dropdown"),l={};switch(n){case"tax":var s=[],c=e.data("taxonomy"),u=0===c.indexOf("filter"),h=e.data("relation");if(a.length?o?s=a.val():s.push(a.val()):s=(r=e.find(".filter-item").filter(".active").children("a, label")).get().reduce((function(e,i){var r;return(r=(i=t(i)).is("label")?i.find(":input").val():i.data("term-slug"))?(e.push(r),e):e}),s),o){var f=u||"and"!==h?",":"+";l[c]=s.join(f)}else l[c]=s.pop();u&&(l[c.replace("filter_","query_type_")]=h);break;case"review":a.length?l.rating_filter=a.val():(r=e.find(".filter-item").filter(".active").children("a, label"),o?l.rating_filter=r.get().reduce((function(e,i){var r;return(r=(i=t(i)).is("label")?i.find(":input").val():i.data("rating"))?(e.push(r),e):e}),[]).join(","):(r=r.first(),l.rating_filter=r.is("label")?r.find(":input").val():r.data("rating")));break;case"price_range":a.length?o?l.price_ranges=a.val().join(","):(l.min_price=a.val().split("-")[0],l.max_price=a.val().split("-")[1]):(r=e.find(".filter-item").filter(".active").children("a, label"),o?l.price_ranges=r.get().reduce((function(e,i){var r=t(i).data("range-min"),n=t(i).data("range-max");return e+=(n?"".concat(r,"-").concat(n):r)+","}),"").replace(/^(.*),$/,"$1"):(l.min_price=parseFloat(r.first().data("range-min")),l.max_price=parseFloat(r.first().data("range-max"))));break;case"price_slider":l.min_price=parseFloat(e.find(".price-slider-min").val()),l.max_price=parseFloat(e.find(".price-slider-max").val());break;case"stock_sale":e.find(".filter-on-sale").is(".active")&&(l.onsale_filter=1),e.find(".filter-in-stock").is(".active")&&(l.instock_filter=1),e.find(".filter-featured").is(".active")&&(l.featured_filter=1);break;case"orderby":l.orderby=e.find(".filter-order-by").val()}return l=void 0!==(i=e.triggerHandler("yith_wcan_filter_properties",[l,self]))?i:l}},{key:"getFiltersProperties",value:function(){var e={},i=this;return this.getFilters().each((function(){var r=t(this);if(i.isFilterActive(r)){var n=i.getFilterProperties(r);e=i.mergeProperties(e,n,r)}})),e}},{key:"getFiltersByProperties",value:function(e){var i=this;return this.getFilters().filter((function(){var r=t(this);if(i.isFilterActive(r)){var n,o=i.getFilterProperties(r),a=!1,l=L(e);try{for(l.s();!(n=l.n()).done;){var s=n.value;if(["min_price","max_price","price_ranges"].includes(s)&&(o.min_price||o.price_ranges)){a=!0;break}if(o[s]){a=!0;break}}}catch(t){l.e(t)}finally{l.f()}return a}return!1}))}},{key:"maybeToggleClearFilter",value:function(t){this.isFilterActive(t)?this.maybeShowClearFilter(t):this.maybeHideClearFilter(t)}},{key:"maybeToggleClearAllFilters",value:function(){this.isAnyFilterActive()?this.maybeShowClearAllFilters():this.maybeHideClearAllFilters()}},{key:"maybeShowClearFilter",value:function(e){var i=this;this.isFilterActive(e)&&yith_wcan_shortcodes.show_clear_filter&&(e.find(".clear-selection").remove(),t("<a/>",{class:"clear-selection",text:yith_wcan_shortcodes.labels.clear_selection,role:"button"}).prependTo(e.find(".filter-content")).on("click",(function(t){t.preventDefault(),i.deactivateFilter(e,!1,yith_wcan_shortcodes.instant_filters),i.maybeHideClearFilter(e),yith_wcan_shortcodes.instant_filters&&i.closeModal()})))}},{key:"maybeShowClearAllFilters",value:function(){var e=this;this.isAnyFilterActive()&&this.isMobile&&(this.$preset.find(".clear-selection").remove(),t("<a/>",{class:"clear-selection",text:yith_wcan_shortcodes.labels.clear_all_selections,role:"button"}).prependTo(this.$preset.find(".filters-container")).on("click",(function(t){t.preventDefault(),e.deactivateAllFilters(yith_wcan_shortcodes.instant_filters),e.maybeHideClearAllFilters(),yith_wcan_shortcodes.instant_filters&&e.closeModal()})))}},{key:"maybeHideClearFilter",value:function(t){!this.isFilterActive(t)&&yith_wcan_shortcodes.show_clear_filter&&t.find(".clear-selection").remove()}},{key:"maybeHideClearAllFilters",value:function(){this.isAnyFilterActive()||this.$preset.find(".filters-container").children(".clear-selection").remove()}},{key:"deactivateFilter",value:function(e,i,r){var n=e.data("filter-type"),o=e.find(".filter-item"),a=o.filter(".active"),l=e.find(".filter-dropdown");switch(this.inhibitFilters=!0,n){case"tax":var s=e.data("taxonomy");l.length?(i?l.find("option").each((function(){var e=t(this);e.val().toString()===i[s].toString()&&e.prop("selected",!1)})):l.find("option").prop("selected",!1),l.change()):i?a.each((function(){var e=t(this),r=e.children("label"),n=e.children("a");(r.length?r.find(":input").val():n.data("term-slug")).toString()===i[s].toString()&&(e.children("label").children("a").click(),e.removeClass("active"))})):(a.children("label").children("a").click(),a.removeClass("active"));break;case"review":l.length?(i?l.find("option").each((function(){var e=t(this);e.val()===i.rating_filter&&e.prop("selected",!1)})):l.find("option").prop("selected",!1),l.change()):i?a.each((function(){var e=t(this),r=e.children("label"),n=e.children("a");(r.length?r.find(":input").val():n.data("rating"))===i.rating_filter&&(e.children("label").children("a").click(),e.removeClass("active"))})):(a.children("label").children("a").click(),a.removeClass("active"));break;case"price_range":l.length?(i?l.find("option").each((function(){var e=t(this),r=i.min_price+(i.max_price?"-".concat(i.max_price):"");e.val()===r&&e.prop("selected",!1)})):l.find("option").prop("selected",!1),l.change()):i?a.each((function(){var e,r,n=t(this),o=n.children("label"),a=n.children("a");r=o.length?o.find(":input").val():a.data("min_price")+(a.data("max_price")?"-"+a.data("max_price"):""),i.min_price?e=i.min_price+(i.max_price?"-"+i.max_price:""):i.price_ranges&&(e=i.price_ranges),r===e&&(n.children("label").children("a").click(),n.removeClass("active"))})):(a.children("label").children("a").click(),a.removeClass("active"));break;case"price_slider":var c=e.find(".price-slider");e.find(".price-slider-min").val(c.data("min")),e.find(".price-slider-max").val(c.data("max")).change();break;case"orderby":e.find("select").val("menu_order");break;case"stock_sale":i?(null!=i&&i.instock_filter&&e.find(".filter-in-stock").find(":input").prop("checked",!1).change().closest(".filter-item").removeClass("active"),null!=i&&i.onsale_filter&&e.find(".filter-on-sale").find(":input").prop("checked",!1).change().closest(".filter-item").removeClass("active"),null!=i&&i.featured_filter&&e.find(".filter-featured").find(":input").prop("checked",!1).change().closest(".filter-item").removeClass("active")):(e.find(".filter-in-stock").find(":input").prop("checked",!1).change(),e.find(".filter-on-sale").find(":input").prop("checked",!1).change(),e.find(".filter-featured").find(":input").prop("checked",!1).change(),o.removeClass("active"));break;default:o.removeClass("active")}this.inhibitFilters=!1,this.activeFilters=!1,r&&this.filter()}},{key:"deactivateAllFilters",value:function(e){var i=this;return this.getFilters().each((function(){var e=t(this);i.deactivateFilter(e)})),this.activeFilters=!1,e&&this.filter(),!0}},{key:"deactivateFilterByProperties",value:function(e,i){var r=this,n=this.getFiltersByProperties(Object.keys(e));return!!n.length&&(n.each((function(){var n=t(this);r.deactivateFilter(n,e,i)})),!0)}},{key:"toggle",value:function(t,e,i){void 0===i&&(i=e.hasClass("closed"));var r=i?"opened":"closed",n=i?"closed":"opened";t[i?"slideDown":"slideUp"](400,(function(){e.addClass(r).removeClass(n),t.trigger("yith_wcan_toggle_element",[e,i])}))}},{key:"openFilter",value:function(t){var e=t.find(".collapsable");e.length&&this.toggle(t.find(".filter-content"),e,!0)}},{key:"openAllFilters",value:function(e){var i=this;this.getFilters().each((function(){i.openFilter(t(this))}))}},{key:"closeFilter",value:function(t){var e=t.find(".collapsable");e.length&&this.toggle(t.find(".filter-content"),e,!1)}},{key:"closeAllFilters",value:function(e){var i=this;this.getFilters().each((function(){i.closeFilter(t(this))})),void 0!==e&&this.openFilter(e)}},{key:"openModal",value:function(){var e=this;this.isMobile&&(yith_wcan_shortcodes.toggles_open_on_modal?this._openAllCollapsables():this._closeAllCollapsables(),t("body").css("overflow","hidden").addClass("yith-wcan-preset-modal-open"),this.$preset.show(),setTimeout((function(){e.$preset.addClass("open")}),100))}},{key:"closeModal",value:function(){var e=this;this.isMobile&&(this.$preset.removeClass("open"),setTimeout((function(){e.$preset.hide(),t("body").css("overflow","auto").removeClass("yith-wcan-preset-modal-open")}),300))}},{key:"formatPrice",value:function(t){var e,i,r,n;return"undefined"!=typeof accounting&&(t=accounting.formatMoney(t,{symbol:null===(e=yith_wcan_shortcodes.currency_format)||void 0===e?void 0:e.symbol,decimal:null===(i=yith_wcan_shortcodes.currency_format)||void 0===i?void 0:i.decimal,thousand:null===(r=yith_wcan_shortcodes.currency_format)||void 0===r?void 0:r.thousand,precision:0,format:null===(n=yith_wcan_shortcodes.currency_format)||void 0===n?void 0:n.format})),t}},{key:"mergeProperties",value:function(e,i,r){for(var n in i)if(i.hasOwnProperty(n)&&e[n]){switch(n){case"rating_filter":case"min_price":case"max_price":case"onsale_filter":case"instock_filter":case"orderby":e[n]=i[n];break;default:if(0===n.indexOf("query_type_"))e[n]=i[n];else{var o=(null==r?void 0:r.data("relation"))||"and",a=0===n.indexOf("filter_"),l=a||"and"!==o?",":"+",s=e[n].replace(",",l)+l+i[n].replace(",",l);if(s=s.split(l).filter((function(t,e,i){return i.indexOf(t)===e})).join(l),e[n]=s,a){var c=n.replace("filter_","query_type_");e[c]="and",i[c]="and"}}}delete i[n]}return t.extend(e,i),e}}],o&&R(n.prototype,o),a&&R(n,a),Object.defineProperty(n,"prototype",{writable:!1}),e}();function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function V(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,K(r.key),r)}}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=X(t)););return t}(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(arguments.length<3?t:i):n.value}},q.apply(this,arguments)}function Y(t,e){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Y(t,e)}function J(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,r=X(t);if(e){var n=X(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return function(t,e){if(e&&("object"===W(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Q(t)}(this,i)}}function Q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X(t){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},X(t)}function K(t){var e=function(t,e){if("object"!==W(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===W(e)?e:String(e)}var Z=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y(t,e)}(a,e);var i,r,n,o=J(a);function a(){var t,e,i,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return t=o.call.apply(o,[this].concat(l)),e=Q(t),r=!1,(i=K(i="$preset"))in e?Object.defineProperty(e,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[i]=r,t}return i=a,(r=[{key:"getPreset",value:function(){return this.preset?this.preset:(this.$preset=this.$originalSelect.closest(".yith-wcan-filters"),!!this.$preset.length&&this.$preset)}},{key:"_initTemplate",value:function(){var e;if(null!==(e=this.getPreset())&&void 0!==e&&e.hasClass("horizontal")){var i=t("<div>",{class:"dropdown-wrapper"}),r=t("<ul/>",{class:"matching-items filter-items"});i.append(r),this.options.showSearch&&this._initSearchTemplate(i),this.options.paginate&&this._initShowMoreTemplate(i),this.$originalSelect.after(i),this.$_main=null,this.$_label=null,this.$_dropdown=i,this.$_items=r,this._populateItems()}else q(X(a.prototype),"_initTemplate",this).call(this)}}])&&V(i.prototype,r),n&&V(i,n),Object.defineProperty(i,"prototype",{writable:!1}),a}(E);function tt(t){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tt(t)}function et(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(n=r.key,o=void 0,o=function(t,e){if("object"!==tt(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n,"string"),"symbol"===tt(o)?o:String(o)),r)}var n,o}function it(){return it="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ot(t)););return t}(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(arguments.length<3?t:i):n.value}},it.apply(this,arguments)}function rt(t,e){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rt(t,e)}function nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,r=ot(t);if(e){var n=ot(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return function(t,e){if(e&&("object"===tt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)}}function ot(t){return ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ot(t)}var at=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rt(t,e)}(a,e);var i,r,n,o=nt(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this,t)).isHorizontal()&&!globalThis.yith_wcan_backdrop_init&&(e._initBackdropClick(),globalThis.yith_wcan_backdrop_init=!0),e}return i=a,(r=[{key:"_initBackdropClick",value:function(){var e=this;this.isHorizontal()&&(this.getFilters().on("click",(function(t){return t.stopPropagation()})),t(document).on("click",(function(){e.isMobile||e.maybeCloseAllHorizontalToggles()})))}},{key:"isHorizontal",value:function(){var t;return null===(t=this.$preset)||void 0===t?void 0:t.hasClass("horizontal")}},{key:"maybeFilter",value:function(t){var e=t.closest(".yith-wcan-filter");this.maybeRegisterStatusChange(),(!this.isHorizontal()||this.isMobile||!this.isHorizontalToggle(e.find(".filter-title"))||(this.maybeUpdateFiltersCount(e),t.hasClass("apply-filters")||t.hasClass("clear-selection")||yith_wcan_shortcodes.instant_horizontal_filter))&&(yith_wcan_shortcodes.instant_filters&&yith_wcan_shortcodes.instant_horizontal_filter&&this.maybeCloseAllHorizontalToggles(),it(ot(a.prototype),"maybeFilter",this).call(this))}},{key:"maybeShowClearFilter",value:function(e){var i=this;if(this.isFilterActive(e)&&yith_wcan_shortcodes.show_clear_filter)if(!this.isHorizontal()||this.isMobile)it(ot(a.prototype),"maybeShowClearFilter",this).call(this,e);else{e.find(".clear-selection").remove();var r=t("<a/>",{class:"clear-selection button",text:yith_wcan_shortcodes.labels.clear_selection,role:"button"});r.prependTo(e.find(".filter-content-footer")).on("click",(function(t){t.preventDefault(),i.deactivateFilter(e,!1,yith_wcan_shortcodes.instant_filters),i.maybeUpdateFiltersCount(e),i.maybeHideClearFilter(e),i.maybeFilter(r),i.maybeCloseHorizontalToggle(e.find(".filter-title.collapsable"))}))}}},{key:"_initFilter",value:function(t){var e=this;return it(ot(a.prototype),"_initFilter",this).call(this,t).then((function(t){e.maybeUpdateFiltersCount(t),e.isHorizontal()&&t.on("click",(function(t){return t.stopPropagation()}))}))}},{key:"_initTooltip",value:function(t,e){this.isHorizontal()||it(ot(a.prototype),"_initTooltip",this).call(this,t,e)}},{key:"_afterLayoutChange",value:function(){it(ot(a.prototype),"_afterLayoutChange",this).call(this),this.isMobile?this._removeAllHorizontalTogglesFooter():this._addAllHorizontalTogglesFooter()}},{key:"_initDropdownObject",value:function(t,e){return new Z(t,e)}},{key:"_initToggle",value:function(t,e,i){var r=this,n=this.isHorizontal();e.hasClass("closed")&&i.hide(),n&&this._addHorizontalToggleFooter(t),t.off("click").on("click",(function(o){o.stopPropagation(),n&&!r.isMobile&&t.hasClass("filter-title")?(r.maybeCloseAllHorizontalToggles(i),i.toggle(0,(function(){e.toggleClass("opened").toggleClass("closed")}))):r.toggle(i,e),i.trigger("yith_wcan_after_toggle_element",[e])}))}},{key:"isHorizontalToggle",value:function(t){return!!this.isHorizontal()&&t.is(".collapsable")}},{key:"maybeCloseHorizontalToggle",value:function(t){var e=t.next(".filter-content");e.length&&this.isHorizontal()&&!this.isMobile&&t.hasClass("filter-title")&&this.isHorizontalToggle(t)&&(e.hide(),t.toggleClass("opened").toggleClass("closed"))}},{key:"maybeCloseAllHorizontalToggles",value:function(e){t(".yith-wcan-filters.horizontal.enhanced").find(".filter-title.collapsable").next(".filter-content").not(e).hide().prev(".filter-title").removeClass("opened").addClass("closed")}},{key:"_addHorizontalToggleFooter",value:function(e){var i=this,r=e.next(".filter-content");if(r.length&&this.isHorizontal()&&!this.isMobile&&e.hasClass("filter-title")&&this.isHorizontalToggle(e)&&!yith_wcan_shortcodes.instant_horizontal_filter){e.closest(".yith-wcan-filter");var n=t("<div/>",{class:"filter-content-footer"}),o=t("<a/>",{class:"apply-filters button alt",text:yith_wcan_shortcodes.labels.save});o.on("click",(function(){i.maybeFilter(o),i.maybeCloseAllHorizontalToggles(e)})),n.append(o).appendTo(r)}}},{key:"_addAllHorizontalTogglesFooter",value:function(){var e=this;this.getFilters().each((function(){var i=t(this).find(".filter-title.collapsable");i.length&&e._addHorizontalToggleFooter(i)}))}},{key:"_removeHorizontalToggleFooter",value:function(t){var e=t.next(".filter-content");e.length&&e.find(".filter-content-footer").remove()}},{key:"_removeAllHorizontalTogglesFooter",value:function(){var e=this;this.getFilters().each((function(){var i=t(this).find(".filter-title.collapsable");i.length&&e._removeHorizontalToggleFooter(i)}))}},{key:"maybeUpdateFiltersCount",value:function(e){var i=e.find(".filter-title.collapsable");if(i.find(".filter-count").remove(),i.length&&this.isHorizontalToggle(i)&&this.isFilterActive(e)){var r=this.countActiveItems(e);if(r){var n=t("<span/>",{class:"filter-count",text:r});i.append(n)}}}}])&&et(i.prototype,r),n&&et(i,n),Object.defineProperty(i,"prototype",{writable:!1}),a}(U);jQuery((function(t){t(document).on("yith_wcan_init_shortcodes yith_plugin_fw_gutenberg_success_do_shortcode",(function(){t(".yith-wcan-filters").not(".enhanced").each((function(){new at(t(this))})),t(".yith-wcan-active-filters").not(".enhanced").each((function(){new d(t(this))})),t(".yith-wcan-reset-filters").not(".enhanced").each((function(){new g(t(this))})),t(".yith-wcan-filters-opener").not(".enhanced").each((function(){new S(t(this))}))})).trigger("yith_wcan_init_shortcodes"),globalThis.product_filter=new s}))})();