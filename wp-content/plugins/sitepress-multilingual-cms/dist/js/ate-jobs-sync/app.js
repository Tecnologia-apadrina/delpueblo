!function(t){function e(e){for(var a,s,i=e[0],c=e[1],u=e[2],d=0,f=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);for(l&&l(e);f.length;)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},r={2:0},o=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var i=window.webpackWPML=window.webpackWPML||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;o.push([1274,0]),n()}({11:function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return p})),n.d(e,"r",(function(){return b})),n.d(e,"q",(function(){return m})),n.d(e,"h",(function(){return h})),n.d(e,"d",(function(){return g})),n.d(e,"n",(function(){return v})),n.d(e,"c",(function(){return y})),n.d(e,"f",(function(){return j})),n.d(e,"e",(function(){return O})),n.d(e,"l",(function(){return w})),n.d(e,"k",(function(){return E})),n.d(e,"o",(function(){return k})),n.d(e,"m",(function(){return _})),n.d(e,"j",(function(){return C})),n.d(e,"i",(function(){return S})),n.d(e,"p",(function(){return T})),n.d(e,"g",(function(){return x}));var a=n(47),r=n(461),o=n(462),s=n(40),i=n(122),c=n(51),u=n(152),l=n(360),d=n(182),f={CANCELLED:0,WAITING_FOR_TRANSLATOR:1,IN_PROGRESS:2,NEEDS_UPDATE:3,TRANSLATION_READY_TO_DOWNLOAD:4,COMPLETED:10,ATE_NEEDS_RETRY:40,NEEDS_REVIEW:30},p={IN_PROGRESS:2,TRANSLATED:6,DELIVERING:7,EDITED:15,CANCELLED:20,NO_CREDIT:31,HIDDEN:42},b=Object(a.a)("type","post"),m=Object(a.a)("type","package"),h=Object(r.a)([Object(a.a)("review_status","NEEDS_REVIEW"),Object(a.a)("review_status","EDITING")]),g=function(t){return!!v(t)&&(t.status===f.WAITING_FOR_TRANSLATOR||t.status===f.IN_PROGRESS)},v=function(t){return"local"===t.translation_service_id},y=function(t){return!v(t)&&(t.status===f.IN_PROGRESS||t.status===f.COMPLETED)&&t.batch.tp_id&&!t.isBatchSynced},j=function(t){return!v(t)&&(Object(s.a)("status",t)===f.TRANSLATION_READY_TO_DOWNLOAD||Object(s.a)("status",t)===f.COMPLETED)},O=function(t){return!v(t)&&Object(i.a)(Object(s.a)("status",t),[f.TRANSLATION_READY_TO_DOWNLOAD,f.COMPLETED])},w=Object(c.a)(Object(s.a)("status"),Object(i.a)(u.a,[f.WAITING_FOR_TRANSLATOR,f.IN_PROGRESS])),E=function(t){return e=t.automatic,Object(o.a)(String,e)?"0"!==e&&"false"!==e:!!e;var e},k=Object(l.a)(E),_=function(t,e){return t.id===e.id&&t.type===e.type},C=function(t,e){return void 0!==t.find((function(t){return t.status===e}))},S=function(t){return Object(d.a)(0,["extra_data","icl_translate_job_id"],t)},T=function(t){return!(!t.deadline||!w(t))&&new Date>new Date(t.deadline)},x=function(t,e){return t&&t.id===parseInt(e.translation_service_id)}},114:function(t,e,n){},124:function(t,e,n){},1242:function(t,e,n){},1243:function(t,e,n){},1245:function(t,e,n){},1246:function(t,e,n){},1247:function(t,e,n){},1248:function(t,e,n){},1249:function(t,e,n){},125:function(t,e,n){"use strict";n.d(e,"b",(function(){return s}));var a=n(403),r=n.n(a),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"wpml",n="rtl"===document.getElementsByTagName("html")[0].dir,a={arrow:!0,theme:e,animation:"fade",sticky:!0,interactive:!0,dynamicTitle:!0,placement:n?"top-end":"top-start"};r()(t,a)};e.a=o;var s=function(t,e){var n=t._tippy;n&&n.destroy(),t.setAttribute("title",e),o(t,"otgs")}},1274:function(t,e,n){"use strict";n.r(e);var a=n(2),r=n.n(a),o=n(6),s=n.n(o),i=n(65),c=n(25),u=n.n(c),l=n(182),d=n(460),f=n(51),p=n(203),b=n(47),m=n(63),h=n(362),g=n(877),v=n(150),y=n(612),j=n(613),O=n(40),w=n(1),E=n(93),k=n(17),_=n(125),C=function(){return l.a("",["urls","currentUrl"],ate_jobs_sync||{})},S=["otgs-ico-add","otgs-ico-refresh"].map(d.a("i.")).join(", "),T=function(t){t.classList.forEach((function(e){e.startsWith("otgs-ico-")&&t.classList.replace(e,"otgs-ico-refresh-spin")})),Object(_.b)(t,Object(w.a)("Sending for translation","sitepress"))},x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(t=t||document).querySelectorAll('.js-wpml-translate-link[data-auto-translate="1"]')},A=function(t,e){var n=f.a(p.a(b.a("type","childList")),m.a((function(t){return u()(t.addedNodes)})),h.a(),g.a((function(t){return"icl_translate_options"===t.id})))(t);D(x(n)),e.disconnect()},P=function(){var t=s()(r.a.mark((function t(e){var n,a,o,s,i,c,u,l,d,f,p=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:5e3,a=e.currentTarget,o=a.dataset.trid,s=a.dataset.language,i=a.querySelector(S),e.preventDefault(),a.removeEventListener("click",P),T(i),c=v.a(["endpoints","auto-translate"],ate_jobs_sync),t.next=11,Object(k.a)(c,{trid:o,language:s,currentUrl:C()});case 11:if(u=t.sent,l=u.data,d=l.success,f=l.data,!d||!f){t.next=25;break}if(f=y.a({jobId:j.a(parseInt),automatic:j.a(parseInt)},f),a.dataset.tmJobId=f.jobId,a.dataset.shouldAteSync=1,!b.a("automatic",1,f)){t.next=24;break}return t.next=22,Object(E.a)((function(){return I()}),n);case 22:t.next=25;break;case 24:window.location.href=O.a("editUrl",f);case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(){var t=s()(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",window.wpmlAteStatusBarStore.getActions().synchronizeJobs());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),N=function(){var t=s()(r.a.mark((function t(e){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("publish"===e.postStatus&&!e.triggeredByDuplication){t.next=2;break}return t.abrupt("return");case 2:if((n=u()(x())).map((function(t){return t.querySelector("i")})).forEach(T),!n.length){t.next=6;break}return t.abrupt("return",I());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=t||x();e.forEach((function(t){t.querySelector(S)&&t.addEventListener("click",P)}))},L=function(){if(!x().length){var t=document.getElementById("icl_div");if(t)new MutationObserver(A).observe(t,{childList:!0,subtree:!0})}ate_jobs_sync.isAutomaticTranslations&&(D(),document.addEventListener("WPMLLanguagesMetaBoxesRefreshed",(function(t){return N(t.detail)})))},J=n(0),R=n.n(J),B=n(37),M=n.n(B),W=n(3),F=n(175),U=(n(1242),n(192)),q=function(t){return{label:Object(w.a)("Fix it","sitepress"),onClick:t}},G=n(1311),H=Object(w.a)("Automatic translation status","sitepress"),V=Object(w.a)("No translations in the queue","sitepress"),K=Object(w.a)("Translate Everything Automatically","sitepress"),z=Object(w.a)("Translate Everything Automatically is active","sitepress"),Y=(Object(w.a)("Translate Everything Automatically is paused","sitepress"),Object(w.a)("Translate Everything Automatically is stopped","sitepress")),Z=Object(w.a)("Out of Credits for Automatic Translation","sitepress"),X=Object(w.a)("Preparing content for translation","sitepress"),Q=Object(w.a)("Preparing more content for translation","sitepress"),$=Object(w.a)("An error occured, fix it to continue.","sitepress"),tt=Object(w.a)("There is an issue with automatic translation that needs your attention. Fix it to continue.","sitepress"),et=function(){var t=Object(W.h)((function(t){return t.isAutomaticTranslations})),e=Object(W.h)((function(t){return t.notEnoughCredit})),n=Object(W.h)((function(t){return t.accountBalances})),a=Object(W.g)((function(t){return t.afterIssueSolving})),r=Object(W.g)((function(t){return t.notificationCenter})),o=r.updateNotification,s=r.removeNotification;return Object(J.useEffect)((function(){var r,i,c=function(){s("no-credits-admin-bar"),s("no-credits")},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.setLoading,n=void 0===e?function(){}:e;n(!0),Object(U.b)({onIssueSolved:function(){c(),a()},onAteWidgetDisappears:function(){return n(!1)}})};e?(t?o({id:"no-credits-admin-bar",notification:{title:Y,important:!0,highlight:!0,isError:!0,error:$,actions:[q(u)]}}):n&&n.account_balance>0?o({id:"no-credits-admin-bar",notification:{title:Z,important:!0,highlight:!0,isError:!0,error:(i=n.account_balance,Object(G.a)(Object(w.c)(Object(w.b)("You have <b>1</b> prepaid translation credit in your wpml.org account. Assign these credits to your site to start using automatic translation","You have <b>%s</b> prepaid translation credits in your wpml.org account. Assign these credits to your site to start using automatic translation",i,"sitepress"),i),{b:R.a.createElement("b",null)})),actions:[(r=u,{label:Object(w.a)("Assign credits now","sitepress"),onClick:r})]}}):o({id:"no-credits-admin-bar",notification:{title:Z,important:!0,highlight:!0,isError:!0,error:$,actions:[q(u)]}}),o({id:"no-credits",notification:{title:tt,highlight:!0,isError:!0,showOnStatusBar:!1,showOnDashboard:!t,showOnPauseControl:t,actions:[{applyToCompleteNotification:!0,onClick:u}]}})):c()}),[e,n]),null},nt=function(){var t,e,n=Object(W.h)((function(t){return t.needsReviewCount})),a=Object(W.g)((function(t){return t.notificationCenter})),r=a.updateNotification,o=a.removeNotification,s=null===(t=window.ate_jobs_sync)||void 0===t||null===(e=t.urls)||void 0===e?void 0:e.translationQueue,i="string"==typeof s&&s.length;return Object(J.useEffect)((function(){var t;n&&n>0?r({id:"jobs-to-review",notification:{title:(t=n,Object(w.c)(Object(w.b)("%d translation waiting for review","%d translations waiting for review",t,"sitepress"),t)),order:20,showOnDashboard:!0,actions:i?[{applyToCompleteNotification:!0,onClick:function(){return window.location.assign(s)}}]:[]}}):o("jobs-to-review")}),[n]),null},at=n(9),rt=n.n(at),ot=n(204),st=function(){var t,e,n=Object(W.h)((function(t){return t.isAutomaticTranslations})),a=Object(W.h)((function(t){return t.languages.primary})),r=Object(W.h)((function(t){return t.languages.isPrimaryEligibleForAutomaticTranslation})),o=Object(W.h)((function(t){return t.languages.secondariesNotEligibleForAutomaticTranslation})),s=Object(W.g)((function(t){return t.notificationCenter})),i=s.updateNotification,c=s.removeNotification,u=null===(t=window.ate_jobs_sync)||void 0===t||null===(e=t.urls)||void 0===e?void 0:e.editLanguages,l="string"==typeof u&&u.length,d=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unsupported-languages";return i({id:n,notification:{title:t,important:!0,highlight:!0,isError:!0,showOnDashboard:!e,showOnPauseControl:e,actions:l?[{applyToCompleteNotification:!0,onClick:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.setLoading,n=void 0===e?function(){}:e;n(!0),window.location.assign(u)}}]:[]}})};return Object(J.useEffect)((function(){if(r){var t,e;if(o.length>0){var s=ot.a(b.a("mapping",a.code),o),i=rt()(s,2),u=i[0],l=i[1];return u.length>0&&d((e=u.map((function(t){return t.english_name})),Object(w.c)(Object(w.a)("Content in those languages: %s, cannot be automatically translated unless you map them to a language that's different from the default.","sitepress"),e.join(", "))),!1,"mapping-the-same-as-default"),void(l.length>0&&d(function(t){return Object(w.c)(Object(w.b)("Your language, %s, must be mapped to a supported language in order to use automatic translation.","The following languages on your site must be mapped to a supported language in order to use automatic translation: %s",t.length,"sitepress"),t.join(", "))}(l.map((function(t){return t.english_name})))))}c("unsupported-languages"),c("mapping-the-same-as-default")}else d((t=a.english_name,Object(w.c)(Object(w.a)("Your default language, %s, must be mapped to a supported language in order to use automatic translation.","sitepress"),t)),n)}),[r,o]),null},it=function(){var t=Object(W.h)((function(t){return t.notEnoughCredit})),e=Object(W.h)((function(t){return t.needsReviewCount})),n=e&&e>0,a=function(){return t?R.a.createElement(et,null):R.a.createElement(st,null)};return R.a.createElement(R.a.Fragment,null,!!n&&R.a.createElement(nt,null),R.a.createElement(a,null))},ct=n(31),ut=n.n(ct),lt=function(t){var e=t.title,n=t.highlight,a=void 0!==n&&n,r=t.dotIcon,o=void 0!==r&&r,s=t.info,i=void 0===s?null:s,c=t.infoIsLoading,u=void 0!==c&&c,l=t.actions,d=void 0===l?[]:l,f=Object(W.g)((function(t){return t.notificationCenter})),p=f.updateNotification,b=f.removeNotification,m=Object(W.h)((function(t){return t.automaticJobsInProgress})),h=Object(W.h)((function(t){return t.automaticJobsInProgressTotal})),g=Object(W.h)((function(t){return t.automaticJobsStatus})),v=Object(W.h)((function(t){return t.shouldTranslateEverything}));return Object(J.useEffect)((function(){if("problem"!==g){var t;if(!v&&h>0&&m){var n=h-m,r=Math.round(m/100);t={itemsCompleted:n,itemsTotal:h,percentage:n>0?100/h*n:0,minutesToComplete:r}}p({id:"automatic-translation",notification:{title:e,highlight:a,dotIcon:o,info:i,infoIsLoading:u,task:{isActive:!0,progress:t},actions:d}})}else b("automatic-translation")}),[g,m,h]),null},dt=function(){var t=Object(W.h)((function(t){return t.automaticJobsInProgressTotal})),e=Object(W.h)((function(t){return t.automaticJobsInProgress})),n=Object(W.h)((function(t){return t.shouldTranslateEverything})),a=null,r=!1;n&&(a=t>0?Q:X,r=!0);var o=e&&!n?K:z;return R.a.createElement(lt,ut()({highlight:!0},{title:o,info:a,infoIsLoading:r}))},ft=function(){var t=Object(W.h)((function(t){return t.isAutomaticTranslations})),e=Object(W.h)((function(t){return t.languages.readyForAutomaticTranslation})),n=function(){return t&&e?R.a.createElement(dt,null):null};return R.a.createElement(R.a.Fragment,null,R.a.createElement(n,null))},pt=function(){var t=Object(W.h)((function(t){return t.automaticJobsInProgress})),e=H,n=t?null:V;return R.a.createElement(lt,ut()({dotIcon:!0},{title:e,info:n}))},bt=function(){return Object(W.h)((function(t){return t.isAutomaticTranslations}))?null:R.a.createElement(pt,null)},mt=n(8),ht=n.n(mt),gt=(n(1243),function(t){var e,n,a=t.context,r=t.notification,o=r.title,s=r.important,i=r.actions,c=r.highlight,u=r.dotIcon,l=r.isError,d=r.error,f=r.info,p=r.infoIsLoading,b=r.task,m=(b=void 0===b?{}:b).isActive,h=b.progress,g=(h=void 0===h?{}:h).percentage,v=h.itemsCompleted,y=h.itemsTotal,j=h.minutesToComplete,O=Object(J.useState)(!1),E=rt()(O,2),k=E[0],_=E[1];if(Object(J.useEffect)((function(){if(o&&s){var t=document.getElementById("wpml-status-bar-icon");t&&!t.classList.contains("wpml-status-bar-icon--shaking")&&(t.classList.add("wpml-status-bar-icon--shaking"),document.getElementById("wp-admin-bar-ate-status-bar").addEventListener("mouseover",(function(){return t.classList.remove("wpml-status-bar-icon--shaking")})))}}),[o,s]),!o)return null;var C=function(t,e,n,a,r,o){return t&&e?e:n?a?R.a.createElement("span",{className:"wpml-notification-description-subtitle--loading"},n):n:(null!==r&&r>=0&&r<=100&&(s="".concat(r,"%")),o>=0&&(o=o>0?Object(w.c)(Object(w.a)("%d min remaining","sitepress"),o):Object(w.a)("less than 1 min remaining","sitepress"),s=s?"".concat(s,", ").concat(o):o),s);var s}(l,d,f,p,g=g||"0"==g?parseInt(g):void 0,j),S=ht()("wpml-notification-container",{"wpml-notification-container--status-bar":"status-bar"===a,"wpml-notification-container--dashboard":"dashboard"===a,"wpml-notification-container--with-subtitle":C,"wpml-notification-container--highlight":c,"wpml-notification-container--error":l,"wpml-notification-container--active":!0===m,"wpml-notification-container--inactive":!1===m});if(k)e=R.a.createElement("i",{className:"otgs-ico otgs-ico-spinner"});else if(u)e=R.a.createElement("i",{className:"wpml-notification-status-icon-dot"});else switch(m){case!0:e=R.a.createElement("i",{className:"otgs-ico otgs-ico-play"});break;case!1:e=R.a.createElement("i",{className:"otgs-ico otgs-ico-pause"});break;default:e=R.a.createElement("i",{className:"otgs-ico otgs-ico-bell"})}null!==v&&null!==y&&v>=0&&y>=v&&(n="".concat(v," / ").concat(y));var T=null!==g&&g>=0&&g<=100,x=Array.isArray(i)?i.find((function(t){return t.applyToCompleteNotification})):null,A=x?{className:"wpml-notification wpml-notification--clickable",onClick:function(){return x.onClick({setLoading:_})}}:{className:"wpml-notification"},P=x&&"dashboard"===a;return R.a.createElement("div",{className:S},k&&R.a.createElement("div",{className:"wpml-notification-loading"}),R.a.createElement("div",A,R.a.createElement("div",{className:"wpml-notification-status"},e),R.a.createElement("div",{className:"wpml-notification-description"},R.a.createElement("div",{className:"wpml-notification-description-title"},o,n&&R.a.createElement("span",{className:"wpml-notification-description-title-items"},"  ",R.a.createElement("span",null,n))),C&&R.a.createElement("div",{className:"wpml-notification-description-subtitle"},C)),i&&R.a.createElement("div",{className:"wpml-notification-actions"},P&&R.a.createElement("span",{className:"wpml-notification-actions-arrow-link"},R.a.createElement("svg",{width:"13",height:"10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},R.a.createElement("path",{d:"M.253 3.87a.834.834 0 01.595-.258h8.255L7.048 1.505a.875.875 0 01-.253-.622.897.897 0 01.253-.622A.844.844 0 017.651 0a.822.822 0 01.602.26l3.5 3.615c.16.168.25.395.25.63 0 .236-.09.462-.25.63l-3.5 3.615a.846.846 0 01-1.39-.286.903.903 0 01.185-.959l2.055-2.132H.848a.831.831 0 01-.473-.15.873.873 0 01-.312-.396.905.905 0 01.19-.957z"}))),i.map((function(t){var e=t.label,n=t.onClick,a=t.icon;return"string"!=typeof e||"function"!=typeof n?null:R.a.createElement("button",{key:e,type:"button",className:"ant-btn wpml-antd-button",onClick:function(){return n({setLoading:_})}},R.a.createElement("span",null,e),a&&R.a.createElement("i",{className:"otgs-ico otgs-ico-".concat(a)}))})))),T&&R.a.createElement("div",{className:"wpml-notification-progress-bar"},R.a.createElement("div",{className:"wpml-notification-progress-bar-progress",style:{width:"".concat(g,"%")}})))}),vt=function(t){var e=t.context,n=void 0===e?"status-bar":e,a=Object(W.h)((function(t){var e;return(null===(e=t.notificationCenter)||void 0===e?void 0:e.notificationsStatusBar)||[]})),r=Object(W.h)((function(t){var e;return(null===(e=t.notificationCenter)||void 0===e?void 0:e.notificationsDashboard)||[]})),o="status-bar"===n?a:r;return R.a.createElement(R.a.Fragment,null,Object.keys(o).map((function(t){return R.a.createElement(gt,{key:t,notification:o[t],context:n})})))},yt=function(){var t=Object(W.g)((function(t){return t.backgroundTasks})).startRunner;return Object(J.useEffect)((function(){t()}),[]),R.a.createElement("div",{className:"wpml-status-bar",style:{width:"100%"}},R.a.createElement(vt,{context:"status-bar"}),R.a.createElement(ft,null),R.a.createElement(bt,null),R.a.createElement(it,null))},jt=function(){return R.a.createElement("span",{className:"wpml-status-bar-in-progress"},R.a.createElement("i",{className:"otgs-ico otgs-ico-in-progress"}))},Ot=function(){var t=Object(J.useState)(!1),e=rt()(t,2),n=e[0],a=e[1],r=Object(W.h)((function(t){var e;return(null===(e=t.notificationCenter)||void 0===e?void 0:e.inProgress)||!1}));return Object(J.useEffect)((function(){var t=function(t){a(t.detail.status||!1)};return document.addEventListener("statusBarNotification",t),function(){document.removeEventListener("statusBarNotification",t)}}),[a]),R.a.createElement(R.a.Fragment,null,(r||n)&&R.a.createElement(jt,null))},wt=n(193),Et=function(){var t=document.getElementById("wpml-ate-status-bar-content");t.style.display="inline-flex",t.style.width="440px",t.previousSibling.style.display="none";var e=Object(wt.a)(ate_jobs_sync,F.a);M.a.render(R.a.createElement(W.a,{store:e},R.a.createElement(yt,null)),t);var n=new Event("statusBarRendered");t.dispatchEvent(n);var a=document.getElementById("wp-admin-bar-ate-status-bar-badge");M.a.render(R.a.createElement(W.a,{store:e},R.a.createElement(Ot,null)),a)},kt=n(53),_t=n.n(kt),Ct=(n(55),n(598)),St=n.n(Ct),Tt=(n(843),function(t){var e=t.isAdminBar,n=void 0!==e&&e,a=Object(W.h)((function(t){return t.automaticJobsStatus})),r=Object(W.h)((function(t){return t.automaticJobsInProgress})),o=n?R.a.createElement(It,{automaticJobsInProgress:r,status:a}):R.a.createElement(xt,{status:r,icon:a});return R.a.createElement(R.a.Fragment,null,a&&o)}),xt=function(t){var e=t.status,n=t.icon;return R.a.createElement(R.a.Fragment,null,R.a.createElement(_t.a,null,R.a.createElement(St.a,{className:"jobs-status-space",size:[16,0]},R.a.createElement(Nt,{status:n}),R.a.createElement("h1",{className:"progress"},e>0?R.a.createElement("span",{className:"progress__number"},e):At(n)),e>0&&R.a.createElement("div",{className:"small-gray"},R.a.createElement(_t.a,null,Object(w.a)("translations","sitepress")),R.a.createElement(_t.a,null,Object(w.a)("left in the queue","sitepress"))))))},At=function(t){return"problem"===t?Object(w.a)("Translation on hold","sitepress"):Object(w.a)("No translations in the queue","sitepress")},Pt=function(t,e){return t>0?sprintf(Object(w.a)("%d translations left","sitepress"),t):At(e)},It=function(t){var e=t.automaticJobsInProgress,n=t.status,a=Object(W.g)((function(t){return t.notificationCenter})).updateNotification;return Object(J.useEffect)((function(){a({id:"jobs-left-to-translate",notification:{title:Pt(e,n),dotIcon:!0,isError:"problem"===n,order:7}})}),[]),null},Nt=function(t){var e=t.status,n="wpml-auto-translate-status__dot",a={inProgress:"".concat(n,"_in-progress"),complete:"".concat(n,"_complete"),problem:"".concat(n,"_problem")};return R.a.createElement("span",{className:"".concat(n," ").concat(a[e])})},Dt=n(1334),Lt=(n(594),n(151)),Jt=n(76),Rt=function(){return R.a.createElement("svg",{width:"27",height:"30",viewBox:"0 0 27 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},R.a.createElement("path",{d:"M25.4737 0H1.52631C0.868418 0 0.342102 0.526316 0.342102 1.18421V28.8158C0.342102 29.4737 0.868418 30 1.52631 30H17.9737C18.2368 30 18.5 29.8684 18.7632 29.7368L26.2632 23.2895C26.5263 23.0263 26.6579 22.7632 26.6579 22.3684V1.18421C26.6579 0.526316 26.1316 0 25.4737 0ZM22.1842 23.4211L19.1579 26.1842V23.4211H22.1842ZM24.1579 2.36842V21.3158H17.9737C17.3158 21.3158 16.7895 21.7105 16.6579 22.5V27.7632H2.71052V2.36842H24.1579Z",fill:"#47A5BF"}),R.a.createElement("path",{d:"M18.4777 10.7245H8.52234C7.88722 10.7245 7.37234 10.2096 7.37234 9.57447V9.57447C7.37234 8.93934 7.88722 8.42447 8.52234 8.42447H18.4777C19.1128 8.42447 19.6277 8.93934 19.6277 9.57447V9.57447C19.6277 10.2096 19.1128 10.7245 18.4777 10.7245Z",fill:"#47A5BF"},R.a.createElement("animate",{attributeName:"opacity",attributeType:"XML",values:"1; .2; 1",begin:"0s",dur:"0.6s",repeatCount:"indefinite"})),R.a.createElement("path",{d:"M18.4777 16.15H8.52234C7.88722 16.15 7.37234 15.6351 7.37234 15V15C7.37234 14.3649 7.88722 13.85 8.52234 13.85H18.4777C19.1128 13.85 19.6277 14.3649 19.6277 15V15C19.6277 15.6351 19.1128 16.15 18.4777 16.15Z",fill:"#47A5BF"},R.a.createElement("animate",{attributeName:"opacity",attributeType:"XML",values:"1; .2; 1",begin:"0.2s",dur:"0.6s",repeatCount:"indefinite"})),R.a.createElement("path",{d:"M13.6585 21.5755H8.52231C7.88719 21.5755 7.37231 21.0607 7.37231 20.4255V20.4255C7.37231 19.7904 7.88719 19.2755 8.52231 19.2755H13.6585C14.2936 19.2755 14.8085 19.7904 14.8085 20.4255V20.4255C14.8085 21.0607 14.2936 21.5755 13.6585 21.5755Z",fill:"#47A5BF"},R.a.createElement("animate",{attributeName:"opacity",attributeType:"XML",values:"1; .2; 1",begin:"0.4s",dur:"0.6s",repeatCount:"indefinite"})))},Bt=function(){var t=Object(W.h)((function(t){return t.automaticJobsInProgressTotal})),e=R.a.createElement("span",null,Object(w.a)("Preparing more content for translation","sitepress")),n=R.a.createElement("span",null,Object(w.a)("Preparing content for translation","sitepress"));return R.a.createElement("div",{className:"sending"},R.a.createElement(Rt,null)," ",t>0?e:n)},Mt=(n(1245),function(){return R.a.createElement("div",{className:"wpml-card-heading-icon wpml-lightning-icon"},R.a.createElement("span",null,R.a.createElement("svg",{width:"16",height:"22",viewBox:"0 0 16 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},R.a.createElement("path",{d:"M3.79996 20.975C3.79996 21.2375 4.06246 21.5 4.45621 21.5C4.71871 21.5 4.98121 21.3687 5.24371 21.2375L15.4812 9.55625C16.0062 8.9 16.0062 7.85 15.35 7.325C14.9562 7.0625 14.5625 6.93125 14.1687 6.93125H9.18121L13.1187 0.5H5.50621L0.518709 9.425C-0.137541 10.475 0.256209 11.7875 1.30621 12.3125C1.69996 12.4438 1.96246 12.575 2.35621 12.575H6.68746L3.79996 20.5813V20.975Z",fill:"#47A5BF"}))))}),Wt=n(1317),Ft=(n(141),n(114),n(1246),n(1347)),Ut=n(1346),qt=(n(424),n(153),n(514)),Gt=(n(79),function(){var t=Object(W.h)(Object(O.a)("credits")),e=Object(W.h)(Object(O.a)("fetchingCredits")),n=Object(W.g)(Object(O.a)("fetchCredits"));return Object(J.useEffect)((function(){t||n()}),[]),R.a.createElement(R.a.Fragment,null,t?t.error?R.a.createElement(Zt,null):R.a.createElement(Ht,{credits:t,isFetching:e}):"")}),Ht=function(t){var e=t.credits,n=t.isFetching;return R.a.createElement("div",{style:{minHeight:"50px"}},n?R.a.createElement(qt.a,{spinning:!0}):R.a.createElement(Lt.a,null,R.a.createElement(Jt.a,{span:10},R.a.createElement(Vt,{credits:e})),e.active_subscription&&R.a.createElement(Jt.a,{span:12,offset:2},R.a.createElement(Kt,{credits:e}))))},Vt=function(t){var e=t.credits,n=e.available_balance>e.subscription_max_limit?e.available_balance-e.subscription_max_limit:0,a=R.a.createElement("p",{style:{width:150}},Object(w.a)("Remaining prepaid credits that are assigned to this site on WPML.org.","sitepress"));return R.a.createElement(Ut.a,{overlayClassName:"ant-popover-dark",title:null,content:a},R.a.createElement(Lt.a,null,R.a.createElement(Jt.a,{className:"wpml-credit"},R.a.createElement("span",null,R.a.createElement("strong",null,n)))),R.a.createElement(Lt.a,null,R.a.createElement(Ft.b,{className:"small-gray"},Object(w.a)("Prepaid credits left","sitepress"))))},Kt=function(t){var e=t.credits,n=e.pay_as_you_go?R.a.createElement("strong",null,e.subscription_usage):R.a.createElement(R.a.Fragment,null,R.a.createElement("strong",null,e.subscription_usage)," / ",e.subscription_max_limit),a=e.pay_as_you_go?R.a.createElement(Yt,null):R.a.createElement(zt,{credits:e});return R.a.createElement(Ut.a,{overlayClassName:"ant-popover-dark",title:null,content:a},R.a.createElement(Lt.a,null,R.a.createElement(Jt.a,{className:"wpml-subscription"},R.a.createElement("span",null,n))),R.a.createElement(Lt.a,null,R.a.createElement(Ft.b,{className:"small-gray"},e.pay_as_you_go?Object(w.a)("Pay-as-you-go credits used","sitepress"):Object(w.a)("Account credits used","sitepress"))))},zt=function(t){var e=t.credits;return R.a.createElement(R.a.Fragment,null,R.a.createElement("p",{style:{width:250}},Object(w.a)("Once you’ve used all your prepaid credits, we’ll invoice you for any additional credits you use after the end of the month","sitepress")),R.a.createElement("table",null,R.a.createElement("tbody",null,R.a.createElement("tr",null,R.a.createElement("td",null,Object(w.a)("Payment limit:","sitepress")),R.a.createElement("td",null,Object(w.c)(Object(w.a)("%s credits","sitepress"),e.subscription_max_limit))),R.a.createElement("tr",null,R.a.createElement("td",null,Object(w.a)("Credits used:","sitepress")),R.a.createElement("td",null,e.subscription_usage)),R.a.createElement("tr",null,R.a.createElement("td",null,Object(w.a)("Credits left:","sitepress")),R.a.createElement("td",null,e.subscription_max_limit-e.subscription_usage)))))},Yt=function(){return R.a.createElement("p",{style:{width:250}},Object(w.a)("The number of credit you will receive an invoice for at the end of the month. View your pay-as-you-go details in your site’s automatic translation settings.","sitepress"))},Zt=function(){return R.a.createElement(R.a.Fragment,null,Object(w.a)("Calculating","sitepress")," ",R.a.createElement(qt.a,{size:"small",spinning:!0}))},Xt=(n(1247),function(){var t=Object(W.h)((function(t){return t.shouldTranslateEverything})),e=Object(W.h)((function(t){return t.automaticJobsInProgressTotal})),n=t?Object(w.a)("Your site is being automatically translated!","sitepress"):Object(w.a)("Automatic translation status","sitepress"),a=R.a.createElement(Lt.a,{className:"has-jobs"},R.a.createElement(Jt.a,null,R.a.createElement(Tt,null)),t&&R.a.createElement(Jt.a,null,R.a.createElement(Bt,null))),r=R.a.createElement(Lt.a,{className:"has-no-jobs",align:"middle"},R.a.createElement(Jt.a,null,t&&R.a.createElement(te,{text:Object(w.a)("Calculating...","sitepress")})),R.a.createElement(Jt.a,null,t&&R.a.createElement(Bt,null)));return R.a.createElement(R.a.Fragment,null,R.a.createElement(Qt,{heading:n}),R.a.createElement(Lt.a,{className:"wpml-auto-translate-status__content-info"},R.a.createElement(Jt.a,{span:24,className:"status-first-column"},t&&0===e?r:a,R.a.createElement(Lt.a,{className:"credits"},R.a.createElement(Jt.a,{span:24},R.a.createElement(Gt,null))))))}),Qt=function(t){var e=t.heading;return R.a.createElement(Lt.a,{align:"middle"},R.a.createElement(Jt.a,{style:{display:"flex",alignItems:"center"},span:24},R.a.createElement(Mt,null),R.a.createElement("h3",null,e)))},$t=function(){return R.a.createElement("div",{className:"do-not-close"},Object(w.a)("Do not close WP admin!","sitepress"))},te=function(t){var e=t.text;return R.a.createElement(R.a.Fragment,null,R.a.createElement("h1",{className:"progress"},e),R.a.createElement("div",{className:"small-gray",style:{display:"inline-block"}},Object(w.a)("The number of translations","sitepress")))},ee=function(){var t=Object(W.h)(Object(O.a)("shouldTranslateEverything")),e=Object(G.a)(Object(w.a)("Change your <a>automatic translation settings</a> (in-progress translation jobs will be completed with the current settings).","sitepress"),{a:R.a.createElement("a",{href:ate_jobs_sync.urls.automaticSettings})});return R.a.createElement(Lt.a,{className:"wpml-auto-translate-status__footer"},R.a.createElement(Wt.a,null),t&&R.a.createElement(Lt.a,null,R.a.createElement("p",{className:"small-gray"},R.a.createElement("a",{href:ate_jobs_sync.urls.translateAutomaticallyDoc},Object(w.a)("Read more about translating your site automatically.","sitepress")))),R.a.createElement(Lt.a,null,R.a.createElement("p",{className:"small-gray"},e)))},ne=function(t){var e=t.status,n=void 0===e?R.a.createElement(Xt,null):e,a=Object(W.h)((function(t){return t.isAutomaticTranslations})),r=Object(W.h)((function(t){return t.shouldTranslateEverything}));return R.a.createElement(R.a.Fragment,null,R.a.createElement(Dt.a,{className:"wpml-auto-translate-status"},R.a.createElement(Lt.a,{gutter:[0,16],className:"wpml-auto-translate-status__row"},R.a.createElement(Jt.a,{span:24,md:13,className:"wpml-auto-translate-status__content"},n),R.a.createElement(Jt.a,{span:24,md:11,className:"wpml-auto-translate-status__notices"},r&&R.a.createElement(Lt.a,{justify:"end"},R.a.createElement($t,null)),R.a.createElement(vt,{context:"dashboard"}))),!a&&R.a.createElement(ee,null)))},ae=(n(1248),function(){Object(J.useEffect)((function(){document.dispatchEvent(new Event("WPMLManualTranslationStatusIsVisible"))}),[]);var t=Object(G.a)(Object(w.a)("Read more about how to translate your content in the <a>Getting Started Guide</a>","sitepress"),{a:R.a.createElement("a",{href:"https://wpml.org/documentation/getting-started-guide/",target:"_blank",className:"wpml-external-link",rel:"noreferrer"})});return R.a.createElement(Dt.a,{className:"wpml-manual-translation-status"},R.a.createElement(Lt.a,null,R.a.createElement(Jt.a,{span:16},R.a.createElement("h4",null,Object(w.a)("Let's Start Translating!","sitepress")),R.a.createElement("p",null,Object(w.a)("Choose your content from the Translation Dashboard below and create your first translation job!","sitepress")),R.a.createElement("p",null,t)),R.a.createElement(Jt.a,{span:8},R.a.createElement("div",{id:"wpml-manual-translation-status-notice"}))))}),re=function(){return ate_jobs_sync.isAutomaticTranslations||parseInt(ate_jobs_sync.needsReviewCount)>0||ate_jobs_sync.automaticJobsInProgressTotal>0},oe=function(){var t=document.querySelector("#wpml-auto-translate > .content");if(t){var e,n=re(),a=!(null!==(e=ate_jobs_sync)&&void 0!==e&&e.anyJobsExist);(n||a)&&(document.getElementById("wpml-auto-translate").style.display="block");var r=n?R.a.createElement(ne,null):a?R.a.createElement(ae,null):R.a.createElement(R.a.Fragment,null),o=Object(wt.a)(ate_jobs_sync,F.a);M.a.render(R.a.createElement(W.a,{store:o},r),t)}},se=n(11),ie=n(122),ce=n(402),ue=function(t){return t.closest("td")},le=function(t){var e=function(t){t.checked=!1,t.disabled=!0;var e=ue(t);e.setAttribute("title",Object(w.a)("This content is being automatically translated. If you want to do something different with it cancel translation jobs first.","sitepress")),e._tippy||Object(_.a)(e,"otgs")},n=function(){var t=[se.b.COMPLETED,se.b.CANCELLED];Object(f.a)(Object(p.a)((function(t){return parseInt(t.dataset.tmJobId)})),Object(m.a)((function(n){var a,r=(a=n.dataset.tmJobId,document.querySelector('.js-wpml-translate-link[data-tm-job-id="'.concat(a,'"]')).closest("tr").querySelector('input[type="checkbox"]'));"1"!==n.dataset.automatic||Object(ie.a)(parseInt(n.dataset.document_status),t)?function(t){t.disabled=!1;var e=ue(t);e.removeAttribute("title"),e._tippy&&e._tippy.destroy()}(r):e(r)})))(document.querySelectorAll("span.js-wpml-translate-link"))};t.addAction("wpml-tm-ate-after-sync","updateJobs",n),Object(ce.b)("translate-everything-running").then((function(t){return t?Object(m.a)(e,document.querySelectorAll('#icl-tm-translation-dashboard tr input[type="checkbox"]')):n()}))},de=(n(1249),n(49)),fe=n.n(de),pe=n(869),be=n(116),me=n.n(be),he=n(32),ge=n(43),ve=n(26),ye=function(){var t=Object(W.h)(pe.a).success,e=Object(W.g)(pe.a).enable;return Object(J.useEffect)((function(){e()}),[]),Object(J.useEffect)((function(){t&&Object(ge.a)("ateEnabled")}),[t]),R.a.createElement(R.a.Fragment,null,!t&&R.a.createElement(ne,{status:R.a.createElement(je,null)}))},je=function(){var t=Object(W.g)(pe.a).enable,e=Object(W.h)(pe.a),n=e.enabling,a=e.failedMessage,r=n?Object(w.a)("Connecting to WPML’s Advanced Translation Editor","sitepress"):Object(O.a)("header",a),o=R.a.createElement(R.a.Fragment,null,R.a.createElement(fe.a,{span:1,offset:1},R.a.createElement(me.a,{spinning:!0}))),s=R.a.createElement(R.a.Fragment,null,R.a.createElement(fe.a,{offset:1},R.a.createElement("div",{className:"wpml-error"},R.a.createElement("p",{dangerouslySetInnerHTML:{__html:Object(O.a)("description",a)}}),R.a.createElement(ve.a,{type:"error",onClick:t},Object(w.a)("Try again","sitepress")))));return R.a.createElement(R.a.Fragment,null,R.a.createElement(Qt,{heading:r}),R.a.createElement(_t.a,null,n?o:s))},Oe=Object(W.d)({shouldTranslateEverything:!0,enabling:!1,setEnabling:Object(he.a)("enabling"),enable:Object(W.e)(function(){var t=s()(r.a.mark((function t(e){var n,a,o,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setEnabling(!0),t.next=3,Object(k.a)(Object(O.a)("enableATE",ate_jobs_sync.endpoints),{});case 3:n=t.sent,a=n.data,o=a.success,s=a.data,e.setEnabling(!1),e.setSuccess(o),!o&&e.setFailedMessage(Object(i.a)([],"error",s));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),success:!1,setSuccess:Object(he.a)("success"),failedMessage:"",setFailedMessage:Object(he.a)("failedMessage")}),we=function(t){return(e=t.parentNode,n="span",a=document.createElement(n),a.innerHTML=e.innerHTML,e.parentNode.replaceChild(a,e),a).children[0];var e,n,a},Ee=function(t){t.setAttribute("title",Object(w.a)("You don't have the rights to review this language","sitepress")),Object(_.a)(t,"otgs")},ke=function(){u()(document.querySelectorAll('.js-wpml-translate-link[data-user-can-translate="no"] i')).filter((function(t){return t.classList.contains("otgs-ico-needs-review")})).map(we).map(Ee)},_e=function(){ke(),Object(ge.b)("job-link-updated").then(ke),u()(document.querySelectorAll(".js-wpml-translate-link")).forEach((function(t){t.addEventListener("click",(function(){return localStorage.setItem("continueReview",!1),!1}))}))},Ce=function(){var t=s()(r.a.mark((function t(){var e,n,a,o,s,i,c=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:1,n=c.length>1&&void 0!==c[1]&&c[1],t.next=4,Object(k.a)(ate_jobs_sync.endpoints.assignToTranslation,{page:e,lockKey:n});case 4:if(!(a=t.sent).data.success){t.next=9;break}if(o=a.data.data,s=o.nextPage,i=o.lockKey,!(s>e&&i)){t.next=9;break}return t.abrupt("return",Ce(s,i));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Se=function(){var t=s()(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.a)(ate_jobs_sync.endpoints.assignToTranslation,{firstSchedule:!0});case 2:t.sent.data.success||setTimeout((function(){return Se}),2e4);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Te=Ce,xe=function(){var t=s()(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.a)(ate_jobs_sync.endpoints.invalidateLangMappingCache,{});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();ate_jobs_sync.ateCallbacks.retranslation=Se,ate_jobs_sync.ateCallbacks.invalidateCache=xe;var Ae=function(){var t=s()(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:L(),ate_jobs_sync.shouldCheckForRetranslation&&Te(),"1"===ate_jobs_sync.isTranslationManager&&(("undefined"!=typeof wpml_background_tasks&&Object.keys(Object(i.a)({},"tasks",wpml_background_tasks)).length>0||re())&&Et(),"1"===ate_jobs_sync.isAutomaticTranslations&&le(F.a,ate_jobs_sync)),oe();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();document.addEventListener("DOMContentLoaded",(function(){var t,e=Object(wt.a)(ate_jobs_sync,F.a);_e(),"1"===ate_jobs_sync.isAteActive?Ae():"ATE"===ate_jobs_sync.editorMode&&"1"===ate_jobs_sync.isAutomaticTranslations&&((t=document.querySelector("#wpml-auto-translate > .connect"))&&(t.parentNode.style.display="block",M.a.render(R.a.createElement(W.a,{store:Oe},R.a.createElement(ye,null)),t)),Object(ge.b)("ateEnabled").then(Ae).then((function(){return e.getActions().languages.fetchLanguages()})))}))},141:function(t,e,n){},153:function(t,e,n){},175:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n(69),r=Object(a.a)()},185:function(t,e,n){},192:function(t,e,n){"use strict";n.d(e,"a",(function(){return C})),n.d(e,"b",(function(){return P}));var a=n(851),r=n(17),o=n(2),s=n.n(o),i=n(6),c=n.n(i),u=function(){var t=c()(s.a.mark((function t(e,n){var a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(e,n);case 2:if(a=t.sent,r=parseInt(a.available_balance),!isNaN(r)){t.next=6;break}throw Error('"available_balance" is not numeric.');case 6:return t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),l=function(){var t=c()(s.a.mark((function t(e,n){var a,r,o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n,{});case 2:if(a=t.sent,r=a.data,o=r.success,i=r.data,o&&i&&!("error"in i)&&"available_balance"in i){t.next=8;break}throw Error("Error getting credits.");case 8:return t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),d=function(){if(!ate_jobs_sync||!Object(a.a)(["endpoints","getCredits",ate_jobs_sync]))throw Error("ateGetCredits: Missing necessary system data.");return u(r.a,ate_jobs_sync.endpoints.getCredits)},f=n(15),p=n.n(f),b=function(t,e){var n="function"==typeof t,a="function"==typeof e;if(n||a){var r=function(t,e,n){return t[e].forEach((function(t){var e;null!==(e=t.classList)&&void 0!==e&&e.contains("issue-solving-backdrop")&&n()}))},o=new MutationObserver((function(s){s.forEach((function(s){n&&r(s,"addedNodes",t),r(s,"removedNodes",(function(){a&&e(),o.disconnect()}))}))}));return o.observe(document.getElementById("wpml-ate-console-container"),{subtree:!0,childList:!0}),o}},m=!1,h=function(){var t=c()(s.a.mark((function t(e,n,a){var r,o,i,u,l,d,f,p,h;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.onCloseWithCredits,o=e.onCloseWithoutCredits,i=e.onAteWidgetAppears,u=e.onAteWidgetDisappears,l=e.params,d=void 0===l?{}:l,!m){t.next=3;break}return t.abrupt("return");case 3:return m=!0,f=function(){var t=c()(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n().catch((function(t){throw m=!1,t}));case 2:return e=t.sent,t.abrupt("return",e>0);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),p="function"==typeof r?r:function(){},h="function"==typeof o?o:function(){},t.next=9,f();case 9:if(!t.sent){t.next=13;break}return m=!1,p(),t.abrupt("return");case 13:return b(i,u),t.prev=14,t.next=17,a(c()(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:e=t.sent,m=!1,e?p():h();case 5:case"end":return t.stop()}}),t)}))),d);case 17:t.next=23;break;case 19:throw t.prev=19,t.t0=t.catch(14),m=!1,t.t0;case 23:case"end":return t.stop()}}),t,null,[[14,19]])})));return function(e,n,a){return t.apply(this,arguments)}}(),g=n(1308);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var j=function(t,e,n,a){return new Promise((function(r,o){var i,u=n.url,l=n.params;a(u,y(y(y({},l),e),{},{onIssueSolvingClose:(i=c()(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t().catch((function(t){o(t)}));case 2:r(!0);case 3:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})}))}))};function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var E=function(){var t=c()(s.a.mark((function t(e,n){var o,i,c,u,l,d,f=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=f.length>2&&void 0!==f[2]&&f[2],ate_jobs_sync&&Object(g.a)("ateConsole",ate_jobs_sync)&&Object(a.a)(["urls","ateConsole"],ate_jobs_sync)){t.next=4;break}throw console.log("ateLoadWidget: Missing necessary system data."),Error("System error.");case 4:if(head&&"function"==typeof head.js){t.next=7;break}throw console.error("head.js is not available."),Error("System error.");case 7:if(i=ate_jobs_sync.ateConsole,o){t.next=12;break}delete i.job_list,t.next=17;break;case 12:return t.next=14,Object(r.a)(ate_jobs_sync.endpoints.getATEJobsToSync,{});case 14:c=t.sent,u=c.data.data,i.job_list=u;case 17:return l={url:ate_jobs_sync.urls.ateConsole,params:i},d={translation_mode:ate_jobs_sync.isAutomaticTranslations?"everything":"something"},t.abrupt("return",j(e,w(w({},d),n),l,(function(t,e){return head.js(t,(function(){if("function"!=typeof LoadEateWidget)throw console.log("LoadEateWidget is not available."),Error("System error.");LoadEateWidget(e)}))})));case 20:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var C=function(t){var e=t.onCloseWithCredits,n=t.onCloseWithoutCredits,a=t.onAteWidgetAppears,r=t.onAteWidgetDisappears,o=t.params;return h({onCloseWithCredits:e,onCloseWithoutCredits:n,onAteWidgetAppears:a,onAteWidgetDisappears:r,params:_(_({},void 0===o?{}:o),{},{widget_mode:"no_credits"})},d,E)},S=!1,T=function(){var t=c()(s.a.mark((function t(e,n){var a,r,o,i,u,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.onIssueSolved,r=e.onAteWidgetAppears,o=e.onAteWidgetDisappears,i=e.params,u=void 0===i?{}:i,!S){t.next=3;break}return t.abrupt("return");case 3:return S=!0,l="function"==typeof a?a:function(){},b(r,(function(){S=!1,"function"==typeof o&&o()})),t.prev=7,t.next=10,n(c()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:S=!1,l();case 2:case"end":return t.stop()}}),t)}))),u,!0);case 10:t.next=16;break;case 12:throw t.prev=12,t.t0=t.catch(7),S=!1,t.t0;case 16:case"end":return t.stop()}}),t,null,[[7,12]])})));return function(e,n){return t.apply(this,arguments)}}();function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P=function(t){var e=t.onIssueSolved,n=t.onAteWidgetAppears,a=t.onAteWidgetDisappears,r=t.params;return T({onIssueSolved:e,onAteWidgetAppears:n,onAteWidgetDisappears:a,params:A(A({},void 0===r?{}:r),{},{widget_mode:"issue_solving"})},E)}},193:function(t,e,n){"use strict";n.d(e,"a",(function(){return _t}));var a={};n.r(a),n.d(a,"getCounts",(function(){return P}));var r={};n.r(r),n.d(r,"get",(function(){return D}));var o=n(15),s=n.n(o),i=n(2),c=n.n(i),u=n(6),l=n.n(u),d=n(3),f=n(17),p=n(93),b=n(1299),m=n(179),h=n(40),g=n(1306),v=n(65),y=n(182),j=n(449),O=n(43),w=n(32),E=(n(842),n(347)),k=n(67),_=n(345),C=n(850),S=n(611),T=function(t,e){return!C.a(v.a([],t,e))},x=function(t){return l()(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={};case 1:return e.next=3,t.retry(S.a(["jobsToProcess"],n));case 3:n=e.sent,T("processed",n);case 5:if(T("jobsToProcess",n)){e.next=1;break}case 6:case"end":return e.stop()}}),e)})))},A=n(192),P=function(){var t=l()(c.a.mark((function t(){var e,n,a,r,o,s,i,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null===(e=window)||void 0===e||null===(n=e.ate_jobs_sync)||void 0===n||null===(a=n.endpoints)||void 0===a?void 0:a.untranslatedCount){t.next=3;break}throw new Error("ate_jobs_sync does not contain endpoint untranslatedCount");case 3:return t.next=5,Object(f.a)(r,{});case 5:if(o=t.sent,s=o.data,i=s.success,u=s.data,i){t.next=11;break}throw Error(u);case 11:return t.abrupt("return",u);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=function(){var t,e,n,a=null===(t=window)||void 0===t||null===(e=t.ate_jobs_sync)||void 0===e||null===(n=e.endpoints)||void 0===n?void 0:n.languages;if(!a)throw Error("ate_jobs_sync does not contain endpoint languages");return Object(f.a)(a,{})},N={},D=function(){var t=l()(c.a.mark((function t(){var e,n,a,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!("languages"in N)){t.next=2;break}return t.abrupt("return",N.languages);case 2:return t.next=4,I();case 4:if(e=t.sent,n=e.data,a=n.success,r=n.data,a){t.next=10;break}throw Error(r);case 10:if(0!==r.length){t.next=12;break}return t.abrupt("return",[]);case 12:return N.languages=r,t.abrupt("return",N.languages);case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),L=n(9),J=n.n(L),R=n(61),B=n.n(R),M={untranslatedCounts:{},setUntranslatedCounts:Object(d.b)((function(t,e){t.untranslatedCounts=e&&"object"===B()(e)?Object.fromEntries(Object.entries(e).filter((function(t){var e=J()(t,2);e[0];return(+e[1]||0)>0}))):{}})),untranslatedElementsCount:Object(d.c)((function(t){return Object.keys(t.untranslatedCounts).length})),fetchUntranslatedContentCounts:Object(d.e)(function(){var t=l()(c.a.mark((function t(e,n,a){var r,o,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.injections,o=r.untranslatedContentService,t.next=4,o.getCounts();case 4:s=t.sent,e.setUntranslatedCounts(s);case 6:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}())},W=n(877),F=n(410),U=function(t){return{all:t,setAll:Object(d.b)((function(t,e){t.all=e})),primary:Object(d.c)((function(t){return Object(W.a)(Object(h.a)("is_default"),(null==t?void 0:t.all)||[])})),isPrimaryEligibleForAutomaticTranslation:Object(d.c)((function(t){return t.primary&&t.primary.can_be_translated_automatically})),secondaries:Object(d.c)((function(t){return Object(F.a)(Object(h.a)("is_default"),t.all)})),secondariesNotEligibleForAutomaticTranslation:Object(d.c)((function(t){return Object(F.a)(Object(h.a)("can_be_translated_automatically"),t.secondaries)})),readyForAutomaticTranslation:Object(d.c)((function(t){return t.isPrimaryEligibleForAutomaticTranslation&&t.secondaries.length>t.secondariesNotEligibleForAutomaticTranslation.length})),fetchLanguages:Object(d.e)(function(){var t=l()(c.a.mark((function t(e,n,a){var r,o,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.injections,o=r.languagesService,t.prev=2,t.next=5,o.get();case 5:s=t.sent,e.setAll(s),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n,a){return t.apply(this,arguments)}}())}},q=n(203);function G(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return H(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){i=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw o}}}}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function K(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var z={notifications:{},notificationsStatusBar:Object(d.c)((function(t){return Object(q.a)((function(t){var e=t.showOnStatusBar;return void 0===e||e}),t.notifications)})),notificationsDashboard:Object(d.c)((function(t){return Object(q.a)(Object(h.a)("showOnDashboard"),t.notifications)})),notificationsPauseControl:Object(d.c)((function(t){return Object(q.a)(Object(h.a)("showOnPauseControl"),t.notifications)})),inProgress:Object(d.c)((function(t){return Object.values(t.notifications).some((function(t){return t.inProgress}))})),removeNotification:Object(d.b)((function(t,e){delete t.notifications[e]})),updateNotification:Object(d.b)((function(t,e){var n=e.id,a=e.notification,r=K(K({},t.notifications[n]||{}),a);r.inProgress=!1,r.task&&r.task.isActive&&r.task.progress&&(0===r.task.progress.percentage||r.task.progress.percentage&&r.task.progress.percentage>-1&&r.task.progress.percentage<100||(r.task.progress.itemsCompleted>0||0===r.task.progress.itemsCompleted)&&r.task.progress.itemsTotal>0&&r.task.progress.itemsCompleted<r.task.progress.itemsTotal||0===r.task.progress.minutesToComplete||r.task.progress.minutesToComplete>0)&&(r.inProgress=!0);var o=K(K({},t.notifications),{},s()({},n,r));if(t.notifications[n]&&t.notifications[n].highlight===r.highlight&&t.notifications[n].task===r.task&&t.notifications[n].order===r.order)JSON.stringify(t.notifications)!==JSON.stringify(o)&&(t.notifications=o);else{var i,c={},u=G(Object.keys(o).sort((function(t,e){var n=o[t].order?o[t].order:10,a=o[e].order?o[e].order:10,r=o[t].highlight?1:0,s=o[e].highlight?1:0,i=o[t].task?1:0,c=o[e].task?1:0;return n-a||s-r||c-i})));try{for(u.s();!(i=u.n()).done;){var l=i.value;c[l]=o[l]}}catch(t){u.e(t)}finally{u.f()}t.notifications=c}}))},Y=n(47);function Z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function X(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Q={endpoints:{},tasks:{},updateTask:Object(d.b)((function(t,e){e.endpointClass;var n=e.taskData,a=t.tasks;t.tasks=a.map((function(t){return t.taskId===n.taskId?X(X({},t),n):t}))})),startRunner:Object(d.e)(function(){var t=l()(c.a.mark((function t(e,n,a){var r,o,s,i,u,l,d;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.getState,o=r(),s=o.endpoints,i=o.tasks,t.next=4,e.updateNotifications({});case 4:for(u in i)l=i[u],d=Object(W.a)(Object(Y.a)("endpoint",l.taskType),s),l.hasLock&&!l.isPaused&&e.runTask({endpointObject:d,task:l});case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()),runTask:Object(d.e)(function(){var t=l()(c.a.mark((function t(e,n){var a,r,o,s,i,u,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.endpointObject,r=n.task,t.next=3,Object(f.a)(a,r);case 3:if(o=t.sent,s=o.data,i=s.success,u=s.data,l=void 0!==u&&!0===u.isCompleted,i&&(e.updateTask({endpointClass:a.endpoint,taskData:u}),e.updateNotifications({})),!i||!u||l||u.isPaused){t.next=10;break}return t.next=10,e.runTask({endpointObject:a,task:u});case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),updateNotifications:Object(d.e)(function(){var t=l()(c.a.mark((function t(e,n,a){var r,o,s,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a.getState,o=a.getStoreActions,s=r(),i=s.tasks,Object.keys(i).forEach((function(t){var e=i[t],n=e.description,a=e.progressDone,r=e.progressTotal,s=e.isPaused;e.isDisplayed&&o().notificationCenter.updateNotification({id:e.taskId,notification:{title:n||"Background task in progress...",actions:[],task:{isActive:!s,progress:{itemsCompleted:a,itemsTotal:r,percentage:r>0?parseInt(100*a/r):null}}}})}));case 3:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}())},$=n(25),tt=n.n($),et=n(14),nt=n.n(et),at=n(16),rt=n.n(at),ot=n(56),st=n.n(ot),it=n(359),ct=n.n(it),ut=n(125),lt=n(1),dt=n(11),ft=n(72);var pt=function(t){return t.preventDefault(),!1};function bt(t,e){var n=t._tippy;n&&n.destroy(),t.setAttribute("title",e),Object(ut.a)(t,"otgs")}var mt=new WeakMap,ht=new WeakMap,gt=new WeakMap,vt=function(){function t(e){nt()(this,t),mt.set(this,{writable:!0,value:void 0}),ht.set(this,{writable:!0,value:void 0}),gt.set(this,{writable:!0,value:void 0}),s()(this,"jobId",void 0),s()(this,"status",void 0),ct()(this,mt,e),this.jobId=parseInt(e.dataset.tmJobId),ct()(this,ht,e.querySelector("i")),ct()(this,gt,st()(this,ht).dataset.originalTitle),this.status=dt.b.IN_PROGRESS}return rt()(t,[{key:"turnIntoSpinning",value:function(){st()(this,ht).classList.replace("otgs-ico-in-progress","otgs-ico-refresh-spin"),bt(st()(this,ht),Object(lt.a)("Refreshing translation status","sitepress")),st()(this,mt).addEventListener("click",pt,!0)}},{key:"revertToInProgress",value:function(){st()(this,ht).classList.replace("otgs-ico-refresh-spin","otgs-ico-in-progress"),bt(st()(this,ht),st()(this,gt)),st()(this,mt).removeEventListener("click",pt,!0)}},{key:"turnIntoCompleted",value:function(t){st()(this,ht).classList.replace("otgs-ico-refresh-spin",function(t){return t.status===dt.b.COMPLETED?Object(dt.h)(t)?"otgs-ico-needs-review":"otgs-ico-edit":"otgs-ico-in-progress"}(t)),bt(st()(this,ht),t.label),st()(this,mt).dataset.shouldAteSync="0",st()(this,mt).href=t.viewLink,st()(this,mt).removeEventListener("click",pt,!0),Object(O.a)("job-link-updated",t),this.status=dt.b.COMPLETED}},{key:"turnIntoInsufficientBalance",value:function(t,e){var n=this;st()(this,ht).style.color=t?"#333":"#c1c1c1",st()(this,ht).style.cursor=t?"pointer":"default",st()(this,ht).classList.replace("otgs-ico-refresh-spin","otgs-ico-warning");var a=function(){var t=e.replace("CREDITS_ACTION","document.dispatchEvent(new Event('WPMLTooltipCreditsFixClicked'));"),a=st()(n,mt).dataset.tmEditorLink;return a?t.replace("TRANSLATE_LINK",a):t}();bt(st()(this,ht),a),this.status=dt.a.NO_CREDIT}}]),t}();var yt=ft.a(2,(function(t,e){return t.find((function(t){return t.jobId===e.jobId}))})),jt=function(){function t(e,n,a){nt()(this,t),this.getJobsInfo=e,this.isTranslationManager=n,this.notEnoughCreditPopup=a}var e;return rt()(t,[{key:"startSyncing",value:function(t){this.jobs=t,this.jobs.forEach((function(t){return t.turnIntoSpinning()}))}},{key:"markAsInsufficientBalanced",value:function(t){var e=this;t.map(yt(this.jobs)).filter((function(t){return t})).forEach((function(t){return t.turnIntoInsufficientBalance(e.isTranslationManager,e.notEnoughCreditPopup)}))}},{key:"finishSyncIteration",value:(e=l()(c.a.mark((function t(){var e,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((e=this.jobs.filter((function(t){return t.status===dt.b.IN_PROGRESS}))).length>0)){t.next=12;break}return t.prev=2,t.next=5,this.getJobsInfo(e.map((function(t){return t.jobId})));case 5:n=t.sent,e.forEach((function(t){var e=n.find((function(e){return e.jobId===t.jobId}));e&&e.status===dt.b.COMPLETED&&t.turnIntoCompleted(e)})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0);case 12:case"end":return t.stop()}}),t,this,[[2,9]])}))),function(){return e.apply(this,arguments)})},{key:"revertRemainingJobsToInProgress",value:function(){this.jobs.forEach((function(t){t.status===dt.b.IN_PROGRESS&&t.revertToInProgress()}))}}]),t}();function Ot(){var t,e,n,a,r,o,s,i;return new jt((s=null===(t=ate_jobs_sync)||void 0===t||null===(e=t.endpoints)||void 0===e?void 0:e.getJobsInfo,i=null===(n=ate_jobs_sync)||void 0===n||null===(a=n.urls)||void 0===a?void 0:a.currentUrl,function(){var t=l()(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.a)(s,{jobIds:e,returnUrl:i});case 2:if((n=t.sent).data.success){t.next=5;break}throw n.data.data;case 5:return t.abrupt("return",n.data.data);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),null===(r=ate_jobs_sync)||void 0===r?void 0:r.isTranslationManager,null===(o=ate_jobs_sync)||void 0===o?void 0:o.notEnoughCreditPopup)}var wt=n(346);function Et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Et(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _t=function(t){if(Object(j.a)(window.wpmlAteStatusBarStore)){var e=new E.a(new k.a),n={tasks:"undefined"!=typeof wpml_background_tasks?Object(v.a)({},"tasks",wpml_background_tasks):{},endpoints:"undefined"!=typeof wpml_background_tasks?Object(v.a)({},"endpoints",wpml_background_tasks):{}};window.wpmlAteStatusBarStore=function(t){var e=t.anyJobsExist,n=t.jobsToSyncCount,o=t.automaticJobsInProgressTotal,s=t.needsReviewCount,i=t.languages,u=t.endpoints,j=t.ateAPI,E=t.isAutomaticTranslations,k=t.shouldTranslateEverything,C=t.isAteActive,S=t.ateConsole,T=t.backgroundTasksData,A=t.repeatTimeouts,P=void 0===A?{sync:5e3,syncDelayed:1e4,syncIsLockedDelay:3e4,translateEverythingInUse:12e4,translateEverythingWaiting:3e4,translateEverythingWaitingForMediaSetup:2e3}:A,I={anyJobsExist:!!e,isAutomaticTranslations:!!E,jobsToSyncCount:parseInt(n),automaticJobsInProgressTotal:parseInt(o),automaticJobsInProgress:parseInt(o),needsReviewCount:parseInt(s),endpoints:u,credits:null,fetchingCredits:!1,accountBalances:null,shouldTranslateEverything:"1"==k,notEnoughCredit:!1,notifications:{},shouldUseStatusUpdater:!0,automaticJobsStatus:Object(d.c)((function(t){return Object(b.a)([[function(){return t.notEnoughCredit},Object(m.a)("problem")],[function(){return t.automaticJobsInProgress>0},Object(m.a)("inProgress")],[function(){var e;return!(null!=t&&null!==(e=t.languages)&&void 0!==e&&e.readyForAutomaticTranslation)},Object(m.a)("problem")],[function(){return 0===t.automaticJobsInProgress},Object(m.a)("complete")],[Object(m.a)(!0),Object(m.a)(null)]])(t)})),synchronizeJobs:Object(d.e)(function(){var t=l()(c.a.mark((function t(e,n,a){var r,o,s,i,d,p;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.getState,!C){t.next=5;break}return o=x(j),t.next=5,o();case 5:return s=r().shouldUseStatusUpdater?Ot():null,i=new wt.a(u.getJobsCount),d=function(){var t=l()(c.a.mark((function t(n){var a,o,s,i,u,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=(a=r().jobsToSyncCount-n.length)<0?0:a,e.setJobsToSyncCount(a),o=n.filter((function(t){return t.needsReview})).length,s=r().needsReviewCount+o,e.setNeedsReviewCount(s),i=n.filter((function(t){return t.automatic})).length,u=(u=r().automaticJobsInProgress-i)<0?0:u,e.setAutomaticJobsInProgress(u),l={allCount:a,allAutomaticCount:u,needsReviewCount:s},Object(O.a)("ate-jobs-count-updated",l),Object(O.a)("ate-jobs-downloaded",n);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=new _.a({synchronize:function(t){return j.sync(t)},download:function(t,e){return j.download(t,e)},releaseLock:function(t){return Object(f.a)(u.syncLock,{action:"release",lockKey:t})},getJobsCount:i,listeners:{onSyncStart:[function(){return s&&s.startSyncing(tt()(document.querySelectorAll('.js-wpml-translate-link[data-should-ate-sync="1"]')).map((function(t){return new vt(t)})))}],onInsufficientBalance:[function(){return e.setNotEnoughCredit(!0)},function(t){return s&&s.markAsInsufficientBalanced(t)}],onDownloadedChunk:[d,function(){var t=l()(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n>0&&n%5==0&&s)){t.next=3;break}return t.next=3,s.finishSyncIteration();case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()],onSyncDownloadCycleCompleted:[function(t,n){return e.setJobsToSyncCount(t.allCount),e.setAutomaticJobsInProgress(t.allAutomaticCount),e.setNeedsReviewCount(t.needsReviewCount),Object(O.a)("ate-jobs-count-updated",t),Object(O.a)("ate-sync-cycle-completed",n),s&&s.finishSyncIteration()}],onSyncDownloadCompleted:[function(){return s&&s.revertRemainingJobsToInProgress()}]},repeatTimeouts:{sync:P.sync,syncDelayed:P.syncDelayed,syncIsLockedDelay:P.syncIsLockedDelay}}),t.abrupt("return",p.syncAndDownload());case 10:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()),translateEverything:Object(d.e)(function(){var t=l()(c.a.mark((function t(e){var n,a,r,o,s,i,l,d=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:"",a=d.length>2?d[2]:void 0,r=a.getState,Object(O.a)("translate-everything-running",!0),t.next=5,Object(f.a)(Object(h.a)("translate-everything",u),{key:n});case 5:if(o=t.sent,s=o.data,i=s.success,l=s.data,!i){t.next=20;break}if(Object(g.a)(Object(v.a)([],"createdJobs",l))||(e.setAutomaticJobsInProgressTotal(r().automaticJobsInProgressTotal+l.createdJobs.length),e.setAutomaticJobsInProgress(r().automaticJobsInProgress+l.createdJobs.length),e.setJobsToSyncCount(r().jobsToSyncCount+l.createdJobs.length),Object(O.a)("translate-everything-jobs-created",l.createdJobs)),!l.key){t.next=13;break}return t.abrupt("return",e.translateEverything(l.key));case 13:if(e.setShouldTranslateEverything(!1),Object(O.a)("translate-everything-running",!1),!(r().jobsToSyncCount+l.createdJobs.length>0)){t.next=17;break}return t.abrupt("return",Promise.all([e.fetchCredits(),e.synchronizeJobs()]));case 17:return t.abrupt("return",e.fetchCredits());case 20:if("in-use"!==l.key){t.next=24;break}return t.abrupt("return",Object(p.a)(e.translateEverything,P.translateEverythingInUse));case 24:if("waiting"!==l.key){t.next=28;break}return t.abrupt("return",Object(p.a)(e.translateEverything,P.translateEverythingWaiting));case 28:if("media-setup-not-finished"!==l.key){t.next=30;break}return t.abrupt("return",Object(p.a)(e.translateEverything,P.translateEverythingWaitingForMediaSetup));case 30:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),fetchCredits:Object(d.e)(function(){var t=l()(c.a.mark((function t(e){var n,a,r,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setFetchingCredits(!0),t.next=3,Object(f.a)(u.getCredits,{});case 3:return n=t.sent,a=n.data,t.next=7,Object(f.a)(u.getAccountBalances,{});case 7:r=t.sent,o=r.data,e.setFetchingCredits(!1),a.success&&!Object(y.a)(!1,["data","error"],a)&&e.setCredits(a.data),o.success&&!Object(y.a)(!1,["data","error"],o)&&e.setAccountBalances(o.data);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),setAutomaticJobsInProgressTotal:Object(w.a)("automaticJobsInProgressTotal"),setAutomaticJobsInProgress:Object(w.a)("automaticJobsInProgress"),setJobsToSyncCount:Object(w.a)("jobsToSyncCount"),setNeedsReviewCount:Object(w.a)("needsReviewCount"),setCredits:Object(d.b)((function(t,e){t.credits=e,Object(O.a)("ate-credits-updated",e)})),setAccountBalances:Object(d.b)((function(t,e){t.accountBalances=e})),setFetchingCredits:Object(w.a)("fetchingCredits"),setShouldTranslateEverything:Object(w.a)("shouldTranslateEverything"),setShouldUseStatusUpdater:Object(w.a)("shouldUseStatusUpdater"),setIsAutomaticTranslations:Object(w.a)("isAutomaticTranslations"),setNotEnoughCredit:Object(d.e)(function(){var t=l()(c.a.mark((function t(e,n,a){var r,o,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.getState,n===r().notEnoughCredit){t.next=9;break}return t.next=4,Object(f.a)(u.getATEJobsToSync,{});case 4:return o=t.sent,s=o.data,S.job_list=s.data,e.setNotEnoughCreditAction(n),t.abrupt("return",e.fetchCredits());case 9:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()),afterIssueSolving:Object(d.e)(function(){var t=l()(c.a.mark((function t(e,n,a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.getState,e.setNotEnoughCreditAction(!1),t.next=4,e.fetchCredits();case 4:return t.abrupt("return",e.synchronizeJobs());case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()),setNotEnoughCreditAction:Object(d.b)((function(t,e){t.notEnoughCredit=e,Object(O.a)("ate-not-enough-credit",e)})),untranslatedContent:M,languages:U(i),notificationCenter:z,backgroundTasks:Q};return Object(d.d)(I,{initialState:{backgroundTasks:T},injections:{untranslatedContentService:a,languagesService:r}})}(kt(kt({},t),{},{ateAPI:e,backgroundTasksData:n})),Object(h.a)("shouldTranslateEverything",ate_jobs_sync)?window.wpmlAteStatusBarStore.getActions().translateEverything():parseInt(Object(h.a)("jobsToSyncCount",ate_jobs_sync))>0&&window.wpmlAteStatusBarStore.getActions().synchronizeJobs(),Object(O.a)("ate-jobs-count-updated",{allCount:ate_jobs_sync.jobsToSyncCount,allAutomaticCount:ate_jobs_sync.automaticJobsInProgressTotal,needsReviewCount:ate_jobs_sync.needsReviewCount}),document.addEventListener("WPMLTooltipCreditsFixClicked",(function(){t.ateConsole&&Object(A.b)({onIssueSolved:function(){return window.wpmlAteStatusBarStore.getActions().afterIssueSolving()},onAteWidgetDisappears:function(){Object(O.a)("ate-issue-solved-popup-closed",!0)}})})),Object(O.b)("translate-everything-start").then((function(t){var e=t.shouldUseStatusUpdater,n=void 0===e||e;window.wpmlAteStatusBarStore.getActions().setShouldUseStatusUpdater(n),window.wpmlAteStatusBarStore.getActions().setShouldTranslateEverything(!0),window.wpmlAteStatusBarStore.getActions().translateEverything(),window.wpmlAteStatusBarStore.getActions().setIsAutomaticTranslations(!0)})),Object(O.b)("translate-everything-stop").then((function(){window.wpmlAteStatusBarStore.getActions().setIsAutomaticTranslations(!1)})),Object(O.b)("ate-sync-start").then((function(t){var e=t.createdTranslations,n=t.shouldUseStatusUpdater,a=void 0===n||n;window.wpmlAteStatusBarStore.getActions().setShouldUseStatusUpdater(a),window.wpmlAteStatusBarStore.getActions().setAutomaticJobsInProgressTotal(parseInt(window.wpmlAteStatusBarStore.getState().automaticJobsInProgressTotal)+e.length),window.wpmlAteStatusBarStore.getActions().setJobsToSyncCount(parseInt(window.wpmlAteStatusBarStore.getState().jobsToSyncCount)+e.length),window.wpmlAteStatusBarStore.getActions().setAutomaticJobsInProgress(parseInt(window.wpmlAteStatusBarStore.getState().automaticJobsInProgress)+e.length),window.wpmlAteStatusBarStore.getActions().synchronizeJobs()}))}return window.wpmlAteStatusBarStore}},345:function(t,e,n){"use strict";n.d(e,"a",(function(){return H}));var a=n(15),r=n.n(a),o=n(2),s=n.n(o),i=n(9),c=n.n(i),u=n(6),l=n.n(u),d=n(25),f=n.n(d),p=n(14),b=n.n(p),m=n(16),h=n.n(m),g=n(404),v=n.n(g),y=n(405),j=n.n(y),O=n(406),w=n.n(O),E=n(51),k=n(40),_=n(122),C=n(152),S=n(65),T=n(204),x=n(47),A=n(611),P=n(613),I=n(63),N=n(612),D=n(360),L=n(203),J=n(376),R=n(418),B=n(362),M=n(11);n(93);function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var U=E.a(k.a("ateStatus"),_.a(C.a,[M.a.TRANSLATED,M.a.DELIVERING,M.a.EDITED]));function q(t){return new Promise((function(e){return setTimeout(e,t)}))}var G=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;b()(this,t),this.insufficientBalanceJobs=e,this.stillInProgressJobs=n,this.downloaded=a,this.notDownloaded=r,this.lockKey=o}return h()(t,[{key:"prepandPrevioslyDownloadedJobs",value:function(e){return new t(this.insufficientBalanceJobs,this.stillInProgressJobs,[].concat(f()(e),f()(this.downloaded)),this.notDownloaded,this.lockKey)}}]),t}(),H=function(){function t(e){var n=e.synchronize,a=e.download,r=e.releaseLock,o=e.listeners,s=(o=void 0===o?{}:o).onInsufficientBalance,i=void 0===s?[]:s,c=o.onDownloadedChunk,u=void 0===c?[]:c,l=o.onSyncDownloadCycleCompleted,d=void 0===l?[]:l,f=o.onSyncDownloadCompleted,p=void 0===f?[]:f,m=o.onSyncStart,h=void 0===m?[]:m,g=o.onSyncLocked,v=void 0===g?[]:g,y=e.getJobsCount,j=e.repeatTimeouts,O=(j=void 0===j?{}:j).sync,w=void 0===O?5e3:O,E=j.syncDelayed,k=void 0===E?1e4:E,_=j.syncIsLockedDelay,C=void 0===_?6e4:_;b()(this,t),this.synchronize=n,this.download=a,this.releaseLock=r,this.getJobsCount=y,this.onInsufficientBalance=i,this.onDownloadedChunk=u,this.onSyncStart=h,this.onSyncDownloadCycleCompleted=d,this.onSyncDownloadCompleted=p,this.onSyncLocked=v,this.repeatTimeouts={sync:w,syncDelayed:k,syncIsLockedDelay:C}}var e,n,a,r,o,i,u;return h()(t,[{key:"syncSinglePage",value:(u=l()(s.a.mark((function t(){var e,n,a,r,o,i,u,l,d,f,p,b=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=b.length>0&&void 0!==b[0]?b[0]:{},t.next=3,this.synchronize(e);case 3:return n=t.sent,a=S.a([],"jobs",n),r=T.a(x.a("ateStatus",M.a.NO_CREDIT),a),o=c()(r,2),i=o[0],u=o[1],l=T.a(U,u),d=c()(l,2),f=d[0],p=d[1],i.length&&this.onInsufficientBalance.forEach((function(t){return t(i)})),t.abrupt("return",{insufficientBalanceJobs:i,readyToDownloadJobs:f,stillInProgressJobs:p,response:n});case 9:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"synchronizeAllPages",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return w()(s.a.mark((function a(){var r,o,i;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=n?{lockKey:n}:{},o={};case 2:return o=A.a(["lockKey","ateToken","nextPage","numberOfPages"],r),a.next=5,j()(t.syncSinglePage(F(F({},o),{},{includeManualAndLongstandingJobs:e})));case 5:return i=a.sent,r=i.response,a.next=9,{insufficientBalanceJobs:i.insufficientBalanceJobs||[],readyToDownloadJobs:i.readyToDownloadJobs||[],stillInProgressJobs:i.stillInProgressJobs||[],lockKey:k.a("lockKey",r)};case 9:if(S.a(!1,"ateToken",r)){a.next=2;break}case 10:case"end":return a.stop()}}),a)})))()}},{key:"downloadSingleBatch",value:(i=l()(s.a.mark((function t(e,n){var a,r,o,i,u,l,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=P.a(parseInt),t.prev=1,t.next=4,this.download(e,n);case 4:return r=t.sent,r=I.a(N.a({jobId:a,status:a}),r),o=function(t){var e=r.find(x.a("jobId",t.jobId));return e?F(F({},t),e):t},i=E.a(I.a(o),T.a(x.a("status",M.b.COMPLETED)))(e),u=c()(i,2),l=u[0],d=u[1],t.abrupt("return",{downloadedJobs:l,notDownloaded:d});case 11:return t.prev=11,t.t0=t.catch(1),console.log(t.t0),t.abrupt("return",{notDownloaded:e,downloadedJobs:[]});case 15:case"end":return t.stop()}}),t,this,[[1,11]])}))),function(t,e){return i.apply(this,arguments)})},{key:"downloadAll",value:(o=l()(s.a.mark((function t(e,n){var a,r,o,i,c,u,l,d,p=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=D.a(x.a("status",M.b.COMPLETED)),r=[],o=[],i=L.a(J.a(U,a),e),c=R.a(5,i),u=R.a((b=void 0,m=void 0,"undefined"==typeof ate_jobs_sync||null===ate_jobs_sync?2:(null===(b=ate_jobs_sync)||void 0===b||null===(m=b.settings)||void 0===m?void 0:m.numberOfParallelDownloads)||2),c),l=s.a.mark((function t(e){var a,i,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(I.a((function(t){return p.downloadSingleBatch(t,n)}),u[e]));case 2:if(a=t.sent,i=B.a(I.a(k.a("downloadedJobs"),a)),c=B.a(I.a(k.a("notDownloaded"),a)),!i.length||!p.onDownloadedChunk.length){t.next=8;break}return t.next=8,Promise.all(I.a((function(t){return t(i,parseInt(e))}),p.onDownloadedChunk));case 8:r.push.apply(r,f()(i)),o.push.apply(o,f()(c));case 10:case"end":return t.stop()}}),t)})),t.t0=s.a.keys(u);case 8:if((t.t1=t.t0()).done){t.next=13;break}return d=t.t1.value,t.delegateYield(l(d),"t2",11);case 11:t.next=8;break;case 13:return t.abrupt("return",{downloaded:r,notDownloaded:o});case 14:case"end":return t.stop()}var b,m}),t)}))),function(t,e){return o.apply(this,arguments)})},{key:"syncAndDownloadCycle",value:(r=l()(s.a.mark((function t(){var e,n,a,r,o,i,c,u,l,d,p,b,m,h,g,y=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=!(y.length>0&&void 0!==y[0])||y[0],n=y.length>1&&void 0!==y[1]?y[1]:null,a=[],r=[],o=[],i=[],c=n,u=!0,l=!1,t.prev=9,p=v()(this.synchronizeAllPages(e,c));case 11:return t.next=13,p.next();case 13:return b=t.sent,u=b.done,t.next=17,b.value;case 17:if(m=t.sent,u){t.next=32;break}if(h=m,a.push.apply(a,f()(h.insufficientBalanceJobs)),r.push.apply(r,f()(h.stillInProgressJobs)),c=h.lockKey,!h.lockKey){t.next=29;break}return t.next=26,this.downloadAll(h.readyToDownloadJobs,h.lockKey);case 26:g=t.sent,o.push.apply(o,f()(g.downloaded)),i.push.apply(i,f()(g.notDownloaded));case 29:u=!0,t.next=11;break;case 32:t.next=38;break;case 34:t.prev=34,t.t0=t.catch(9),l=!0,d=t.t0;case 38:if(t.prev=38,t.prev=39,u||null==p.return){t.next=43;break}return t.next=43,p.return();case 43:if(t.prev=43,!l){t.next=46;break}throw d;case 46:return t.finish(43);case 47:return t.finish(38);case 48:return t.abrupt("return",new G(a,r,o,i,c));case 49:case"end":return t.stop()}}),t,this,[[9,34,38,48],[39,,43,47]])}))),function(){return r.apply(this,arguments)})},{key:"syncAndDownload",value:(a=l()(s.a.mark((function t(){var e,n,a,r,o,i,c,u,l,d=this,f=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=f.length>0&&void 0!==f[0]?f[0]:{},n=e.suspendCycleRepeat,a=void 0!==n&&n,this.onSyncStart.forEach((function(t){return t()})),i=1,c=!0,u=null,l=s.a.mark((function t(){var e,n,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.syncAndDownloadCycle(c,u);case 2:return n=t.sent,o=n.prepandPrevioslyDownloadedJobs((null===(e=o)||void 0===e?void 0:e.downloaded)||[]),u=n.lockKey||null,c=!u,t.next=8,d.getJobsCount.get();case 8:return l=t.sent,t.next=11,Promise.all(d.onSyncDownloadCycleCompleted.map((function(t){return t(l,n)})));case 11:if(!a){t.next=17;break}if(t.t0=u,!t.t0){t.next=16;break}return t.next=16,d.releaseLock(n.lockKey);case 16:return t.abrupt("return","break");case 17:if(!u){t.next=23;break}return t.next=20,d._shouldRetryWithLock(i,n,l);case 20:t.t1=t.sent,t.next=26;break;case 23:return t.next=25,d._shouldRetryWithoutLock(i,l,r);case 25:t.t1=t.sent;case 26:i=t.t1,r=l;case 28:case"end":return t.stop()}}),t)}));case 6:return t.delegateYield(l(),"t0",7);case 7:if("break"!==t.t0){t.next=10;break}return t.abrupt("break",11);case 10:if(i){t.next=6;break}case 11:return this.onSyncDownloadCompleted.forEach((function(t){return t(o)})),t.abrupt("return",o);case 13:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"_shouldRetryWithLock",value:(n=l()(s.a.mark((function t(e,n,a){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a.automaticWithoutLongstandingCount<=n.insufficientBalanceJobs.length||e>=10)){t.next=4;break}return t.next=3,this.releaseLock(n.lockKey);case 3:return t.abrupt("return",!1);case 4:return e=n.downloaded.length>0?1:e+1,r=n.downloaded.length>0?this.repeatTimeouts.sync:e*this.repeatTimeouts.syncDelayed,t.next=8,q(r);case 8:return t.abrupt("return",e);case 9:case"end":return t.stop()}}),t,this)}))),function(t,e,a){return n.apply(this,arguments)})},{key:"_shouldRetryWithoutLock",value:(e=l()(s.a.mark((function t(e,n,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.automaticWithoutLongstandingCount<=0)){t.next=2;break}return t.abrupt("return",!1);case 2:if(!((e=!a||a.automaticWithoutLongstandingCount>n.automaticWithoutLongstandingCount?1:e+1)>=3)){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,q(this.repeatTimeouts.syncIsLockedDelay);case 7:return t.abrupt("return",e);case 8:case"end":return t.stop()}}),t,this)}))),function(t,n,a){return e.apply(this,arguments)})}]),t}()},346:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var a=n(2),r=n.n(a),o=n(6),s=n.n(o),i=n(14),c=n.n(i),u=n(16),l=n.n(u),d=n(17),f=n(182),p=function(){function t(e){c()(this,t),this.endpoint=e}var e;return l()(t,[{key:"get",value:(e=s()(r.a.mark((function t(){var e,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.a)(this.endpoint,{});case 2:return e=t.sent,n=function(t){return parseInt(Object(f.a)(0,["data","data",t],e))},t.abrupt("return",{allCount:n("allCount"),allAutomaticCount:n("allAutomaticCount"),automaticWithoutLongstandingCount:n("automaticWithoutLongstandingCount"),needsReviewCount:n("needsReviewCount")});case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}()},347:function(t,e,n){"use strict";var a=n(2),r=n.n(a),o=n(6),s=n.n(o),i=n(14),c=n.n(i),u=n(16),l=n.n(u),d={createJob:"/wpml/tm/v1/ate/jobs",sync:"/wpml/tm/v1/ate/jobs/sync",retry:"/wpml/tm/v1/ate/jobs/retry",download:"/wpml/tm/v1/ate/jobs/download",fixJobStatus:function(t,e){return"/wpml/tm/v1/ate/jobs/".concat(t,"/fix?jobId=").concat(e)},getJobStatus:function(t){return"/wpml/tm/v1/ate/jobs/".concat(t)}},f=function(){function t(e){c()(this,t),this.request=e}var e,n,a;return l()(t,[{key:"createJob",value:function(t){var e=t.xliff,n=t.returnURL,a=e.sourceLang,r=e.targetLang,o=e.content;return this.request.post(d.createJob,{source_language:a,target_language:r,file:{name:"some_page_en_fr.xliff",type:"data:application/x-xliff;base64",content:o},return_url:n})}},{key:"getJobStatus",value:function(t){return this.request.get(d.getJobStatus(t))}},{key:"fixJobStatus",value:function(t,e){return this.request.get(d.fixJobStatus(t,e))}},{key:"sync",value:(a=s()(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request.post(d.sync,e));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"retry",value:(n=s()(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request.post(d.retry,e));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"download",value:(e=s()(r.a.mark((function t(e,n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request.post(d.download,{jobs:e,lockKey:n}));case 1:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})}]),t}();e.a=f},402:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return l}));var a=n(25),r=n.n(a),o=n(460),s=n(459),i=n(51),c=Object(o.a)("WPML-"),u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};document.dispatchEvent(new CustomEvent(c(t),{detail:e}))},l=function(t){var e=[],n={then:function(t){return e=Object(s.a)(t,e),this}};return document.addEventListener(c(t),(function(t){i.a.apply(void 0,r()(e))(t.detail)})),n}},424:function(t,e,n){},55:function(t,e,n){},594:function(t,e,n){},67:function(t,e,n){"use strict";var a=n(2),r=n.n(a),o=n(6),s=n.n(o),i=n(14),c=n.n(i),u=n(16),l=n.n(u),d=n(36),f=n.n(d),p=n(42),b=n.n(p),m=n(35),h=n.n(m),g=n(71),v=n(69);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=h()(t);if(e){var r=h()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return b()(this,n)}}Object(v.a)();var j=function(t){f()(a,t);var e,n=y(a);function a(){return c()(this,a),n.apply(this,arguments)}return l()(a,[{key:"get",value:function(t){return this.request(t,"GET")}},{key:"post",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.request(t,"POST",e)}},{key:"download",value:(e=s()(r.a.mark((function t(e){var n=this;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(e,this.generateArgs("GET")).then((function(t){return t.ok?t.blob():n.buildError(t)})));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"request",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this.generateArgs(e,n);return this.restUrl.includes("?")&&(t=t.replace("?","&")),this.handleRequest(this.restUrl+t,a)}},{key:"handleRequest",value:function(t,e){var n=this;return fetch(t,e).then((function(t){return t.ok?t.json():n.buildError(t)}))}},{key:"generateArgs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={method:t.toUpperCase(),headers:{Accept:"application/json","Content-Type":"application/json","X-WP-Nonce":this.restNonce},credentials:"same-origin"};return"GET"!==n.method&&e&&(n.body="string"==typeof e?e:JSON.stringify(e)),n}},{key:"buildError",value:function(t){return t.json().then((function(e){var n=new Error(e.message||t.statusText);return Promise.reject(Object.assign(n,{response:t}))}))}}]),a}(g.a);e.a=j},71:function(t,e,n){"use strict";var a=n(14),r=n.n(a),o=function t(e){r()(this,t),this.ID=e.ID,this.caps=e.caps,this.roles=e.roles,this.user_email=e.data,this.user_login=e.data.user_email,this.user_nicename=e.data.user_login};e.a=function t(){r()(this,t),this.restUrl=WPML_TM_SETTINGS.restUrl,this.restNonce=WPML_TM_SETTINGS.restNonce,this.ateSettings=WPML_TM_SETTINGS.ate,this.currentUser=new o(WPML_TM_SETTINGS.currentUser)}},79:function(t,e,n){},843:function(t,e,n){}});