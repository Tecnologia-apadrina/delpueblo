!function(t){function n(n){for(var r,o,c=n[0],i=n[1],u=n[2],f=0,p=[];f<c.length;f++)o=c[f],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);for(l&&l(n);p.length;)p.shift()();return a.push.apply(a,u||[]),e()}function e(){for(var t,n=0;n<a.length;n++){for(var e=a[n],r=!0,c=1;c<e.length;c++){var i=e[c];0!==s[i]&&(r=!1)}r&&(a.splice(n--,1),t=o(o.s=e[0]))}return t}var r={},s={25:0},a=[];function o(n){if(r[n])return r[n].exports;var e=r[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=t,o.c=r,o.d=function(t,n,e){o.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,n){if(1&n&&(t=o(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)o.d(e,r,function(n){return t[n]}.bind(null,r));return e},o.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(n,"a",n),n},o.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},o.p="";var c=window.webpackWPML=window.webpackWPML||[],i=c.push.bind(c);c.push=n,c=c.slice();for(var u=0;u<c.length;u++)n(c[u]);var l=i;a.push([1298,0]),e()}({100:function(t,n,e){"use strict";e.d(n,"a",(function(){return y}));var r=e(2),s=e.n(r),a=e(6),o=e.n(a),c=e(14),i=e.n(c),u=e(16),l=e.n(u),f="/wpml/tm/v1",p={getJobs:"".concat(f,"/jobs/"),applyTranslations:"".concat(f,"/tp/apply-translations/"),syncJobsAction:"wpml-tp-sync-job-states",syncBatchAction:"".concat(f,"/tp/batches/sync"),checkSyncBatchAction:"".concat(f,"/tp/batches/status/"),cancelJobs:"".concat(f,"/jobs/cancel/"),downloadTranslation:function(t){var n=t.id,e=t.type;return"".concat(WPML_TM_SETTINGS.restUrl).concat(f,"/tp/xliff/download/").concat(n,"/").concat(e)},assignTranslator:"".concat(f,"/jobs/assign"),cancelTranslationReviews:"".concat(f,"/jobs/translation-reviews/cancel")},h=e(61),d=e.n(h),b=e(9),j=e.n(b);var v=function(t,n){var e=new URL(t,"http://testsite.local");return function(t,n){Object.entries(t).map((function(t){var e=j()(t,2),r=e[0],s=e[1];if(!Array.isArray(s))return"object"===d()(s)?Object.entries(s).map((function(t){var e=j()(t,2),s=e[0],a=e[1];return n.set("".concat(r,"[").concat(s,"]"),a)})):n.set(r,s);s.map((function(t){return n.append("".concat(r,"[]"),t)}))}))}(n,e.searchParams),e.href.replace("http://testsite.local","")},y=(e(187),function(){function t(n){i()(this,t),this.request=n}var n,e,r;return l()(t,[{key:"synchronizeStatusesWithTP",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=new FormData;return n.append("action",p.syncJobsAction),n.append("nonce",WPML_TM_SETTINGS.syncJobStatesNonce),t&&n.append("update_last_picked_up",1),fetch(ajaxurl,{method:"POST",body:n}).then((function(t){if(!t.ok)throw new Error("Status synchronization has failed.");return t.json()})).then((function(t){return t.data}))}},{key:"loadJobs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=v(p.getJobs,t);return this.request.get(n)}},{key:"applyTranslation",value:function(t){var n=t.map((function(t){return{id:t.id,type:t.type}}));return this.request.post(p.applyTranslations,n)}},{key:"cancelJobs",value:function(t){var n=t.map((function(t){return{id:t.id,type:t.type}}));return this.request.post(p.cancelJobs,n)}},{key:"syncBatch",value:(r=o()(s.a.mark((function t(n){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={batchId:n},t.abrupt("return",this.request.post(p.syncBatchAction,e));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"checkBatchSync",value:(e=o()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request.get(p.checkSyncBatchAction));case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"applyTranslationToElement",value:function(t,n){return this.request.post(p.applyTranslations,{original_element_id:t,element_type:n})}},{key:"assignTranslator",value:function(t,n){var e={jobId:"string"===t.type?t.id:t.extra_data.icl_translate_job_id,type:t.type,translatorId:n};return this.request.post(p.assignTranslator,e)}},{key:"downloadXLIFF",value:(n=o()(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request.download(p.downloadTranslation(n)));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})}]),t}())},104:function(t,n,e){"use strict";e.d(n,"a",(function(){return i}));var r=e(14),s=e.n(r),a=e(16),o=e.n(a),c=e(43),i=function(){function t(){s()(this,t)}return o()(t,null,[{key:"dispatchCancelledJobsEvent",value:function(t){Object(c.a)("tp-jobs-cancelled",{cancelledJobs:t})}},{key:"dispatchDownloadedJobsEvent",value:function(t){Object(c.a)("tp-jobs-downloaded",{downloadedJobs:t})}},{key:"dispatchDownloadingJobsDoneEvent",value:function(){Object(c.a)("tp-jobs-downloading-done")}}]),t}()},11:function(t,n,e){"use strict";e.d(n,"b",(function(){return p})),e.d(n,"a",(function(){return h})),e.d(n,"r",(function(){return d})),e.d(n,"q",(function(){return b})),e.d(n,"h",(function(){return j})),e.d(n,"d",(function(){return v})),e.d(n,"n",(function(){return y})),e.d(n,"c",(function(){return m})),e.d(n,"f",(function(){return O})),e.d(n,"e",(function(){return k})),e.d(n,"l",(function(){return w})),e.d(n,"k",(function(){return g})),e.d(n,"o",(function(){return T})),e.d(n,"m",(function(){return E})),e.d(n,"j",(function(){return P})),e.d(n,"i",(function(){return _})),e.d(n,"p",(function(){return S})),e.d(n,"g",(function(){return D}));var r=e(47),s=e(461),a=e(462),o=e(40),c=e(122),i=e(51),u=e(152),l=e(360),f=e(182),p={CANCELLED:0,WAITING_FOR_TRANSLATOR:1,IN_PROGRESS:2,NEEDS_UPDATE:3,TRANSLATION_READY_TO_DOWNLOAD:4,COMPLETED:10,ATE_NEEDS_RETRY:40,NEEDS_REVIEW:30},h={IN_PROGRESS:2,TRANSLATED:6,DELIVERING:7,EDITED:15,CANCELLED:20,NO_CREDIT:31,HIDDEN:42},d=Object(r.a)("type","post"),b=Object(r.a)("type","package"),j=Object(s.a)([Object(r.a)("review_status","NEEDS_REVIEW"),Object(r.a)("review_status","EDITING")]),v=function(t){return!!y(t)&&(t.status===p.WAITING_FOR_TRANSLATOR||t.status===p.IN_PROGRESS)},y=function(t){return"local"===t.translation_service_id},m=function(t){return!y(t)&&(t.status===p.IN_PROGRESS||t.status===p.COMPLETED)&&t.batch.tp_id&&!t.isBatchSynced},O=function(t){return!y(t)&&(Object(o.a)("status",t)===p.TRANSLATION_READY_TO_DOWNLOAD||Object(o.a)("status",t)===p.COMPLETED)},k=function(t){return!y(t)&&Object(c.a)(Object(o.a)("status",t),[p.TRANSLATION_READY_TO_DOWNLOAD,p.COMPLETED])},w=Object(i.a)(Object(o.a)("status"),Object(c.a)(u.a,[p.WAITING_FOR_TRANSLATOR,p.IN_PROGRESS])),g=function(t){return n=t.automatic,Object(a.a)(String,n)?"0"!==n&&"false"!==n:!!n;var n},T=Object(l.a)(g),E=function(t,n){return t.id===n.id&&t.type===n.type},P=function(t,n){return void 0!==t.find((function(t){return t.status===n}))},_=function(t){return Object(f.a)(0,["extra_data","icl_translate_job_id"],t)},S=function(t){return!(!t.deadline||!w(t))&&new Date>new Date(t.deadline)},D=function(t,n){return t&&t.id===parseInt(n.translation_service_id)}},1298:function(t,n,e){"use strict";e.r(n);var r=e(2),s=e.n(r),a=e(6),o=e.n(a),c=e(14),i=e.n(c),u=e(16),l=e.n(u),f=e(43),p=e(441),h=e(168),d=e(100),b=e(67),j=e(169),v=e(167),y=e(11),m=e(104),O=e(191);(function(){function t(){i()(this,t)}return l()(t,null,[{key:"subscribeToWPMLEvents",value:function(){Object(f.b)("download-translation-proxy-jobs").then(o()(s.a.mark((function t(){var n,e,r,a,o,c,i,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new d.a(new b.a),e=new O.a(n),r=new h.a(n),a=new j.a(n,null),o=new v.a(n,1e4),c=new p.a(e,r,a,o,null),t.next=8,n.loadJobs({scope:"remote",status:y.b.TRANSLATION_READY_TO_DOWNLOAD+","+y.b.IN_PROGRESS});case 8:return i=t.sent,u=i.jobs,t.next=12,c.run(u);case 12:m.a.dispatchDownloadingJobsDoneEvent();case 13:case"end":return t.stop()}}),t)}))))}}]),t})().subscribeToWPMLEvents()},133:function(t,n,e){"use strict";e.d(n,"a",(function(){return i}));var r=e(14),s=e.n(r),a=e(16),o=e.n(a),c=e(11),i=function(){function t(n,e,r){s()(this,t),this.document=n,this.button=e,this.icons=r,this.progressClass="wpml-sync-and-download-translation-progress"}return o()(t,[{key:"startProcess",value:function(){this.button.classList.add(this.progressClass)}},{key:"handleResult",value:function(t){var n=this;return this.button.classList.remove(this.progressClass),Object(c.j)(t,c.b.IN_PROGRESS)||Object(c.j)(t,c.b.TRANSLATION_READY_TO_DOWNLOAD)||this.button.remove(),t.map((function(e){return n.updateIcon(e),t}))}},{key:"updateIcon",value:function(t){if(t.status===c.b.CANCELLED||t.status===c.b.COMPLETED){var n=t.status;n===c.b.CANCELLED&&t.hasCompletedTranslation&&(n=t.needsUpdate?c.b.NEEDS_UPDATE:c.b.COMPLETED);var e="#wpml-job-status-".concat(t.id," > i"),r=this.document.querySelector(e);if(r){if(this.alreadyHasCorrectIcon(r,t))return;var s=this.icons,a=s.progress,o=s.canceled,i=s.completed,u=s.needsUpdate;switch(n){case c.b.CANCELLED:r.classList.replace(a,o);break;case c.b.NEEDS_UPDATE:r.classList.replace(a,u);break;default:r.classList.replace(a,i)}r.classList.add("wpml-blink"),setTimeout((function(){r.classList.remove("wpml-blink")}),2e3)}}}},{key:"alreadyHasCorrectIcon",value:function(t,n){return t.classList.contains(this.icons.completed)&&n.status===c.b.COMPLETED||t.classList.contains(this.icons.canceled)&&n.status===c.b.CANCELLED}}]),t}()},167:function(t,n,e){"use strict";e.d(n,"a",(function(){return p}));var r=e(2),s=e.n(r),a=e(6),o=e.n(a),c=e(14),i=e.n(c),u=e(16),l=e.n(u),f=e(93),p=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;i()(this,t),this.jobAPI=n,this.interval=e,this.MAX_ATTEMPTS=5}var n,e,r;return l()(t,[{key:"run",value:(r=o()(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.jobAPI.syncBatch(n);case 2:return t.abrupt("return",this.checkProgress());case 3:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"checkProgress",value:(e=o()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.attempts=0;case 1:return t.next=3,this.runCheck();case 3:if(t.sent){t.next=7;break}t.next=1;break;case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"runCheck",value:(n=o()(s.a.mark((function t(){var n=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(f.a)(o()(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.jobAPI.checkBatchSync();case 2:return e=t.sent,t.abrupt("return",0===e.length||++n.attempts>=n.MAX_ATTEMPTS);case 4:case"end":return t.stop()}}),t)}))),this.interval));case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),t}()},168:function(t,n,e){"use strict";e.d(n,"a",(function(){return v}));var r=e(2),s=e.n(r),a=e(6),o=e.n(a),c=e(14),i=e.n(c),u=e(16),l=e.n(u),f=e(15),p=e.n(f),h=e(11);function d(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function b(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?d(Object(e),!0).forEach((function(n){p()(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):d(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}var j=function(t,n,e){var r=function(t){return n.find((function(n){return t.id===n.id&&t.type===n.type&&n.status===e}))},s=t.filter((function(t){return t.status===e||void 0!==r(t)})).map((function(t){var n=r(t);return void 0!==n&&(t.hasCompletedTranslation=n.hasCompletedTranslation,t.needsUpdate=n.needsUpdate),t})).map((function(t){return b(b({},t),{},{status:e})})),a=n.filter((function(n){return n.status===e&&void 0===t.find((function(t){return Object(h.m)(t,n)}))}));return s.concat(a)},v=function(){function t(n){i()(this,t),this.jobAPI=n}var n;return l()(t,[{key:"sync",value:(n=o()(s.a.mark((function t(n){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.jobAPI.synchronizeStatusesWithTP(!0);case 2:return e=t.sent,t.abrupt("return",{ready:j(n,e,h.b.TRANSLATION_READY_TO_DOWNLOAD),cancelled:j(n,e,h.b.CANCELLED)});case 4:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})}]),t}()},169:function(t,n,e){"use strict";e.d(n,"a",(function(){return O}));var r=e(15),s=e.n(r),a=e(2),o=e.n(a),c=e(25),i=e.n(c),u=e(6),l=e.n(u),f=e(14),p=e.n(f),h=e(16),d=e.n(h),b=e(11),j=e(104);function v(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function y(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?v(Object(e),!0).forEach((function(n){s()(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):v(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}var m=function(){function t(n,e){p()(this,t),this.LIMIT_PER_CHUNK=5,this.REQUEST_NUM_LIMIT=5,this.jobAPI=n,this.hooks=e}var n,e;return d()(t,[{key:"download",value:(e=l()(o.a.mark((function t(n){var e,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(this.allJobsCount=n.length,this.alreadyProcessedJobs=0,this.jobsToProcess=i()(n),e=[];this.jobsToProcess.length&&e.length<this.REQUEST_NUM_LIMIT;)r=this.getNextJobsSet(),e.push(this.downloadSubset(r));return t.next=7,Promise.all(e);case 7:return j.a.dispatchDownloadedJobsEvent(n),t.abrupt("return",!0);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"downloadSubset",value:(n=l()(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.jobAPI.applyTranslation(n);case 2:if(n=n.map((function(t){return y(y({},t),{},{status:b.b.COMPLETED})})),this.alreadyProcessedJobs+=n.length,this.hooks&&this.hooks.doAction("wpml-tm-job-translations-processed",n),!(this.jobsToProcess.length>0)){t.next=7;break}return t.abrupt("return",this.downloadSubset(this.getNextJobsSet()));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getNextJobsSet",value:function(){var t=this.jobsToProcess.slice(0,this.LIMIT_PER_CHUNK);return this.jobsToProcess.splice(0,this.LIMIT_PER_CHUNK),t}}]),t}(),O=function(){function t(n,e){p()(this,t),this.jobAPI=n,this.hooks=e}var n;return d()(t,[{key:"download",value:(n=l()(o.a.mark((function t(n){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new m(this.jobAPI,this.hooks),t.abrupt("return",e.download(n));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})}]),t}()},187:function(t,n,e){"use strict";var r=e(14),s=e.n(r),a=e(16),o=e.n(a),c=e(36),i=e.n(c),u=e(42),l=e.n(u),f=e(35),p=e.n(f),h=e(0),d=e.n(h),b=e(18),j=e.n(b),v=e(46),y=e(68),m=e(82),O=e(91),k=e(92);function w(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=p()(t);if(n){var s=p()(this).constructor;e=Reflect.construct(r,arguments,s)}else e=r.apply(this,arguments);return l()(this,e)}}var g=function(t){i()(e,t);var n=w(e);function e(){return s()(this,e),n.apply(this,arguments)}return o()(e,[{key:"render",value:function(){var t=this.props,n=t.jobs,r=t.strings,s=t.lastPickupDate,a=t.process,o=1===n.length?Object(v.sprintf)(r.numberOfTranslationStringsSingle,1):Object(v.sprintf)(r.numberOfTranslationStringsMulti,n.length),c=1===n.length?Object(v.sprintf)(r.stringsSentToTranslationSingle,"<strong>".concat(o,"</strong>")):Object(v.sprintf)(r.stringsSentToTranslationMulti,"<strong>".concat(o,"</strong>"));return d.a.createElement("div",{className:"wpml-tm-polling otgs-notice message"},d.a.createElement("p",null,d.a.createElement("span",{id:"wpml-tm-polling-jobs-number",dangerouslySetInnerHTML:{__html:c}}),d.a.createElement("input",{type:"button",className:"button button-secondary",value:r.buttonText,onClick:function(){return a.run()},disabled:e.shouldDisableTheButton(s)}),d.a.createElement("span",{id:"wpml-tmp-polling-last-pickup",className:"wpml-tm-polling-last-pickup"},Object(v.sprintf)(r.lastCheck,s?s.local().format("YYYY-MM-DD HH:mm"):r.never))))}}],[{key:"shouldDisableTheButton",value:function(t){return!(WPML_TM_DASHBOARD.debug||!t)&&t.isAfter(j()().utc().subtract(5,"minutes"))}}]),e}(d.a.Component);n.a=Object(y.a)(g,O.a,m.a,k.a)},191:function(t,n,e){"use strict";e.d(n,"a",(function(){return d}));var r=e(2),s=e.n(r),a=e(6),o=e.n(a),c=e(14),i=e.n(c),u=e(16),l=e.n(u),f=e(11),p=e(18),h=e.n(p),d=function(){function t(n){i()(this,t),this.jobAPI=n}var n;return l()(t,[{key:"load",value:(n=o()(s.a.mark((function t(){var n,e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={scope:"remote",status:f.b.TRANSLATION_READY_TO_DOWNLOAD+","+f.b.IN_PROGRESS},t.prev=1,t.next=4,this.jobAPI.loadJobs(n);case 4:return e=t.sent,t.abrupt("return",{jobs:e.jobs,last_picked_up_date:e.last_picked_up_date?h.a.unix(e.last_picked_up_date):null});case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",{jobs:[],last_picked_up_date:null});case 11:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(){return n.apply(this,arguments)})}]),t}()},441:function(t,n,e){"use strict";e.d(n,"a",(function(){return k})),e.d(n,"b",(function(){return w}));var r=e(25),s=e.n(r),a=e(2),o=e.n(a),c=e(6),i=e.n(c),u=e(14),l=e.n(u),f=e(16),p=e.n(f),h=e(168),d=e(169),b=e(167),j=e(11),v=e(67),y=e(100),m=e(104),O=e(191),k=function(){function t(n,e,r,s,a){l()(this,t),this.jobsLoader=n,this.syncJobs=e,this.downloadTranslations=r,this.batchSync=s,this.hooks=a}var n,e,r;return p()(t,[{key:"mapSyncedJobsToWpmlJobs",value:(r=i()(o.a.mark((function t(n,e){var r,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.some((function(t){return void 0!==n.find((function(n){return n.id===t.id}))}))){t.next=7;break}return t.next=4,this.jobsLoader.load();case 4:r=t.sent,s=r.jobs,n=s;case 7:return t.abrupt("return",e.map((function(t){return n.find((function(n){return n.id===t.id}))})));case 8:case"end":return t.stop()}}),t,this)}))),function(t,n){return r.apply(this,arguments)})},{key:"run",value:(e=i()(o.a.mark((function t(n){var e,r,s,a,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.syncJobs.sync(n);case 2:if(e=t.sent,r=e.ready,s=e.cancelled,!this.hooks){t.next=9;break}this.hooks.doAction("wpml-tm-job-translations-processed",s),t.next=14;break;case 9:return t.t0=m.a,t.next=12,this.mapSyncedJobsToWpmlJobs(n,s);case 12:t.t1=t.sent,t.t0.dispatchCancelledJobsEvent.call(t.t0,t.t1);case 14:if(t.t2=this.downloadTranslations,!this.hooks){t.next=19;break}t.t3=r,t.next=22;break;case 19:return t.next=21,this.mapSyncedJobsToWpmlJobs(n,r);case 21:t.t3=t.sent;case 22:return t.t4=t.t3,t.t5=t.t2.download.call(t.t2,t.t4),a=[t.t5],n.length>r.length+s.length&&(c=n.filter((function(t){return void 0===r.find((function(n){return Object(j.m)(t,n)}))})),a.push(this.syncBatch(c))),t.next=28,Promise.all(a);case 28:return t.abrupt("return",!0);case 29:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"syncBatch",value:(n=i()(o.a.mark((function t(n){var e,r,a,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=s()(new Set(n.map((function(t){return t.batch?t.batch.tp_id:0})).filter((function(t){return!!t}))))){t.next=3;break}return t.abrupt("return",!0);case 3:return t.next=5,this.batchSync.run(e);case 5:return t.next=7,this.syncJobs.sync([]);case 7:if(r=t.sent,a=r.ready,c=r.cancelled,!this.hooks){t.next=14;break}this.hooks.doAction("wpml-tm-job-translations-processed",c),t.next=19;break;case 14:return t.t0=m.a,t.next=17,this.mapSyncedJobsToWpmlJobs(n,c);case 17:t.t1=t.sent,t.t0.dispatchCancelledJobsEvent.call(t.t0,t.t1);case 19:if(t.t2=this.downloadTranslations,!this.hooks){t.next=24;break}t.t3=a,t.next=27;break;case 24:return t.next=26,this.mapSyncedJobsToWpmlJobs(n,a);case 26:t.t3=t.sent;case 27:return t.t4=t.t3,t.abrupt("return",t.t2.download.call(t.t2,t.t4));case 29:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})}]),t}(),w=function(t){var n=new v.a,e=new y.a(n);return new k(new O.a(e),new h.a(e),new d.a(e,t),new b.a(e,1e4),t)}},490:function(t,n,e){var r={"./af":209,"./af.js":209,"./ar":210,"./ar-dz":211,"./ar-dz.js":211,"./ar-kw":212,"./ar-kw.js":212,"./ar-ly":213,"./ar-ly.js":213,"./ar-ma":214,"./ar-ma.js":214,"./ar-sa":215,"./ar-sa.js":215,"./ar-tn":216,"./ar-tn.js":216,"./ar.js":210,"./az":217,"./az.js":217,"./be":218,"./be.js":218,"./bg":219,"./bg.js":219,"./bm":220,"./bm.js":220,"./bn":221,"./bn-bd":222,"./bn-bd.js":222,"./bn.js":221,"./bo":223,"./bo.js":223,"./br":224,"./br.js":224,"./bs":225,"./bs.js":225,"./ca":226,"./ca.js":226,"./cs":227,"./cs.js":227,"./cv":228,"./cv.js":228,"./cy":229,"./cy.js":229,"./da":230,"./da.js":230,"./de":231,"./de-at":232,"./de-at.js":232,"./de-ch":233,"./de-ch.js":233,"./de.js":231,"./dv":234,"./dv.js":234,"./el":235,"./el.js":235,"./en-au":236,"./en-au.js":236,"./en-ca":237,"./en-ca.js":237,"./en-gb":238,"./en-gb.js":238,"./en-ie":239,"./en-ie.js":239,"./en-il":240,"./en-il.js":240,"./en-in":241,"./en-in.js":241,"./en-nz":242,"./en-nz.js":242,"./en-sg":243,"./en-sg.js":243,"./eo":244,"./eo.js":244,"./es":245,"./es-do":246,"./es-do.js":246,"./es-mx":247,"./es-mx.js":247,"./es-us":248,"./es-us.js":248,"./es.js":245,"./et":249,"./et.js":249,"./eu":250,"./eu.js":250,"./fa":251,"./fa.js":251,"./fi":252,"./fi.js":252,"./fil":253,"./fil.js":253,"./fo":254,"./fo.js":254,"./fr":255,"./fr-ca":256,"./fr-ca.js":256,"./fr-ch":257,"./fr-ch.js":257,"./fr.js":255,"./fy":258,"./fy.js":258,"./ga":259,"./ga.js":259,"./gd":260,"./gd.js":260,"./gl":261,"./gl.js":261,"./gom-deva":262,"./gom-deva.js":262,"./gom-latn":263,"./gom-latn.js":263,"./gu":264,"./gu.js":264,"./he":265,"./he.js":265,"./hi":266,"./hi.js":266,"./hr":267,"./hr.js":267,"./hu":268,"./hu.js":268,"./hy-am":269,"./hy-am.js":269,"./id":270,"./id.js":270,"./is":271,"./is.js":271,"./it":272,"./it-ch":273,"./it-ch.js":273,"./it.js":272,"./ja":274,"./ja.js":274,"./jv":275,"./jv.js":275,"./ka":276,"./ka.js":276,"./kk":277,"./kk.js":277,"./km":278,"./km.js":278,"./kn":279,"./kn.js":279,"./ko":280,"./ko.js":280,"./ku":281,"./ku.js":281,"./ky":282,"./ky.js":282,"./lb":283,"./lb.js":283,"./lo":284,"./lo.js":284,"./lt":285,"./lt.js":285,"./lv":286,"./lv.js":286,"./me":287,"./me.js":287,"./mi":288,"./mi.js":288,"./mk":289,"./mk.js":289,"./ml":290,"./ml.js":290,"./mn":291,"./mn.js":291,"./mr":292,"./mr.js":292,"./ms":293,"./ms-my":294,"./ms-my.js":294,"./ms.js":293,"./mt":295,"./mt.js":295,"./my":296,"./my.js":296,"./nb":297,"./nb.js":297,"./ne":298,"./ne.js":298,"./nl":299,"./nl-be":300,"./nl-be.js":300,"./nl.js":299,"./nn":301,"./nn.js":301,"./oc-lnc":302,"./oc-lnc.js":302,"./pa-in":303,"./pa-in.js":303,"./pl":304,"./pl.js":304,"./pt":305,"./pt-br":306,"./pt-br.js":306,"./pt.js":305,"./ro":307,"./ro.js":307,"./ru":308,"./ru.js":308,"./sd":309,"./sd.js":309,"./se":310,"./se.js":310,"./si":311,"./si.js":311,"./sk":312,"./sk.js":312,"./sl":313,"./sl.js":313,"./sq":314,"./sq.js":314,"./sr":315,"./sr-cyrl":316,"./sr-cyrl.js":316,"./sr.js":315,"./ss":317,"./ss.js":317,"./sv":318,"./sv.js":318,"./sw":319,"./sw.js":319,"./ta":320,"./ta.js":320,"./te":321,"./te.js":321,"./tet":322,"./tet.js":322,"./tg":323,"./tg.js":323,"./th":324,"./th.js":324,"./tk":325,"./tk.js":325,"./tl-ph":326,"./tl-ph.js":326,"./tlh":327,"./tlh.js":327,"./tr":328,"./tr.js":328,"./tzl":329,"./tzl.js":329,"./tzm":330,"./tzm-latn":331,"./tzm-latn.js":331,"./tzm.js":330,"./ug-cn":332,"./ug-cn.js":332,"./uk":333,"./uk.js":333,"./ur":334,"./ur.js":334,"./uz":335,"./uz-latn":336,"./uz-latn.js":336,"./uz.js":335,"./vi":337,"./vi.js":337,"./x-pseudo":338,"./x-pseudo.js":338,"./yo":339,"./yo.js":339,"./zh-cn":340,"./zh-cn.js":340,"./zh-hk":341,"./zh-hk.js":341,"./zh-mo":342,"./zh-mo.js":342,"./zh-tw":343,"./zh-tw.js":343};function s(t){var n=a(t);return e(n)}function a(t){if(!e.o(r,t)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return r[t]}s.keys=function(){return Object.keys(r)},s.resolve=a,t.exports=s,s.id=490},67:function(t,n,e){"use strict";var r=e(2),s=e.n(r),a=e(6),o=e.n(a),c=e(14),i=e.n(c),u=e(16),l=e.n(u),f=e(36),p=e.n(f),h=e(42),d=e.n(h),b=e(35),j=e.n(b),v=e(71),y=e(69);function m(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=j()(t);if(n){var s=j()(this).constructor;e=Reflect.construct(r,arguments,s)}else e=r.apply(this,arguments);return d()(this,e)}}Object(y.a)();var O=function(t){p()(r,t);var n,e=m(r);function r(){return i()(this,r),e.apply(this,arguments)}return l()(r,[{key:"get",value:function(t){return this.request(t,"GET")}},{key:"post",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.request(t,"POST",n)}},{key:"download",value:(n=o()(s.a.mark((function t(n){var e=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(n,this.generateArgs("GET")).then((function(t){return t.ok?t.blob():e.buildError(t)})));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"request",value:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.generateArgs(n,e);return this.restUrl.includes("?")&&(t=t.replace("?","&")),this.handleRequest(this.restUrl+t,r)}},{key:"handleRequest",value:function(t,n){var e=this;return fetch(t,n).then((function(t){return t.ok?t.json():e.buildError(t)}))}},{key:"generateArgs",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e={method:t.toUpperCase(),headers:{Accept:"application/json","Content-Type":"application/json","X-WP-Nonce":this.restNonce},credentials:"same-origin"};return"GET"!==e.method&&n&&(e.body="string"==typeof n?n:JSON.stringify(n)),e}},{key:"buildError",value:function(t){return t.json().then((function(n){var e=new Error(n.message||t.statusText);return Promise.reject(Object.assign(e,{response:t}))}))}}]),r}(v.a);n.a=O},68:function(t,n,e){"use strict";var r=e(31),s=e.n(r),a=e(0),o=e.n(a);n.a=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return e.reduce((function(t,n){return function(e){return o.a.createElement(n,null,(function(n){return o.a.createElement(t,s()({},e,n))}))}}),(function(n){return o.a.createElement(t,n)}))}},71:function(t,n,e){"use strict";var r=e(14),s=e.n(r),a=function t(n){s()(this,t),this.ID=n.ID,this.caps=n.caps,this.roles=n.roles,this.user_email=n.data,this.user_login=n.data.user_email,this.user_nicename=n.data.user_login};n.a=function t(){s()(this,t),this.restUrl=WPML_TM_SETTINGS.restUrl,this.restNonce=WPML_TM_SETTINGS.restNonce,this.ateSettings=WPML_TM_SETTINGS.ate,this.currentUser=new a(WPML_TM_SETTINGS.currentUser)}},82:function(t,n,e){"use strict";e.d(n,"b",(function(){return _})),e.d(n,"a",(function(){return S}));var r=e(15),s=e.n(r),a=e(2),o=e.n(a),c=e(6),i=e.n(c),u=e(14),l=e.n(u),f=e(16),p=e.n(f),h=e(36),d=e.n(h),b=e(42),j=e.n(b),v=e(35),y=e.n(v),m=e(0),O=e.n(m),k=e(18),w=e.n(k);function g(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function T(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?g(Object(e),!0).forEach((function(n){s()(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):g(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function E(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=y()(t);if(n){var s=y()(this).constructor;e=Reflect.construct(r,arguments,s)}else e=r.apply(this,arguments);return j()(this,e)}}var P=O.a.createContext({}),_=function(t){d()(r,t);var n,e=E(r);function r(t){var n;return l()(this,r),(n=e.call(this,t)).jobsAPI=t.jobsAPI,n.jobsLoader=t.jobsLoader,n.loadJobsOnMount=!0===n.props.loadOnMount||void 0===n.props.loadOnMount,n.state={jobs:[],lastPickupDate:null},n}return p()(r,[{key:"componentDidMount",value:function(){this.loadJobsOnMount&&this.loadJobs()}},{key:"loadJobs",value:(n=i()(o.a.mark((function t(){var n=this;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.jobsLoader.load().then((function(t){return n.setState({jobs:t.jobs,lastPickupDate:t.last_picked_up_date})}));case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"render",value:function(){var t=this,n=this.props.children;return O.a.createElement(P.Provider,{value:T(T({},this.state),{},{setJobs:function(n){return t.setState({jobs:n})},refreshLastPickupDate:function(){return t.setState({lastPickupDate:w()()})}})},n)}}]),r}(m.Component),S=P.Consumer},91:function(t,n,e){"use strict";e.d(n,"b",(function(){return v})),e.d(n,"a",(function(){return y}));var r=e(14),s=e.n(r),a=e(16),o=e.n(a),c=e(36),i=e.n(c),u=e(42),l=e.n(u),f=e(35),p=e.n(f),h=e(0),d=e.n(h);function b(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=p()(t);if(n){var s=p()(this).constructor;e=Reflect.construct(r,arguments,s)}else e=r.apply(this,arguments);return l()(this,e)}}var j=d.a.createContext({}),v=function(t){i()(e,t);var n=b(e);function e(t){return s()(this,e),n.call(this,t)}return o()(e,[{key:"render",value:function(){var t=this.props.children;return d.a.createElement(j.Provider,{value:{strings:WPML_TM_DASHBOARD.strings}},t)}}]),e}(h.Component),y=j.Consumer},92:function(t,n,e){"use strict";e.d(n,"a",(function(){return R}));var r=e(2),s=e.n(r),a=e(15),o=e.n(a),c=e(6),i=e.n(c),u=e(14),l=e.n(u),f=e(16),p=e.n(f),h=e(36),d=e.n(h),b=e(42),j=e.n(b),v=e(35),y=e.n(v),m=e(0),O=e.n(m),k=e(68),w=e(82),g=e(69),T=e(133),E=e(11);function P(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function _(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?P(Object(e),!0).forEach((function(n){o()(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):P(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function S(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=y()(t);if(n){var s=y()(this).constructor;e=Reflect.construct(r,arguments,s)}else e=r.apply(this,arguments);return j()(this,e)}}var D=O.a.createContext({}),A=function(t){d()(r,t);var n,e=S(r);function r(t){var n;return l()(this,r),(n=e.call(this,t)).initialState={inProgress:!1,finished:!1,error:!1,confirmationHidden:!1,processedJobs:[]},n.state=n.initialState,n}return p()(r,[{key:"run",value:(n=i()(s.a.mark((function t(){var n,e,r=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState(_(_({},this.initialState),{},{inProgress:!0})),n=this.defineHooks(),t.prev=2,t.next=5,this.props.createProcess(n).run(this.props.jobs);case 5:this.setState({inProgress:!1,finished:!0}),this.updateJobsIconOnTheList(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),this.setState({inProgress:!1,finished:!1,error:t.t0});case 12:e=this.props.jobs.filter((function(t){return void 0===r.state.processedJobs.find((function(n){return Object(E.m)(t,n)}))})),this.props.setJobs(e),this.props.refreshLastPickupDate();case 15:case"end":return t.stop()}}),t,this,[[2,9]])}))),function(){return n.apply(this,arguments)})},{key:"defineHooks",value:function(){var t=this,n=Object(g.a)();return n.addAction("wpml-tm-job-translations-processed","CheckAndDownloadTranslations",(function(n){return t.setState((function(t){return{processedJobs:t.processedJobs.concat(n)}}))})),n}},{key:"updateJobsIconOnTheList",value:function(){var t=new T.a(document,null,WPML_TM_DASHBOARD.statusIcons);this.state.processedJobs.map((function(n){t.updateIcon(n)}))}},{key:"render",value:function(){var t=this,n=this.props.children;return O.a.createElement(D.Provider,{value:{process:_(_({},this.state),{},{run:function(){return t.run()},hideConfirmation:function(){return t.setState({confirmationHidden:!0})}})}},n)}}]),r}(m.Component),R=D.Consumer;n.b=Object(k.a)(A,w.a)}});