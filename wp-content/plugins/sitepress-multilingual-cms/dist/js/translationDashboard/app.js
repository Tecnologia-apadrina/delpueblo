!function(e){function t(t){for(var r,o,i=t[0],c=t[1],u=t[2],p=0,d=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(l&&l(t);d.length;)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={15:0},s=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackWPML=window.webpackWPML||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;s.push([1275,0]),n()}({100:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(2),a=n.n(r),s=n(6),o=n.n(s),i=n(14),c=n.n(i),u=n(16),l=n.n(u),p="/wpml/tm/v1",d={getJobs:"".concat(p,"/jobs/"),applyTranslations:"".concat(p,"/tp/apply-translations/"),syncJobsAction:"wpml-tp-sync-job-states",syncBatchAction:"".concat(p,"/tp/batches/sync"),checkSyncBatchAction:"".concat(p,"/tp/batches/status/"),cancelJobs:"".concat(p,"/jobs/cancel/"),downloadTranslation:function(e){var t=e.id,n=e.type;return"".concat(WPML_TM_SETTINGS.restUrl).concat(p,"/tp/xliff/download/").concat(t,"/").concat(n)},assignTranslator:"".concat(p,"/jobs/assign"),cancelTranslationReviews:"".concat(p,"/jobs/translation-reviews/cancel")},f=n(61),b=n.n(f),h=n(9),g=n.n(h);var m=function(e,t){var n=new URL(e,"http://testsite.local");return function(e,t){Object.entries(e).map((function(e){var n=g()(e,2),r=n[0],a=n[1];if(!Array.isArray(a))return"object"===b()(a)?Object.entries(a).map((function(e){var n=g()(e,2),a=n[0],s=n[1];return t.set("".concat(r,"[").concat(a,"]"),s)})):t.set(r,a);a.map((function(e){return t.append("".concat(r,"[]"),e)}))}))}(t,n.searchParams),n.href.replace("http://testsite.local","")},v=(n(187),function(){function e(t){c()(this,e),this.request=t}var t,n,r;return l()(e,[{key:"synchronizeStatusesWithTP",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new FormData;return t.append("action",d.syncJobsAction),t.append("nonce",WPML_TM_SETTINGS.syncJobStatesNonce),e&&t.append("update_last_picked_up",1),fetch(ajaxurl,{method:"POST",body:t}).then((function(e){if(!e.ok)throw new Error("Status synchronization has failed.");return e.json()})).then((function(e){return e.data}))}},{key:"loadJobs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=m(d.getJobs,e);return this.request.get(t)}},{key:"applyTranslation",value:function(e){var t=e.map((function(e){return{id:e.id,type:e.type}}));return this.request.post(d.applyTranslations,t)}},{key:"cancelJobs",value:function(e){var t=e.map((function(e){return{id:e.id,type:e.type}}));return this.request.post(d.cancelJobs,t)}},{key:"syncBatch",value:(r=o()(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={batchId:t},e.abrupt("return",this.request.post(d.syncBatchAction,n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"checkBatchSync",value:(n=o()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request.get(d.checkSyncBatchAction));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"applyTranslationToElement",value:function(e,t){return this.request.post(d.applyTranslations,{original_element_id:e,element_type:t})}},{key:"assignTranslator",value:function(e,t){var n={jobId:"string"===e.type?e.id:e.extra_data.icl_translate_job_id,type:e.type,translatorId:t};return this.request.post(d.assignTranslator,n)}},{key:"downloadXLIFF",value:(t=o()(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request.download(d.downloadTranslation(t)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}())},104:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(14),a=n.n(r),s=n(16),o=n.n(s),i=n(43),c=function(){function e(){a()(this,e)}return o()(e,null,[{key:"dispatchCancelledJobsEvent",value:function(e){Object(i.a)("tp-jobs-cancelled",{cancelledJobs:e})}},{key:"dispatchDownloadedJobsEvent",value:function(e){Object(i.a)("tp-jobs-downloaded",{downloadedJobs:e})}},{key:"dispatchDownloadingJobsDoneEvent",value:function(){Object(i.a)("tp-jobs-downloading-done")}}]),e}()},11:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"r",(function(){return b})),n.d(t,"q",(function(){return h})),n.d(t,"h",(function(){return g})),n.d(t,"d",(function(){return m})),n.d(t,"n",(function(){return v})),n.d(t,"c",(function(){return y})),n.d(t,"f",(function(){return j})),n.d(t,"e",(function(){return O})),n.d(t,"l",(function(){return w})),n.d(t,"k",(function(){return T})),n.d(t,"o",(function(){return k})),n.d(t,"m",(function(){return E})),n.d(t,"j",(function(){return S})),n.d(t,"i",(function(){return _})),n.d(t,"p",(function(){return A})),n.d(t,"g",(function(){return P}));var r=n(47),a=n(461),s=n(462),o=n(40),i=n(122),c=n(51),u=n(152),l=n(360),p=n(182),d={CANCELLED:0,WAITING_FOR_TRANSLATOR:1,IN_PROGRESS:2,NEEDS_UPDATE:3,TRANSLATION_READY_TO_DOWNLOAD:4,COMPLETED:10,ATE_NEEDS_RETRY:40,NEEDS_REVIEW:30},f={IN_PROGRESS:2,TRANSLATED:6,DELIVERING:7,EDITED:15,CANCELLED:20,NO_CREDIT:31,HIDDEN:42},b=Object(r.a)("type","post"),h=Object(r.a)("type","package"),g=Object(a.a)([Object(r.a)("review_status","NEEDS_REVIEW"),Object(r.a)("review_status","EDITING")]),m=function(e){return!!v(e)&&(e.status===d.WAITING_FOR_TRANSLATOR||e.status===d.IN_PROGRESS)},v=function(e){return"local"===e.translation_service_id},y=function(e){return!v(e)&&(e.status===d.IN_PROGRESS||e.status===d.COMPLETED)&&e.batch.tp_id&&!e.isBatchSynced},j=function(e){return!v(e)&&(Object(o.a)("status",e)===d.TRANSLATION_READY_TO_DOWNLOAD||Object(o.a)("status",e)===d.COMPLETED)},O=function(e){return!v(e)&&Object(i.a)(Object(o.a)("status",e),[d.TRANSLATION_READY_TO_DOWNLOAD,d.COMPLETED])},w=Object(c.a)(Object(o.a)("status"),Object(i.a)(u.a,[d.WAITING_FOR_TRANSLATOR,d.IN_PROGRESS])),T=function(e){return t=e.automatic,Object(s.a)(String,t)?"0"!==t&&"false"!==t:!!t;var t},k=Object(l.a)(T),E=function(e,t){return e.id===t.id&&e.type===t.type},S=function(e,t){return void 0!==e.find((function(e){return e.status===t}))},_=function(e){return Object(p.a)(0,["extra_data","icl_translate_job_id"],e)},A=function(e){return!(!e.deadline||!w(e))&&new Date>new Date(e.deadline)},P=function(e,t){return e&&e.id===parseInt(t.translation_service_id)}},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var r=n(403),a=n.n(r),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"wpml",n="rtl"===document.getElementsByTagName("html")[0].dir,r={arrow:!0,theme:t,animation:"fade",sticky:!0,interactive:!0,dynamicTitle:!0,placement:n?"top-end":"top-start"};a()(e,r)};t.a=s;var o=function(e,t){var n=e._tippy;n&&n.destroy(),e.setAttribute("title",t),s(e,"otgs")}},1275:function(e,t,n){"use strict";n.r(t);var r=n(25),a=n.n(r),s=n(0),o=n.n(s),i=n(37),c=n.n(i),u=n(2),l=n.n(u),p=n(6),d=n.n(p),f=n(14),b=n.n(f),h=n(16),g=n.n(h),m=function(){function e(t,n,r,a){var s=this;b()(this,e),this.button=t,this.document=n,this.syncAndDownloadFactory=r,this.uiChangesFactory=a,this.state=null,t.addEventListener("click",(function(e){return s.run(e)}))}var t;return g()(e,[{key:"run",value:(t=d()(l.a.mark((function e(t){var n,r,a,s,o,i,c,u=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=this.getState(),r=n.elementId,a=n.elementType,s=n.jobs,o=n.icons,i=this.syncAndDownloadFactory(),(c=this.uiChangesFactory(this.document,this.button,o)).startProcess(),e.abrupt("return",i.run(r,a,s).then((function(e){return u.state.jobs=e,c.handleResult(e)})));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getState",value:function(){return this.state||(this.state={elementId:parseInt(this.button.dataset.elementId),elementType:this.button.dataset.elementType,jobs:JSON.parse(this.button.dataset.jobs),icons:JSON.parse(this.button.dataset.icons)}),this.state}}]),e}(),v=n(11),y=function(){function e(t){b()(this,e),this.jobsAPI=t}var t;return g()(e,[{key:"run",value:(t=d()(l.a.mark((function e(t,n,r){var a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(v.j)(r,v.b.TRANSLATION_READY_TO_DOWNLOAD)&&!Object(v.j)(r,v.b.IN_PROGRESS)){e.next=2;break}return e.abrupt("return",this.jobsAPI.applyTranslationToElement(t,n).then((function(e){return a.updateJobs(e,r)})));case 2:return e.abrupt("return",r);case 3:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"updateJobs",value:function(e,t){var n=this;return t.map((function(t){return n.updateJob(e,t)}))}},{key:"updateJob",value:function(e,t){var n=this.findRelatedJob(t,e);return n&&(t.status=n.status),t}},{key:"findRelatedJob",value:function(e,t){return t.find((function(t){return t.id===e.id&&t.type===e.type}))}}]),e}(),j=n(100),O=n(67),w=n(133),T=(n(491),n(15)),k=n.n(T),E=n(3),S=n(1320),_=n(398),A=n(1345),P=n(349),D=n(51),I=n(203),C=n(81),x=n(74),L=n(47),R=n(1306),N=n(1),M=n(17),J=n(32),B=n(877),W=n(122),H=n(417),U=n(63),q=n(40),z=n(65),F=n(362),G=n(521),Y=n(152),K=n(410),V=function(e,t){return D.a(I.a(C.a(t)),x.a())(e)},Q=function(e,t){var n=V(e,ve.TRANSLATE.value);return D.a(_.a("translations"),F.a,I.a((function(e){var t=e.language;return W.a(t,n)})),_.a("status"),G.a)(t)},X=function(e,t){var n=V(e,ve.TRANSLATE.value);return D.a(I.a(D.a(q.a("code"),W.a(Y.a,n))),K.a(q.a("can_be_translated_automatically")))(t)},$=function(e){return!B.a(L.a("originalCreatedInPrimaryLang","0"),e)},Z=D.a(_.a("originalLangCode"),G.a()),ee=n(75),te=n(1311),ne=Object(N.a)("You need credits to use automatic translation.","sitepress"),re=Object(te.a)(Object(N.a)("Connection Error. Please wait a minute and reload this page. If the problem continues, please <a>contact WPML support</a>.","sitepress"),{a:o.a.createElement("a",{href:"https://wpml.org/documentation/content-translation/how-to-register-your-own-translation-service-in-wpml/?utm_source=plugin&utm_medium=gui&utm_campaign=wpmltm&utm_term=connecting-to-credits#custom-language-mapping",target:"_blank",rel:"noopener noreferrer"})}),ae=function(e){var t=e.selectedItems,n=e.languageSelections;return{shouldDisplay:function(){var e=V(n,ve.DUPLICATE.value);return!R.a(e)&&B.a((function(t){return B.a((function(t){return W.a(t.language,e)&&t.status>0}),t.translations)}),t)},message:function(){return o.a.createElement("p",null,Object(N.a)("Any existing content (translations) will be overwritten when creating duplicates.","sitepress"),o.a.createElement("br",null),Object(N.a)("When duplicating content, please first duplicate parent pages to maintain the site's hierarchy.","sitepress"))}}},se=function(e){var t=e.selectedItems,n=e.languageSelections,r=e.howToTranslate,a=e.settings,s=a.hasAnyLocalTranslators,i=a.hasAnyTranslationServices;return{shouldDisplay:function(){return!(R.a(t)||R.a(V(n,ve.TRANSLATE.value))||"automatic"===r||s||i)},message:function(){var e=Object(ee.b)(Object(N.a)('To assign content to a translator, first <a href="%s" target="_blank">add a translator</a> or <a href="%s" target="_blank">connect to a translation service</a>.',"sitepress"),"https://wpml.org/documentation/translating-your-contents/how-to-set-up-local-translators-and-language-pairs/?utm_source=plugin&utm_medium=gui&utm_campaign=wpmltm","https://wpml.org/documentation/translating-your-contents/professional-translation-via-wpml/?utm_source=plugin&utm_medium=gui&utm_campaign=wpmltm");return o.a.createElement("p",{dangerouslySetInnerHTML:{__html:e}})},type:"error"}},oe=function(e){var t=e.selectedItems,n=e.languageSelections,r=e.howToTranslate;return!R.a(t)&&!R.a(V(n,ve.TRANSLATE.value))&&r&&"automatic"!==r},ie=function(e){return'<a href="'.concat(e,'" target="_blank" rel="noreferrer" >').concat(Object(N.a)("Translators Tab","sitepress"),"</a>")},ce=function(e){var t=e.selectedItems,n=e.languageSelections,r=e.howToTranslate,a=e.settings,s=a.doesTranslationServiceRequireAuthentication,i=a.currentTranslationServiceName,c=e.urls.translatorsTab;return{shouldDisplay:function(){return oe({selectedItems:t,languageSelections:n,howToTranslate:r})&&s},message:function(){var e="<strong> "+Object(ee.b)(Object(N.a)("Finish setting up %s on your site","sitepress"),i)+"</strong><br /><br />";return e+="<p>"+Object(ee.b)(Object(N.a)("You need to authenticate %s to send them content for translation. Visit the %s to finish the setup.","sitepress"),i,ie(c))+"</p>",o.a.createElement("p",{dangerouslySetInnerHTML:{__html:e}})},type:"warning"}},ue=function(e){var t=e.selectedItems,n=e.languageSelections,r=e.howToTranslate,a=e.settings,s=a.doesTranslationServiceRequireAuthentication,i=a.doesServiceRequireTranslators,c=a.currentTranslationServiceName,u=e.urls.translatorsTab;return{shouldDisplay:function(){return oe({selectedItems:t,languageSelections:n,howToTranslate:r})&&!s&&i},message:function(){var e="<strong> "+Object(ee.b)(Object(N.a)("Add a translator to use %s.","sitepress"),c)+"</strong><br /><br />";return e+="<p>"+Object(ee.b)(Object(N.a)("To send content to %s for translation, go to the %s to add a translator on your site.","sitepress"),c,ie(u))+"</p>",o.a.createElement("p",{dangerouslySetInnerHTML:{__html:e}})},type:"warning"}},le=function(e){var t=e.selectedItems,n=e.languageSelections,r=e.howToTranslate,a=e.targetLanguages;return{shouldDisplay:function(){return!R.a(t)&&("automatic"===r&&!R.a(X(n,a)))},message:function(){return D.a(H.a(X,[n]),U.a(q.a("display_name")),(function(e){return Object(te.a)(Object(ee.b)(Object(N.a)("Your selected automatic translation engines do not support the following language(s): %s. Read more about <a>choosing a translation engine</a>.","sitepress"),e.join(", ")),{a:o.a.createElement("a",{href:"https://wpml.org/documentation/automatic-translation/how-to-change-automatic-translation-engines/?utm_source=plugin&utm_medium=gui&utm_campaign=wpmltm",target:"_blank",rel:"noopener noreferrer"})})}))(a)},type:"error"}},pe=function(e){var t=e.selectedItems,n=e.languageSelections;return{shouldDisplay:function(){return!R.a(t.filter((function(e){return e.translations.some((function(e){return parseInt(z.a(0,e.language,n))>0&&e.status===v.b.IN_PROGRESS}))})))},message:function(){return Object(N.a)("Some of the selected content is already being translated. This will cancel any in-progress translations.","sitepress")},type:"warning"}},de={warningMessages:Object(E.c)((function(e){return D.a(U.a((function(t){return t(e)})),I.a((function(e){return e.shouldDisplay()})))([ae,se,ce,ue,le,pe])}))},fe=function(e){var t=e.translationReviewMode,n=e.setTranslateEverythingEndpoint;return{translationReviewMode:t,showTranslationReviewModal:!1,setTranslationReviewMode:Object(J.a)("translationReviewMode"),setShowTranslationReviewModal:Object(J.a)("showTranslationReviewModal"),saveReviewMode:Object(E.e)(function(){var e=d()(l.a.mark((function e(t,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(M.a)(n,{reviewMode:r});case 3:return t.setTranslationReviewMode(r),t.setShowTranslationReviewModal(!1),e.abrupt("return",t.submit());case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}())}},be={selectedItems:[],addItem:Object(E.b)((function(e,t){e.selectedItems.push(t)})),setItems:Object(E.b)((function(e,t){e.selectedItems=t})),removeItem:Object(E.b)((function(e,t){e.selectedItems=K.a((function(e){return e.id===t.id&&e.type===t.type}),e.selectedItems)})),removeAllItems:Object(E.b)((function(e){e.selectedItems=[]}))},he=n(192);function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){k()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve={TRANSLATE:{value:"1",colSpan:"7",label:Object(N.a)("Translate","sitepress")},DUPLICATE:{value:"2",colSpan:"10",label:Object(N.a)("Duplicate content","sitepress")},DO_NOTHING:{value:"0",colSpan:"7",label:Object(N.a)("Do nothing","sitepress")}},ye=function(e,t){return S.a(_.a("code",e),A.a(t,e.length))},je=function(e){return e.isInDefaultLanguage&&e.isATEActive?e.hasAnyLocalTranslators||e.hasAnyTranslationServices?void 0:"automatic":e.shouldUseBasket?"basket":"myself"},Oe=function(e){var t=e.targetLanguages,n=e.endpoints,r=e.translationReviewMode,a=e.settings;return me(me(me(me({settings:a,urls:e.urls,targetLanguages:t},de),fe({translationReviewMode:r,setTranslateEverythingEndpoint:n.setTranslateEverything})),be),{},{languageSelections:ye(t,ve.TRANSLATE.value),setLanguageSelection:Object(E.b)((function(e,t){var n=t.languageCode,r=t.selection;e.languageSelections[n]=r})),setLanguageSelectionForAll:Object(E.b)((function(e,t){e.languageSelections=ye(e.targetLanguages,t)})),howToTranslate:je(a),setHowToTranslate:Object(J.a)("howToTranslate"),howToHandleExistingTranslations:"leave",setHowToHandleExistingTranslations:Object(J.a)("howToHandleExistingTranslations"),inProgress:!1,setInProgress:Object(J.a)("inProgress"),creditMessage:void 0,setCreditMessage:Object(J.a)("creditMessage"),duplicate:Object(E.e)(function(){var e=d()(l.a.mark((function e(t,r){var a,s,o,i,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.postIds,s=r.languages,o=5,e.prev=2,i=0;case 4:if(!(a.length>i)){e.next=11;break}return c=P.a(i,i+o,a),e.next=8,Object(M.a)(n.duplicate,{postIds:c,languages:s});case 8:i+=o,e.next=4;break;case 11:return e.next=13,Object(M.a)(n.displayNewMessage,{postIds:a});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t,n){return e.apply(this,arguments)}}()),sendToTranslate:Object(E.e)(function(){var e=d()(l.a.mark((function e(t,n,r){var a,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.getState,s=D.a(I.a(C.a(ve.DUPLICATE.value)),x.a())(a().languageSelections),o=D.a(I.a(L.a("type","post")),_.a("id"))(a().selectedItems),R.a(s)||R.a(o)){e.next=7;break}return t.setInProgress(!0),e.next=7,t.duplicate({postIds:o,languages:s});case 7:t.setInProgress(!0),document.getElementById("icl_tm_dashboard_form").submit();case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),submit:Object(E.e)(function(){var e=d()(l.a.mark((function e(t,n,r){var a,s,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.getState,s=a(),o=s.howToTranslate,i=s.translationReviewMode,"automatic"===o){e.next=5;break}return t.sendToTranslate(),e.abrupt("return");case 5:if(i){e.next=9;break}t.setShowTranslationReviewModal(!0),e.next=20;break;case 9:return e.prev=9,t.setInProgress(!0),e.next=13,Object(he.a)({onCloseWithCredits:function(){t.setCreditMessage(void 0),t.sendToTranslate()},onCloseWithoutCredits:function(){t.setCreditMessage({message:ne,type:"info"}),t.setHowToTranslate(void 0),t.setInProgress(!1)}});case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(9),t.setCreditMessage({message:re,type:"error"}),t.setHowToTranslate(void 0),t.setInProgress(!1);case 20:case"end":return e.stop()}}),e,null,[[9,15]])})));return function(t,n,r){return e.apply(this,arguments)}}())})},we=n(1327);var Te=n(869),ke=n(151),Ee=n(76),Se=n(873),_e=n(112),Ae=function(e){var t=e.languageSelections,n=e.setLanguageSelectionForAll,r=D.a(Se.a(),G.a(),(function(e){return 1===e.length?e[0]:null}))(t);return o.a.createElement(o.a.Fragment,null,o.a.createElement(ke.a,null,o.a.createElement(Ee.a,{span:6},o.a.createElement("strong",null,Object(N.a)("All Languages","sitepress"))),o.a.createElement(Ee.a,{span:18},o.a.createElement(_e.a.Group,{value:r,onChange:function(e){n(e.target.value)}},o.a.createElement(ke.a,null,o.a.createElement(Ee.a,{span:7},o.a.createElement(_e.a,{value:ve.TRANSLATE.value,id:"translate-all"},ve.TRANSLATE.label)),o.a.createElement(Ee.a,{span:10},o.a.createElement(_e.a,{value:ve.DUPLICATE.value,id:"duplicate-all"},ve.DUPLICATE.label)),o.a.createElement(Ee.a,{span:7},o.a.createElement(_e.a,{value:ve.DO_NOTHING.value,id:"update-none"},ve.DO_NOTHING.label)))))))},Pe=function(){var e=Object(E.h)(q.a("languageSelections")),t=Object(E.g)(q.a("setLanguageSelectionForAll"));return o.a.createElement(Ae,{languageSelections:e,setLanguageSelectionForAll:t})},De=n(1347),Ie=n(177),Ce=function(e){var t=e.language,n=e.languageSelections,r=e.setLanguageSelection,a=e.disabled,s=e.message;return o.a.createElement(o.a.Fragment,null,o.a.createElement(ke.a,null,o.a.createElement(Ee.a,{span:6},o.a.createElement("strong",null,o.a.createElement(De.b,null,o.a.createElement("img",{src:t.flag_url}),t.display_name))),o.a.createElement(Ee.a,{span:18},o.a.createElement(_e.a.Group,{value:n[t.code],onChange:function(e){r({languageCode:t.code,selection:e.target.value})},name:"tr_action[".concat(t.code,"]")},o.a.createElement(ke.a,null,Se.a(ve).map((function(e){var t=e.label,n=e.value,r=e.colSpan;return o.a.createElement(Ee.a,{span:r,key:n},a?o.a.createElement(Ie.a,{title:s},o.a.createElement(_e.a,{disabled:a},t)):o.a.createElement(_e.a,{value:n},t))})))))))},xe=function(e){var t=e.language,n=Object(E.h)(q.a("languageSelections")),r=Object(E.g)(q.a("setLanguageSelection")),a=Object(E.h)(q.a("selectedItems")),s=W.a(t.code,Z(a)),i=s?Object(N.a)("Selected content includes items that were originally created in this language. Deselect these items to proceed.","sitepress"):"";return o.a.createElement(Ce,{language:t,languageSelections:n,setLanguageSelection:r,disabled:s,message:i})},Le=function(e){var t=e.children;return o.a.createElement(ke.a,null,o.a.createElement(Ee.a,{span:24},t))},Re=function(e){var t=e.targetLanguages;return o.a.createElement("div",{className:"tm-dashboard-translation-options__languages"},t.length>1&&o.a.createElement(Le,null,o.a.createElement(Pe,null)),t.map((function(e){return o.a.createElement(Le,{key:e.code},o.a.createElement(xe,{language:e}))})))},Ne=function(){var e=Object(E.h)(Te.a).targetLanguages;return o.a.createElement(Re,{targetLanguages:e})},Me=n(9),Je=n.n(Me),Be=n(26),We=(n(164),{NO_POSTS:Object(N.a)("Select a post or page to translate","sitepress"),ONLY_DO_NOTHING:Object(N.a)("Translate or duplicate content to at least one language","sitepress"),CHOOSE_HOW_TO_TRANSLATE:Object(N.a)("Choose how you want to translate your content","sitepress"),ONLY_TRANSLATED:Object(N.a)("Selected content is already translated","sitepress"),CONTENT_NOT_CREATED_IN_PRIMARY_LANG:Object(N.a)("Selected content includes items in a language other than your site's default language.","sitepress")}),He=function(e){var t=e.inProgress,n=e.disabled,r=e.disabledTooltip,a=e.label,s=e.submit;return o.a.createElement(Ie.a,{trigger:"hover",title:r,placement:"top"},o.a.createElement("span",{className:"tm-jobs-submit-wrapper"},o.a.createElement(Be.a,{id:"icl_tm_jobs_submit",type:"primary",disabled:n,onClick:s,loading:t},a)))},Ue=function(){var e=Object(E.h)(q.a("settings")),t=e.hasAnyLocalTranslators,n=e.hasAnyTranslationServices,r=e.shouldUseBasket,a=Object(E.h)(q.a("selectedItems")),s=Object(E.h)(q.a("languageSelections")),i=Object(E.h)(q.a("inProgress")),c=Object(E.h)(q.a("howToTranslate")),u=Object(E.h)(q.a("howToHandleExistingTranslations")),l=Object(E.h)(q.a("targetLanguages")),p=Object(E.g)(q.a("submit")),d=V(s,ve.TRANSLATE.value),f=V(s,ve.DUPLICATE.value),b=R.a(d)&&R.a(f),h=!R.a(d),g=!R.a(f),m=!h,y=Q(s,a),j=1===y.length&&y[0]===v.b.COMPLETED,O=t||n,w=function(){if(!$(a)&&"myself"!==c&&"basket"!==c)return[!0,We.CONTENT_NOT_CREATED_IN_PRIMARY_LANG];if(R.a(a))return[!0,We.NO_POSTS];if(b)return[!0,We.ONLY_DO_NOTHING];if(h){if(!c)return[!0,We.CHOOSE_HOW_TO_TRANSLATE];if("automatic"===c&&"leave"===u&&j)return[!0,We.ONLY_TRANSLATED];if("automatic"!==c&&!O)return[!0,""];if("automatic"===c&&!R.a(X(s,l)))return[!0,""]}return[!1,""]}(),T=Je()(w,2),k=T[0],S=T[1],_=b?Object(N.a)("Choose at least one translation action","sitepress"):m?Object(N.a)("Duplicate","sitepress"):g?c&&"automatic"!==c&&O?r?Object(N.a)("Add to Translation Basket and duplicate","sitepress"):Object(N.a)("Add to Translation Queue and duplicate","sitepress"):Object(N.a)("Start translating and duplicating","sitepress"):c&&"automatic"!==c&&O?r?Object(N.a)("Add to Translation Basket","sitepress"):Object(N.a)("Add to Translation Queue","sitepress"):Object(N.a)("Start translating","sitepress");return o.a.createElement(He,{label:_,disabled:k,disabledTooltip:S,inProgress:i,submit:p})},qe=n(150),ze=n(611),Fe=n(361);function Ge(){return(Ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ye=s.createElement("path",{d:"M10.267 5.867a.733.733 0 111.466 0v6.6a.733.733 0 11-1.466 0v-6.6zM11 14.667a.733.733 0 100 1.466.733.733 0 000-1.466z"}),Ke=s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 22c6.075 0 11-4.925 11-11S17.075 0 11 0 0 4.925 0 11s4.925 11 11 11zm0-1.467a9.533 9.533 0 100-19.066 9.533 9.533 0 000 19.066z"});var Ve=function(e){return s.createElement("svg",Ge({width:22,height:22,fill:"#33879e",xmlns:"http://www.w3.org/2000/svg"},e),Ye,Ke)},Qe=function(e){var t=e.message,n=e.type;return o.a.createElement(Fe.a,{type:n,message:t,showIcon:!0,icon:o.a.createElement(Ve,null)})},Xe=function(e){var t,n=e.shouldUseBasket,r=e.creditMessage,a=e.howToTranslate,s=e.setHowToTranslate,i=e.automaticDisabled,c=o.a.createElement(_e.a,{value:"automatic",disabled:i.value},Object(N.a)("Translate automatically","sitepress"));return o.a.createElement("div",{className:"tm-dashboard-translation-options__how"},o.a.createElement("h3",null,Object(N.a)("How do you want to translate?","sitepress")),o.a.createElement(_e.a.Group,{onChange:function(e){s(e.target.value)},value:a,name:"wpml-how-to-translate"},o.a.createElement(ke.a,null,o.a.createElement(Ee.a,{span:24},i.value?(t=i.reason,o.a.createElement(Ie.a,{title:t},c)):c,r&&o.a.createElement(Qe,{message:r.message,type:r.type}))),o.a.createElement(ke.a,null,o.a.createElement(Ee.a,{span:24},o.a.createElement(_e.a,{value:n?"basket":"myself"},n?Object(N.a)("Assign to a translator","sitepress"):Object(N.a)("Translate myself","sitepress")),r&&o.a.createElement("p",{className:"label-desc"},Object(N.a)("You do not need translation credits to translate content yourself.","sitepress"))))))},$e=function(){var e=Object(E.h)(ze.a(["howToTranslate","creditMessage"])),t=e.howToTranslate,n=e.creditMessage,r=Object(E.h)(D.a(q.a("settings"),ze.a(["shouldUseBasket","isInDefaultLanguage","defaultLanguageDisplayName"]))),a=r.shouldUseBasket,i=r.isInDefaultLanguage,c=r.defaultLanguageDisplayName,u=Object(E.h)(q.a("selectedItems")),l=Object(E.g)(q.a("setHowToTranslate")),p=$(u),d={value:!(i&&p)};return d.value&&(d.reason=i&&!p?Object(ee.b)(Object(N.a)("You can only automatically translate content from your site's default language (English), to your site's other languages. Deselect content in your site's secondary languages to proceed.","sitepress"),c):Object(ee.b)(Object(N.a)("You can only automatically translate content from your primary language (%s) to other languages. Use the language switcher at the top of this page to switch to %s.","sitepress"),c,c)),Object(s.useEffect)((function(){$(u)||l(void 0)}),[u]),o.a.createElement(Xe,{defaultLanguageDisplayName:c,isInDefaultLanguage:i,shouldUseBasket:a,creditMessage:n,howToTranslate:t,setHowToTranslate:l,automaticDisabled:d})},Ze=n(534),et=n(1317),tt=(n(55),n(163),n(458)),nt=(n(123),n(862),n(424),n(593),tt.a.Option,[{value:"before-publish",label:Object(N.a)("Review the translations before publishing","sitepress")},{value:"publish-and-review",label:Object(N.a)("Publish translations and review them later","sitepress")},{value:"no-review",label:Object(N.a)("Publish translations without reviewing","sitepress")}]),rt=function(e){var t=e.reviewMode,n=e.setReviewMode,r=function(e){return n(e.target.value)};return o.a.createElement(o.a.Fragment,null,nt.map((function(e){return o.a.createElement(ke.a,{key:e.value},o.a.createElement(Ee.a,{offset:2},o.a.createElement(_e.a,{value:e.value,checked:t===e.value,onChange:r},e.label)))})))},at=function(e){var t=e.isOpened,n=e.saveReviewMode,r=Object(s.useState)(null),a=Je()(r,2),i=a[0],c=a[1],u=Object(s.useState)(!1),l=Je()(u,2),p=l[0],d=l[1],f=function(){d(!0),n(i)};return o.a.createElement(Ze.a,{title:null,visible:t,onOk:f,closable:!1,footer:null,className:"wpml-wizard__modal"},o.a.createElement("div",{className:"tm-modal-wrapper"},o.a.createElement("p",{className:"tm-modal-wrapper__intro"},o.a.createElement("i",{className:"otgs-ico otgs-ico-question-circle-o"}),o.a.createElement("strong",null,Object(N.a)("One more thing...","sitepress"))),o.a.createElement("p",null,o.a.createElement("strong",null,Object(N.a)("What would you like to do when your content has finished translating automatically?","sitepress"))),o.a.createElement(rt,{reviewMode:i,setReviewMode:c}),o.a.createElement("p",{className:"tm-modal-wrapper__submit"},o.a.createElement(Be.a,{type:"primary",disabled:!i,onClick:f,loading:p},Object(N.a)("Save settings","sitepress")))),o.a.createElement(et.a,null),o.a.createElement("p",null,Object(N.a)("This setting will apply to all future automatic translations. You can change this anytime in WPML → Settings.","sitepress")))},st=function(){var e=Object(E.h)(q.a("showTranslationReviewModal")),t=Object(E.g)(q.a("saveReviewMode"));return o.a.createElement(at,{isOpened:e,saveReviewMode:t})},ot=n(94),it=n(1299),ct=n(179),ut=n(1352),lt=function(e){var t=e.currentSelection,n=e.setCurrentSelection,r=e.translationReviewMode,a=e.overrideTooltip,s=void 0===a?"":a,i=o.a.createElement(_e.a,{value:"override"},Object(N.a)("Overwrite existing translations","sitepress"));return o.a.createElement("div",{className:"wpml-how-to-handle-existing"},o.a.createElement("h3",null,Object(N.a)("Some of the content you want to translate is already translated","sitepress")),o.a.createElement("p",null,o.a.createElement("strong",null,Object(N.a)("What do you want to do with the content that’s already translated?","sitepress"))),o.a.createElement(_e.a.Group,{onChange:function(e){n(e.target.value)},value:t,name:"wpml-how-to-handle-existing"},o.a.createElement(ke.a,null,o.a.createElement(Ee.a,{span:24},o.a.createElement(_e.a,{value:"leave"},Object(N.a)("Leave existing translations as is","sitepress")))),o.a.createElement(ke.a,null,o.a.createElement(Ee.a,{span:24},s&&o.a.createElement(o.a.Fragment,null,i,o.a.createElement(Ie.a,{title:function(){return o.a.createElement("p",{dangerouslySetInnerHTML:{__html:s}})}},o.a.createElement(ot.a,{type:"text"},o.a.createElement(ut.a,null)))),!s&&i))),"before-publish"===r&&"override"===t&&o.a.createElement("p",null,Object(N.a)("You chose to review translations before publishing.","sitepress"),o.a.createElement("br",null),Object(N.a)("If you retranslate content that's already published, the changes will be applied directly to live pages or posts.","sitepress")))},pt=function(){var e=Object(E.h)(Te.a),t=e.howToHandleExistingTranslations,n=e.howToTranslate,r=Object(E.g)(q.a("setHowToHandleExistingTranslations")),a=Object(E.h)(q.a("translationReviewMode")),s="https://wpml.org/documentation/translating-your-contents/how-wpml-keeps-track-of-your-translations/",i=it.a([[C.a("automatic"),ct.a(Object(ee.b)(Object(N.a)('This also updates the translation memory for your site. Read more about <a href="%s" target="_blank" >translation memory</a>',"sitepress"),s))],[C.a("myself"),ct.a(Object(ee.b)(Object(N.a)('Allows you to re-translate your content and update the translation memory for your site. Read more about <a href="%s" target="_blank" >translation memory</a>',"sitepress"),s))],[C.a("basket"),ct.a(Object(ee.b)(Object(N.a)('Allows your translators to re-translate your content and update the translation memory for your site. Read more about <a href="%s" target="_blank" >translation memory</a>',"sitepress")+"<br />"+Object(N.a)("HINT: You can add a Note for translators in the table above with special instructions.","sitepress"),s))],[Te.a,ct.a("")]])(n);return o.a.createElement(lt,{currentSelection:t,setCurrentSelection:r,overrideTooltip:i,translationReviewMode:a})},dt=function(e){var t=e.className,n=e.warningMessages;return o.a.createElement(o.a.Fragment,null,n.map((function(e,n){return o.a.createElement(Fe.a,{key:n,message:e.message(),type:z.a("warning","type",e),showIcon:!0,icon:o.a.createElement(Ve,null),className:t})})))},ft=function(){var e=Object(E.h)(q.a("languageSelections")),t=Object(E.h)(q.a("selectedItems")),n=Object(E.h)(q.a("howToTranslate")),r=Object(E.h)(q.a("translationReviewMode")),a=Object(E.h)(q.a("warningMessages")),s=Object(E.h)(qe.a(["settings","isATEActive"])),i=!R.a(V(e,ve.TRANSLATE.value)),c=Q(e,t),u=W.a(v.b.COMPLETED,c);return o.a.createElement(o.a.Fragment,null,!r&&o.a.createElement(st,null),o.a.createElement(Ne,null),i&&s&&o.a.createElement($e,null),!R.a(a)&&o.a.createElement(dt,{className:!q.a("warning","type")&&"tm-dashboard-translation-options__warning",warningMessages:a}),"automatic"===n&&i&&u&&o.a.createElement(pt,null),o.a.createElement(Ue,null))},bt=function(){var e=Oe({targetLanguages:WPML_TM_DASHBOARD.sendingToTranslation.targetLanguages,endpoints:WPML_TM_DASHBOARD.endpoints,translationReviewMode:WPML_TM_DASHBOARD.sendingToTranslation.translationReviewMode,settings:{defaultLanguageDisplayName:WPML_TM_DASHBOARD.sendingToTranslation.settings.defaultLanguageDisplayName,isInDefaultLanguage:!!WPML_TM_DASHBOARD.sendingToTranslation.settings.isInDefaultLanguage,shouldUseBasket:!!WPML_TM_DASHBOARD.sendingToTranslation.settings.shouldUseBasket,isATEActive:!!WPML_TM_DASHBOARD.sendingToTranslation.settings.isATEActive,hasAnyLocalTranslators:!!WPML_TM_DASHBOARD.sendingToTranslation.settings.hasAnyLocalTranslators,hasAnyTranslationServices:!!WPML_TM_DASHBOARD.sendingToTranslation.settings.hasAnyTranslationServices,doesTranslationServiceRequireAuthentication:!!WPML_TM_DASHBOARD.sendingToTranslation.settings.doesTranslationServiceRequireAuthentication,doesServiceRequireTranslators:!!WPML_TM_DASHBOARD.sendingToTranslation.settings.doesServiceRequireTranslators,currentTranslationServiceName:WPML_TM_DASHBOARD.sendingToTranslation.settings.currentTranslationServiceName},urls:Object(z.a)([],"urls",WPML_TM_DASHBOARD.sendingToTranslation)}),t=Object(E.d)(e);return Object(s.useEffect)((function(){var e,n,r,s,o,i,c,u,l;e=t.getActions().addItem,n=t.getActions().removeItem,r=t.getActions().setItems,s=t.getActions().removeAllItems,i=function(e){var t=e.getAttribute("name"),n=z.a("post",0,we.a(/(post)|(package)/,t)),r=parseInt(z.a(0,1,we.a(/\[(\d+)\]/,t))),a=c(e);return{id:r,type:n,postType:u(e),translations:a,originalCreatedInPrimaryLang:e.dataset.wpmlIsOriginalInPrimaryLang,originalLangCode:e.dataset.wpmlOriginalLangCode}},c=function(e){var t=e.parentNode.parentNode,n=a()(t.querySelectorAll(".js-wpml-translate-link"));return n.map((function(e){return{language:e.dataset.wpmlccLang,status:(t=e.querySelector("i"),t.classList.contains("otgs-ico-translated")?v.b.COMPLETED:t.classList.contains("otgs-ico-waiting")||t.classList.contains("otgs-ico-in-progress")||t.classList.contains("otgs-ico-refresh-spin")?v.b.IN_PROGRESS:v.b.CANCELLED)};var t}))},u=function(e){var t,n;return null===(t=e.parentNode.parentNode.querySelector(".wpml-column-type"))||void 0===t||null===(n=t.innerHTML)||void 0===n?void 0:n.trim()},l=function(e){e.addEventListener("change",(function(){if(this.checked){var e=a()(o()).map(i);r(e)}else s()}))},(o=function(){return document.querySelectorAll("#icl-tm-translation-dashboard tbody input[type=checkbox]")})().forEach((function(t){t.addEventListener("change",(function(){var r=i(t);this.checked?e(r):n(r)}))})),l(document.querySelector("#icl-tm-translation-dashboard thead input[type=checkbox]")),l(document.querySelector("#icl-tm-translation-dashboard tfoot input[type=checkbox]"))}),[]),o.a.createElement(E.a,{store:t},o.a.createElement("input",{type:"hidden",value:WPML_TM_DASHBOARD.sendingToTranslation.iclnonce,name:"iclnonce"}),o.a.createElement(ft,null))},ht=function(e){var t=e.message,n=e.description,r=e.type;return o.a.createElement(Fe.a,{message:t&&o.a.createElement("strong",null,t),description:o.a.createElement("span",{dangerouslySetInnerHTML:{__html:n}}),type:r,closable:!0,showIcon:!0})},gt=function(){var e=(WPML_TM_DASHBOARD.sentContentMessages||{}).confirmation,t=void 0===e?void 0:e,n=Object(s.useState)(t),r=Je()(n,2),a=r[0],i=r[1],c=Object(E.h)((function(e){return e.automaticJobsInProgress}));return Object(s.useEffect)((function(){a&&null!=a&&a.automatic&&!c&&i(void 0)}),[a,c]),a?o.a.createElement(ht,{message:a.message,description:a.description,type:a.type}):o.a.createElement(o.a.Fragment,null)},mt=function(e){var t=e.errorEntry,n=Object(s.useState)(!1),r=Je()(n,2),a=r[0],i=r[1];return o.a.createElement("li",null,Object(te.a)(Object(ee.b)(Object(N.a)("<s>%s</s>: There are base64 encoded fields in this document","sitepress"),t.elementTitle),{s:o.a.createElement("strong",null)}),a&&o.a.createElement("ul",null,t.fields.map((function(e,t){return o.a.createElement("li",{key:t},o.a.createElement("strong",null,e.title),": ",e.content)}))),o.a.createElement(ot.a,{type:"link",onClick:function(){return i((function(e){return!e}))}},a?Object(N.a)("Hide details","sitepress"):Object(N.a)("Show details","sitepress")),o.a.createElement("span",null))},vt=function(e){var t=e.encodedFieldErrorEntries,n=o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,Object(N.a)("Some of the content that you selected for translation includes fields that are encoded. Translators will not be able to work on this kind of content, so we removed it from the job.","sitepress")),o.a.createElement("ul",null,t.map((function(e,t){return o.a.createElement(mt,{key:t,errorEntry:e})}))),o.a.createElement("p",null,Object(N.a)("To fix this problem, you need to tell WPML how these fields are encoded, so that WPML can decode them before sending for translation.","sitepress")));return o.a.createElement(Fe.a,{message:o.a.createElement("strong",null,Object(N.a)("WPML cannot send some of the content to translation","sitepress")),description:n,type:"error",closable:!0,showIcon:!0})},yt=n(193),jt=n(175),Ot=function(){var e=(WPML_TM_DASHBOARD.sentContentMessages||{}).encodedFieldErrorEntries;return o.a.createElement(o.a.Fragment,null,e&&o.a.createElement(o.a.Fragment,null,o.a.createElement(vt,{encodedFieldErrorEntries:e}),o.a.createElement("br",null)),o.a.createElement(E.a,{store:Object(yt.a)(ate_jobs_sync,jt.a)},o.a.createElement(gt,null)))},wt=n(82),Tt=n(91),kt=n(92),Et=n(68),St=n(187),_t=n(46),At=Object(Et.a)((function(e){var t=e.strings,n=e.process.processedJobs.filter((function(e){return e.status===v.b.COMPLETED}));return o.a.createElement("div",{className:"wpml-tm-polling-progress notice notice-warning"},o.a.createElement("p",null,t.progressText," ",n.length>0&&o.a.createElement("span",null,Object(_t.sprintf)(t.progressJobsCount,n.length)),o.a.createElement("span",{className:"spinner"})))}),kt.a,Tt.a),Pt=Object(Et.a)((function(e){var t=e.strings,n=e.process;return n.confirmationHidden?"":o.a.createElement("div",{className:"wpml-tm-polling-summary notice notice-success is-dismissible"},o.a.createElement("p",null,o.a.createElement("strong",null,t.statusChecked)," ",n.processedJobs.length>0?Object(_t.sprintf)(t.translationsDownloaded,n.processedJobs.filter((function(e){return e.status===v.b.COMPLETED})).length):t.noTranslationsDownloaded),o.a.createElement("button",{onClick:n.hideConfirmation,type:"button",className:"notice-dismiss"},o.a.createElement("span",{className:"screen-reader-text"},t.dismissNotice)))}),kt.a,Tt.a),Dt=Object(Et.a)((function(e){var t=e.strings;return o.a.createElement("div",{className:"wpml-tm-polling-summary notice notice-error"},o.a.createElement("p",null,t.errorMessage))}),Tt.a),It=Object(Et.a)((function(e){var t=e.process;return o.a.createElement("div",null,!!t.inProgress&&o.a.createElement(At,null),!!t.finished&&o.a.createElement(Pt,null),!!t.error&&o.a.createElement(Dt,null),!t.inProgress&&o.a.createElement(St.a,null))}),kt.a),Ct=n(191),xt=n(441);document.addEventListener("DOMContentLoaded",(function(){a()(document.querySelectorAll(".wpml-sync-and-download-translation")).forEach((function(e){new m(e,document,(function(){return new y(new j.a(new O.a))}),(function(e,t,n){return new w.a(e,t,n)}))}));var e,t,n,r,s=document.querySelector("#wpml-tm-polling-wrap");s&&(e=s,t=new O.a,n=new j.a(t),r=o.a.createElement(Tt.b,null,o.a.createElement(wt.b,{jobsLoader:new Ct.a(n)},o.a.createElement(kt.b,{createProcess:xt.b},o.a.createElement(It,null)))),c.a.render(r,e));var i=document.getElementById("wpml-tm-dashboard-sent-content-messages-container");i&&c.a.render(o.a.createElement(Ot,null),i);var u=document.querySelector(".tm-dashboard-translation-options");u&&c.a.render(o.a.createElement(bt,null),u)}))},133:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(14),a=n.n(r),s=n(16),o=n.n(s),i=n(11),c=function(){function e(t,n,r){a()(this,e),this.document=t,this.button=n,this.icons=r,this.progressClass="wpml-sync-and-download-translation-progress"}return o()(e,[{key:"startProcess",value:function(){this.button.classList.add(this.progressClass)}},{key:"handleResult",value:function(e){var t=this;return this.button.classList.remove(this.progressClass),Object(i.j)(e,i.b.IN_PROGRESS)||Object(i.j)(e,i.b.TRANSLATION_READY_TO_DOWNLOAD)||this.button.remove(),e.map((function(n){return t.updateIcon(n),e}))}},{key:"updateIcon",value:function(e){if(e.status===i.b.CANCELLED||e.status===i.b.COMPLETED){var t=e.status;t===i.b.CANCELLED&&e.hasCompletedTranslation&&(t=e.needsUpdate?i.b.NEEDS_UPDATE:i.b.COMPLETED);var n="#wpml-job-status-".concat(e.id," > i"),r=this.document.querySelector(n);if(r){if(this.alreadyHasCorrectIcon(r,e))return;var a=this.icons,s=a.progress,o=a.canceled,c=a.completed,u=a.needsUpdate;switch(t){case i.b.CANCELLED:r.classList.replace(s,o);break;case i.b.NEEDS_UPDATE:r.classList.replace(s,u);break;default:r.classList.replace(s,c)}r.classList.add("wpml-blink"),setTimeout((function(){r.classList.remove("wpml-blink")}),2e3)}}}},{key:"alreadyHasCorrectIcon",value:function(e,t){return e.classList.contains(this.icons.completed)&&t.status===i.b.COMPLETED||e.classList.contains(this.icons.canceled)&&t.status===i.b.CANCELLED}}]),e}()},163:function(e,t,n){},164:function(e,t,n){},167:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(2),a=n.n(r),s=n(6),o=n.n(s),i=n(14),c=n.n(i),u=n(16),l=n.n(u),p=n(93),d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;c()(this,e),this.jobAPI=t,this.interval=n,this.MAX_ATTEMPTS=5}var t,n,r;return l()(e,[{key:"run",value:(r=o()(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.jobAPI.syncBatch(t);case 2:return e.abrupt("return",this.checkProgress());case 3:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"checkProgress",value:(n=o()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.attempts=0;case 1:return e.next=3,this.runCheck();case 3:if(e.sent){e.next=7;break}e.next=1;break;case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"runCheck",value:(t=o()(a.a.mark((function e(){var t=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(p.a)(o()(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.jobAPI.checkBatchSync();case 2:return n=e.sent,e.abrupt("return",0===n.length||++t.attempts>=t.MAX_ATTEMPTS);case 4:case"end":return e.stop()}}),e)}))),this.interval));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}()},168:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(2),a=n.n(r),s=n(6),o=n.n(s),i=n(14),c=n.n(i),u=n(16),l=n.n(u),p=n(15),d=n.n(p),f=n(11);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e,t,n){var r=function(e){return t.find((function(t){return e.id===t.id&&e.type===t.type&&t.status===n}))},a=e.filter((function(e){return e.status===n||void 0!==r(e)})).map((function(e){var t=r(e);return void 0!==t&&(e.hasCompletedTranslation=t.hasCompletedTranslation,e.needsUpdate=t.needsUpdate),e})).map((function(e){return h(h({},e),{},{status:n})})),s=t.filter((function(t){return t.status===n&&void 0===e.find((function(e){return Object(f.m)(e,t)}))}));return a.concat(s)},m=function(){function e(t){c()(this,e),this.jobAPI=t}var t;return l()(e,[{key:"sync",value:(t=o()(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.jobAPI.synchronizeStatusesWithTP(!0);case 2:return n=e.sent,e.abrupt("return",{ready:g(t,n,f.b.TRANSLATION_READY_TO_DOWNLOAD),cancelled:g(t,n,f.b.CANCELLED)});case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}()},169:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(15),a=n.n(r),s=n(2),o=n.n(s),i=n(25),c=n.n(i),u=n(6),l=n.n(u),p=n(14),d=n.n(p),f=n(16),b=n.n(f),h=n(11),g=n(104);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(){function e(t,n){d()(this,e),this.LIMIT_PER_CHUNK=5,this.REQUEST_NUM_LIMIT=5,this.jobAPI=t,this.hooks=n}var t,n;return b()(e,[{key:"download",value:(n=l()(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.allJobsCount=t.length,this.alreadyProcessedJobs=0,this.jobsToProcess=c()(t),n=[];this.jobsToProcess.length&&n.length<this.REQUEST_NUM_LIMIT;)r=this.getNextJobsSet(),n.push(this.downloadSubset(r));return e.next=7,Promise.all(n);case 7:return g.a.dispatchDownloadedJobsEvent(t),e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"downloadSubset",value:(t=l()(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.jobAPI.applyTranslation(t);case 2:if(t=t.map((function(e){return v(v({},e),{},{status:h.b.COMPLETED})})),this.alreadyProcessedJobs+=t.length,this.hooks&&this.hooks.doAction("wpml-tm-job-translations-processed",t),!(this.jobsToProcess.length>0)){e.next=7;break}return e.abrupt("return",this.downloadSubset(this.getNextJobsSet()));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getNextJobsSet",value:function(){var e=this.jobsToProcess.slice(0,this.LIMIT_PER_CHUNK);return this.jobsToProcess.splice(0,this.LIMIT_PER_CHUNK),e}}]),e}(),j=function(){function e(t,n){d()(this,e),this.jobAPI=t,this.hooks=n}var t;return b()(e,[{key:"download",value:(t=l()(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new y(this.jobAPI,this.hooks),e.abrupt("return",n.download(t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}()},175:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(69),a=Object(r.a)()},185:function(e,t,n){},187:function(e,t,n){"use strict";var r=n(14),a=n.n(r),s=n(16),o=n.n(s),i=n(36),c=n.n(i),u=n(42),l=n.n(u),p=n(35),d=n.n(p),f=n(0),b=n.n(f),h=n(18),g=n.n(h),m=n(46),v=n(68),y=n(82),j=n(91),O=n(92);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var a=d()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return l()(this,n)}}var T=function(e){c()(n,e);var t=w(n);function n(){return a()(this,n),t.apply(this,arguments)}return o()(n,[{key:"render",value:function(){var e=this.props,t=e.jobs,r=e.strings,a=e.lastPickupDate,s=e.process,o=1===t.length?Object(m.sprintf)(r.numberOfTranslationStringsSingle,1):Object(m.sprintf)(r.numberOfTranslationStringsMulti,t.length),i=1===t.length?Object(m.sprintf)(r.stringsSentToTranslationSingle,"<strong>".concat(o,"</strong>")):Object(m.sprintf)(r.stringsSentToTranslationMulti,"<strong>".concat(o,"</strong>"));return b.a.createElement("div",{className:"wpml-tm-polling otgs-notice message"},b.a.createElement("p",null,b.a.createElement("span",{id:"wpml-tm-polling-jobs-number",dangerouslySetInnerHTML:{__html:i}}),b.a.createElement("input",{type:"button",className:"button button-secondary",value:r.buttonText,onClick:function(){return s.run()},disabled:n.shouldDisableTheButton(a)}),b.a.createElement("span",{id:"wpml-tmp-polling-last-pickup",className:"wpml-tm-polling-last-pickup"},Object(m.sprintf)(r.lastCheck,a?a.local().format("YYYY-MM-DD HH:mm"):r.never))))}}],[{key:"shouldDisableTheButton",value:function(e){return!(WPML_TM_DASHBOARD.debug||!e)&&e.isAfter(g()().utc().subtract(5,"minutes"))}}]),n}(b.a.Component);t.a=Object(v.a)(T,j.a,y.a,O.a)},191:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(2),a=n.n(r),s=n(6),o=n.n(s),i=n(14),c=n.n(i),u=n(16),l=n.n(u),p=n(11),d=n(18),f=n.n(d),b=function(){function e(t){c()(this,e),this.jobAPI=t}var t;return l()(e,[{key:"load",value:(t=o()(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={scope:"remote",status:p.b.TRANSLATION_READY_TO_DOWNLOAD+","+p.b.IN_PROGRESS},e.prev=1,e.next=4,this.jobAPI.loadJobs(t);case 4:return n=e.sent,e.abrupt("return",{jobs:n.jobs,last_picked_up_date:n.last_picked_up_date?f.a.unix(n.last_picked_up_date):null});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{jobs:[],last_picked_up_date:null});case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return t.apply(this,arguments)})}]),e}()},192:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return I}));var r=n(851),a=n(17),s=n(2),o=n.n(s),i=n(6),c=n.n(i),u=function(){var e=c()(o.a.mark((function e(t,n){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t,n);case 2:if(r=e.sent,a=parseInt(r.available_balance),!isNaN(a)){e.next=6;break}throw Error('"available_balance" is not numeric.');case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=c()(o.a.mark((function e(t,n){var r,a,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n,{});case 2:if(r=e.sent,a=r.data,s=a.success,i=a.data,s&&i&&!("error"in i)&&"available_balance"in i){e.next=8;break}throw Error("Error getting credits.");case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){if(!ate_jobs_sync||!Object(r.a)(["endpoints","getCredits",ate_jobs_sync]))throw Error("ateGetCredits: Missing necessary system data.");return u(a.a,ate_jobs_sync.endpoints.getCredits)},d=n(15),f=n.n(d),b=function(e,t){var n="function"==typeof e,r="function"==typeof t;if(n||r){var a=function(e,t,n){return e[t].forEach((function(e){var t;null!==(t=e.classList)&&void 0!==t&&t.contains("issue-solving-backdrop")&&n()}))},s=new MutationObserver((function(o){o.forEach((function(o){n&&a(o,"addedNodes",e),a(o,"removedNodes",(function(){r&&t(),s.disconnect()}))}))}));return s.observe(document.getElementById("wpml-ate-console-container"),{subtree:!0,childList:!0}),s}},h=!1,g=function(){var e=c()(o.a.mark((function e(t,n,r){var a,s,i,u,l,p,d,f,g;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.onCloseWithCredits,s=t.onCloseWithoutCredits,i=t.onAteWidgetAppears,u=t.onAteWidgetDisappears,l=t.params,p=void 0===l?{}:l,!h){e.next=3;break}return e.abrupt("return");case 3:return h=!0,d=function(){var e=c()(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n().catch((function(e){throw h=!1,e}));case 2:return t=e.sent,e.abrupt("return",t>0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f="function"==typeof a?a:function(){},g="function"==typeof s?s:function(){},e.next=9,d();case 9:if(!e.sent){e.next=13;break}return h=!1,f(),e.abrupt("return");case 13:return b(i,u),e.prev=14,e.next=17,r(c()(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:t=e.sent,h=!1,t?f():g();case 5:case"end":return e.stop()}}),e)}))),p);case 17:e.next=23;break;case 19:throw e.prev=19,e.t0=e.catch(14),h=!1,e.t0;case 23:case"end":return e.stop()}}),e,null,[[14,19]])})));return function(t,n,r){return e.apply(this,arguments)}}(),m=n(1308);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=function(e,t,n,r){return new Promise((function(a,s){var i,u=n.url,l=n.params;r(u,y(y(y({},l),t),{},{onIssueSolvingClose:(i=c()(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e().catch((function(e){s(e)}));case 2:a(!0);case 3:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})}))}))};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(){var e=c()(o.a.mark((function e(t,n){var s,i,c,u,l,p,d=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=d.length>2&&void 0!==d[2]&&d[2],ate_jobs_sync&&Object(m.a)("ateConsole",ate_jobs_sync)&&Object(r.a)(["urls","ateConsole"],ate_jobs_sync)){e.next=4;break}throw console.log("ateLoadWidget: Missing necessary system data."),Error("System error.");case 4:if(head&&"function"==typeof head.js){e.next=7;break}throw console.error("head.js is not available."),Error("System error.");case 7:if(i=ate_jobs_sync.ateConsole,s){e.next=12;break}delete i.job_list,e.next=17;break;case 12:return e.next=14,Object(a.a)(ate_jobs_sync.endpoints.getATEJobsToSync,{});case 14:c=e.sent,u=c.data.data,i.job_list=u;case 17:return l={url:ate_jobs_sync.urls.ateConsole,params:i},p={translation_mode:ate_jobs_sync.isAutomaticTranslations?"everything":"something"},e.abrupt("return",j(t,w(w({},p),n),l,(function(e,t){return head.js(e,(function(){if("function"!=typeof LoadEateWidget)throw console.log("LoadEateWidget is not available."),Error("System error.");LoadEateWidget(t)}))})));case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(e){var t=e.onCloseWithCredits,n=e.onCloseWithoutCredits,r=e.onAteWidgetAppears,a=e.onAteWidgetDisappears,s=e.params;return g({onCloseWithCredits:t,onCloseWithoutCredits:n,onAteWidgetAppears:r,onAteWidgetDisappears:a,params:E(E({},void 0===s?{}:s),{},{widget_mode:"no_credits"})},p,T)},_=!1,A=function(){var e=c()(o.a.mark((function e(t,n){var r,a,s,i,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.onIssueSolved,a=t.onAteWidgetAppears,s=t.onAteWidgetDisappears,i=t.params,u=void 0===i?{}:i,!_){e.next=3;break}return e.abrupt("return");case 3:return _=!0,l="function"==typeof r?r:function(){},b(a,(function(){_=!1,"function"==typeof s&&s()})),e.prev=7,e.next=10,n(c()(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_=!1,l();case 2:case"end":return e.stop()}}),e)}))),u,!0);case 10:e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(7),_=!1,e.t0;case 16:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(t,n){return e.apply(this,arguments)}}();function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(e){var t=e.onIssueSolved,n=e.onAteWidgetAppears,r=e.onAteWidgetDisappears,a=e.params;return A({onIssueSolved:t,onAteWidgetAppears:n,onAteWidgetDisappears:r,params:D(D({},void 0===a?{}:a),{},{widget_mode:"issue_solving"})},T)}},193:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ee}));var r={};n.r(r),n.d(r,"getCounts",(function(){return I}));var a={};n.r(a),n.d(a,"get",(function(){return L}));var s=n(15),o=n.n(s),i=n(2),c=n.n(i),u=n(6),l=n.n(u),p=n(3),d=n(17),f=n(93),b=n(1299),h=n(179),g=n(40),m=n(1306),v=n(65),y=n(182),j=n(449),O=n(43),w=n(32),T=(n(842),n(347)),k=n(67),E=n(345),S=n(850),_=n(611),A=function(e,t){return!S.a(v.a([],e,t))},P=function(e){return l()(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={};case 1:return t.next=3,e.retry(_.a(["jobsToProcess"],n));case 3:n=t.sent,A("processed",n);case 5:if(A("jobsToProcess",n)){t.next=1;break}case 6:case"end":return t.stop()}}),t)})))},D=n(192),I=function(){var e=l()(c.a.mark((function e(){var t,n,r,a,s,o,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null===(t=window)||void 0===t||null===(n=t.ate_jobs_sync)||void 0===n||null===(r=n.endpoints)||void 0===r?void 0:r.untranslatedCount){e.next=3;break}throw new Error("ate_jobs_sync does not contain endpoint untranslatedCount");case 3:return e.next=5,Object(d.a)(a,{});case 5:if(s=e.sent,o=s.data,i=o.success,u=o.data,i){e.next=11;break}throw Error(u);case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e,t,n,r=null===(e=window)||void 0===e||null===(t=e.ate_jobs_sync)||void 0===t||null===(n=t.endpoints)||void 0===n?void 0:n.languages;if(!r)throw Error("ate_jobs_sync does not contain endpoint languages");return Object(d.a)(r,{})},x={},L=function(){var e=l()(c.a.mark((function e(){var t,n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("languages"in x)){e.next=2;break}return e.abrupt("return",x.languages);case 2:return e.next=4,C();case 4:if(t=e.sent,n=t.data,r=n.success,a=n.data,r){e.next=10;break}throw Error(a);case 10:if(0!==a.length){e.next=12;break}return e.abrupt("return",[]);case 12:return x.languages=a,e.abrupt("return",x.languages);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=n(9),N=n.n(R),M=n(61),J=n.n(M),B={untranslatedCounts:{},setUntranslatedCounts:Object(p.b)((function(e,t){e.untranslatedCounts=t&&"object"===J()(t)?Object.fromEntries(Object.entries(t).filter((function(e){var t=N()(e,2);t[0];return(+t[1]||0)>0}))):{}})),untranslatedElementsCount:Object(p.c)((function(e){return Object.keys(e.untranslatedCounts).length})),fetchUntranslatedContentCounts:Object(p.e)(function(){var e=l()(c.a.mark((function e(t,n,r){var a,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.injections,s=a.untranslatedContentService,e.next=4,s.getCounts();case 4:o=e.sent,t.setUntranslatedCounts(o);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}())},W=n(877),H=n(410),U=function(e){return{all:e,setAll:Object(p.b)((function(e,t){e.all=t})),primary:Object(p.c)((function(e){return Object(W.a)(Object(g.a)("is_default"),(null==e?void 0:e.all)||[])})),isPrimaryEligibleForAutomaticTranslation:Object(p.c)((function(e){return e.primary&&e.primary.can_be_translated_automatically})),secondaries:Object(p.c)((function(e){return Object(H.a)(Object(g.a)("is_default"),e.all)})),secondariesNotEligibleForAutomaticTranslation:Object(p.c)((function(e){return Object(H.a)(Object(g.a)("can_be_translated_automatically"),e.secondaries)})),readyForAutomaticTranslation:Object(p.c)((function(e){return e.isPrimaryEligibleForAutomaticTranslation&&e.secondaries.length>e.secondariesNotEligibleForAutomaticTranslation.length})),fetchLanguages:Object(p.e)(function(){var e=l()(c.a.mark((function e(t,n,r){var a,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.injections,s=a.languagesService,e.prev=2,e.next=5,s.get();case 5:o=e.sent,t.setAll(o),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n,r){return e.apply(this,arguments)}}())}},q=n(203);function z(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw s}}}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K={notifications:{},notificationsStatusBar:Object(p.c)((function(e){return Object(q.a)((function(e){var t=e.showOnStatusBar;return void 0===t||t}),e.notifications)})),notificationsDashboard:Object(p.c)((function(e){return Object(q.a)(Object(g.a)("showOnDashboard"),e.notifications)})),notificationsPauseControl:Object(p.c)((function(e){return Object(q.a)(Object(g.a)("showOnPauseControl"),e.notifications)})),inProgress:Object(p.c)((function(e){return Object.values(e.notifications).some((function(e){return e.inProgress}))})),removeNotification:Object(p.b)((function(e,t){delete e.notifications[t]})),updateNotification:Object(p.b)((function(e,t){var n=t.id,r=t.notification,a=Y(Y({},e.notifications[n]||{}),r);a.inProgress=!1,a.task&&a.task.isActive&&a.task.progress&&(0===a.task.progress.percentage||a.task.progress.percentage&&a.task.progress.percentage>-1&&a.task.progress.percentage<100||(a.task.progress.itemsCompleted>0||0===a.task.progress.itemsCompleted)&&a.task.progress.itemsTotal>0&&a.task.progress.itemsCompleted<a.task.progress.itemsTotal||0===a.task.progress.minutesToComplete||a.task.progress.minutesToComplete>0)&&(a.inProgress=!0);var s=Y(Y({},e.notifications),{},o()({},n,a));if(e.notifications[n]&&e.notifications[n].highlight===a.highlight&&e.notifications[n].task===a.task&&e.notifications[n].order===a.order)JSON.stringify(e.notifications)!==JSON.stringify(s)&&(e.notifications=s);else{var i,c={},u=z(Object.keys(s).sort((function(e,t){var n=s[e].order?s[e].order:10,r=s[t].order?s[t].order:10,a=s[e].highlight?1:0,o=s[t].highlight?1:0,i=s[e].task?1:0,c=s[t].task?1:0;return n-r||o-a||c-i})));try{for(u.s();!(i=u.n()).done;){var l=i.value;c[l]=s[l]}}catch(e){u.e(e)}finally{u.f()}e.notifications=c}}))},V=n(47);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $={endpoints:{},tasks:{},updateTask:Object(p.b)((function(e,t){t.endpointClass;var n=t.taskData,r=e.tasks;e.tasks=r.map((function(e){return e.taskId===n.taskId?X(X({},e),n):e}))})),startRunner:Object(p.e)(function(){var e=l()(c.a.mark((function e(t,n,r){var a,s,o,i,u,l,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.getState,s=a(),o=s.endpoints,i=s.tasks,e.next=4,t.updateNotifications({});case 4:for(u in i)l=i[u],p=Object(W.a)(Object(V.a)("endpoint",l.taskType),o),l.hasLock&&!l.isPaused&&t.runTask({endpointObject:p,task:l});case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),runTask:Object(p.e)(function(){var e=l()(c.a.mark((function e(t,n){var r,a,s,o,i,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.endpointObject,a=n.task,e.next=3,Object(d.a)(r,a);case 3:if(s=e.sent,o=s.data,i=o.success,u=o.data,l=void 0!==u&&!0===u.isCompleted,i&&(t.updateTask({endpointClass:r.endpoint,taskData:u}),t.updateNotifications({})),!i||!u||l||u.isPaused){e.next=10;break}return e.next=10,t.runTask({endpointObject:r,task:u});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),updateNotifications:Object(p.e)(function(){var e=l()(c.a.mark((function e(t,n,r){var a,s,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.getState,s=r.getStoreActions,o=a(),i=o.tasks,Object.keys(i).forEach((function(e){var t=i[e],n=t.description,r=t.progressDone,a=t.progressTotal,o=t.isPaused;t.isDisplayed&&s().notificationCenter.updateNotification({id:t.taskId,notification:{title:n||"Background task in progress...",actions:[],task:{isActive:!o,progress:{itemsCompleted:r,itemsTotal:a,percentage:a>0?parseInt(100*r/a):null}}}})}));case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}())},Z=n(25),ee=n.n(Z),te=n(14),ne=n.n(te),re=n(16),ae=n.n(re),se=n(56),oe=n.n(se),ie=n(359),ce=n.n(ie),ue=n(125),le=n(1),pe=n(11),de=n(72);var fe=function(e){return e.preventDefault(),!1};function be(e,t){var n=e._tippy;n&&n.destroy(),e.setAttribute("title",t),Object(ue.a)(e,"otgs")}var he=new WeakMap,ge=new WeakMap,me=new WeakMap,ve=function(){function e(t){ne()(this,e),he.set(this,{writable:!0,value:void 0}),ge.set(this,{writable:!0,value:void 0}),me.set(this,{writable:!0,value:void 0}),o()(this,"jobId",void 0),o()(this,"status",void 0),ce()(this,he,t),this.jobId=parseInt(t.dataset.tmJobId),ce()(this,ge,t.querySelector("i")),ce()(this,me,oe()(this,ge).dataset.originalTitle),this.status=pe.b.IN_PROGRESS}return ae()(e,[{key:"turnIntoSpinning",value:function(){oe()(this,ge).classList.replace("otgs-ico-in-progress","otgs-ico-refresh-spin"),be(oe()(this,ge),Object(le.a)("Refreshing translation status","sitepress")),oe()(this,he).addEventListener("click",fe,!0)}},{key:"revertToInProgress",value:function(){oe()(this,ge).classList.replace("otgs-ico-refresh-spin","otgs-ico-in-progress"),be(oe()(this,ge),oe()(this,me)),oe()(this,he).removeEventListener("click",fe,!0)}},{key:"turnIntoCompleted",value:function(e){oe()(this,ge).classList.replace("otgs-ico-refresh-spin",function(e){return e.status===pe.b.COMPLETED?Object(pe.h)(e)?"otgs-ico-needs-review":"otgs-ico-edit":"otgs-ico-in-progress"}(e)),be(oe()(this,ge),e.label),oe()(this,he).dataset.shouldAteSync="0",oe()(this,he).href=e.viewLink,oe()(this,he).removeEventListener("click",fe,!0),Object(O.a)("job-link-updated",e),this.status=pe.b.COMPLETED}},{key:"turnIntoInsufficientBalance",value:function(e,t){var n=this;oe()(this,ge).style.color=e?"#333":"#c1c1c1",oe()(this,ge).style.cursor=e?"pointer":"default",oe()(this,ge).classList.replace("otgs-ico-refresh-spin","otgs-ico-warning");var r=function(){var e=t.replace("CREDITS_ACTION","document.dispatchEvent(new Event('WPMLTooltipCreditsFixClicked'));"),r=oe()(n,he).dataset.tmEditorLink;return r?e.replace("TRANSLATE_LINK",r):e}();be(oe()(this,ge),r),this.status=pe.a.NO_CREDIT}}]),e}();var ye=de.a(2,(function(e,t){return e.find((function(e){return e.jobId===t.jobId}))})),je=function(){function e(t,n,r){ne()(this,e),this.getJobsInfo=t,this.isTranslationManager=n,this.notEnoughCreditPopup=r}var t;return ae()(e,[{key:"startSyncing",value:function(e){this.jobs=e,this.jobs.forEach((function(e){return e.turnIntoSpinning()}))}},{key:"markAsInsufficientBalanced",value:function(e){var t=this;e.map(ye(this.jobs)).filter((function(e){return e})).forEach((function(e){return e.turnIntoInsufficientBalance(t.isTranslationManager,t.notEnoughCreditPopup)}))}},{key:"finishSyncIteration",value:(t=l()(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this.jobs.filter((function(e){return e.status===pe.b.IN_PROGRESS}))).length>0)){e.next=12;break}return e.prev=2,e.next=5,this.getJobsInfo(t.map((function(e){return e.jobId})));case 5:n=e.sent,t.forEach((function(e){var t=n.find((function(t){return t.jobId===e.jobId}));t&&t.status===pe.b.COMPLETED&&e.turnIntoCompleted(t)})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(){return t.apply(this,arguments)})},{key:"revertRemainingJobsToInProgress",value:function(){this.jobs.forEach((function(e){e.status===pe.b.IN_PROGRESS&&e.revertToInProgress()}))}}]),e}();function Oe(){var e,t,n,r,a,s,o,i;return new je((o=null===(e=ate_jobs_sync)||void 0===e||null===(t=e.endpoints)||void 0===t?void 0:t.getJobsInfo,i=null===(n=ate_jobs_sync)||void 0===n||null===(r=n.urls)||void 0===r?void 0:r.currentUrl,function(){var e=l()(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.a)(o,{jobIds:t,returnUrl:i});case 2:if((n=e.sent).data.success){e.next=5;break}throw n.data.data;case 5:return e.abrupt("return",n.data.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===(a=ate_jobs_sync)||void 0===a?void 0:a.isTranslationManager,null===(s=ate_jobs_sync)||void 0===s?void 0:s.notEnoughCreditPopup)}var we=n(346);function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ee=function(e){if(Object(j.a)(window.wpmlAteStatusBarStore)){var t=new T.a(new k.a),n={tasks:"undefined"!=typeof wpml_background_tasks?Object(v.a)({},"tasks",wpml_background_tasks):{},endpoints:"undefined"!=typeof wpml_background_tasks?Object(v.a)({},"endpoints",wpml_background_tasks):{}};window.wpmlAteStatusBarStore=function(e){var t=e.anyJobsExist,n=e.jobsToSyncCount,s=e.automaticJobsInProgressTotal,o=e.needsReviewCount,i=e.languages,u=e.endpoints,j=e.ateAPI,T=e.isAutomaticTranslations,k=e.shouldTranslateEverything,S=e.isAteActive,_=e.ateConsole,A=e.backgroundTasksData,D=e.repeatTimeouts,I=void 0===D?{sync:5e3,syncDelayed:1e4,syncIsLockedDelay:3e4,translateEverythingInUse:12e4,translateEverythingWaiting:3e4,translateEverythingWaitingForMediaSetup:2e3}:D,C={anyJobsExist:!!t,isAutomaticTranslations:!!T,jobsToSyncCount:parseInt(n),automaticJobsInProgressTotal:parseInt(s),automaticJobsInProgress:parseInt(s),needsReviewCount:parseInt(o),endpoints:u,credits:null,fetchingCredits:!1,accountBalances:null,shouldTranslateEverything:"1"==k,notEnoughCredit:!1,notifications:{},shouldUseStatusUpdater:!0,automaticJobsStatus:Object(p.c)((function(e){return Object(b.a)([[function(){return e.notEnoughCredit},Object(h.a)("problem")],[function(){return e.automaticJobsInProgress>0},Object(h.a)("inProgress")],[function(){var t;return!(null!=e&&null!==(t=e.languages)&&void 0!==t&&t.readyForAutomaticTranslation)},Object(h.a)("problem")],[function(){return 0===e.automaticJobsInProgress},Object(h.a)("complete")],[Object(h.a)(!0),Object(h.a)(null)]])(e)})),synchronizeJobs:Object(p.e)(function(){var e=l()(c.a.mark((function e(t,n,r){var a,s,o,i,p,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.getState,!S){e.next=5;break}return s=P(j),e.next=5,s();case 5:return o=a().shouldUseStatusUpdater?Oe():null,i=new we.a(u.getJobsCount),p=function(){var e=l()(c.a.mark((function e(n){var r,s,o,i,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(r=a().jobsToSyncCount-n.length)<0?0:r,t.setJobsToSyncCount(r),s=n.filter((function(e){return e.needsReview})).length,o=a().needsReviewCount+s,t.setNeedsReviewCount(o),i=n.filter((function(e){return e.automatic})).length,u=(u=a().automaticJobsInProgress-i)<0?0:u,t.setAutomaticJobsInProgress(u),l={allCount:r,allAutomaticCount:u,needsReviewCount:o},Object(O.a)("ate-jobs-count-updated",l),Object(O.a)("ate-jobs-downloaded",n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=new E.a({synchronize:function(e){return j.sync(e)},download:function(e,t){return j.download(e,t)},releaseLock:function(e){return Object(d.a)(u.syncLock,{action:"release",lockKey:e})},getJobsCount:i,listeners:{onSyncStart:[function(){return o&&o.startSyncing(ee()(document.querySelectorAll('.js-wpml-translate-link[data-should-ate-sync="1"]')).map((function(e){return new ve(e)})))}],onInsufficientBalance:[function(){return t.setNotEnoughCredit(!0)},function(e){return o&&o.markAsInsufficientBalanced(e)}],onDownloadedChunk:[p,function(){var e=l()(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n>0&&n%5==0&&o)){e.next=3;break}return e.next=3,o.finishSyncIteration();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()],onSyncDownloadCycleCompleted:[function(e,n){return t.setJobsToSyncCount(e.allCount),t.setAutomaticJobsInProgress(e.allAutomaticCount),t.setNeedsReviewCount(e.needsReviewCount),Object(O.a)("ate-jobs-count-updated",e),Object(O.a)("ate-sync-cycle-completed",n),o&&o.finishSyncIteration()}],onSyncDownloadCompleted:[function(){return o&&o.revertRemainingJobsToInProgress()}]},repeatTimeouts:{sync:I.sync,syncDelayed:I.syncDelayed,syncIsLockedDelay:I.syncIsLockedDelay}}),e.abrupt("return",f.syncAndDownload());case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),translateEverything:Object(p.e)(function(){var e=l()(c.a.mark((function e(t){var n,r,a,s,o,i,l,p=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:"",r=p.length>2?p[2]:void 0,a=r.getState,Object(O.a)("translate-everything-running",!0),e.next=5,Object(d.a)(Object(g.a)("translate-everything",u),{key:n});case 5:if(s=e.sent,o=s.data,i=o.success,l=o.data,!i){e.next=20;break}if(Object(m.a)(Object(v.a)([],"createdJobs",l))||(t.setAutomaticJobsInProgressTotal(a().automaticJobsInProgressTotal+l.createdJobs.length),t.setAutomaticJobsInProgress(a().automaticJobsInProgress+l.createdJobs.length),t.setJobsToSyncCount(a().jobsToSyncCount+l.createdJobs.length),Object(O.a)("translate-everything-jobs-created",l.createdJobs)),!l.key){e.next=13;break}return e.abrupt("return",t.translateEverything(l.key));case 13:if(t.setShouldTranslateEverything(!1),Object(O.a)("translate-everything-running",!1),!(a().jobsToSyncCount+l.createdJobs.length>0)){e.next=17;break}return e.abrupt("return",Promise.all([t.fetchCredits(),t.synchronizeJobs()]));case 17:return e.abrupt("return",t.fetchCredits());case 20:if("in-use"!==l.key){e.next=24;break}return e.abrupt("return",Object(f.a)(t.translateEverything,I.translateEverythingInUse));case 24:if("waiting"!==l.key){e.next=28;break}return e.abrupt("return",Object(f.a)(t.translateEverything,I.translateEverythingWaiting));case 28:if("media-setup-not-finished"!==l.key){e.next=30;break}return e.abrupt("return",Object(f.a)(t.translateEverything,I.translateEverythingWaitingForMediaSetup));case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),fetchCredits:Object(p.e)(function(){var e=l()(c.a.mark((function e(t){var n,r,a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setFetchingCredits(!0),e.next=3,Object(d.a)(u.getCredits,{});case 3:return n=e.sent,r=n.data,e.next=7,Object(d.a)(u.getAccountBalances,{});case 7:a=e.sent,s=a.data,t.setFetchingCredits(!1),r.success&&!Object(y.a)(!1,["data","error"],r)&&t.setCredits(r.data),s.success&&!Object(y.a)(!1,["data","error"],s)&&t.setAccountBalances(s.data);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),setAutomaticJobsInProgressTotal:Object(w.a)("automaticJobsInProgressTotal"),setAutomaticJobsInProgress:Object(w.a)("automaticJobsInProgress"),setJobsToSyncCount:Object(w.a)("jobsToSyncCount"),setNeedsReviewCount:Object(w.a)("needsReviewCount"),setCredits:Object(p.b)((function(e,t){e.credits=t,Object(O.a)("ate-credits-updated",t)})),setAccountBalances:Object(p.b)((function(e,t){e.accountBalances=t})),setFetchingCredits:Object(w.a)("fetchingCredits"),setShouldTranslateEverything:Object(w.a)("shouldTranslateEverything"),setShouldUseStatusUpdater:Object(w.a)("shouldUseStatusUpdater"),setIsAutomaticTranslations:Object(w.a)("isAutomaticTranslations"),setNotEnoughCredit:Object(p.e)(function(){var e=l()(c.a.mark((function e(t,n,r){var a,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.getState,n===a().notEnoughCredit){e.next=9;break}return e.next=4,Object(d.a)(u.getATEJobsToSync,{});case 4:return s=e.sent,o=s.data,_.job_list=o.data,t.setNotEnoughCreditAction(n),e.abrupt("return",t.fetchCredits());case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),afterIssueSolving:Object(p.e)(function(){var e=l()(c.a.mark((function e(t,n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.getState,t.setNotEnoughCreditAction(!1),e.next=4,t.fetchCredits();case 4:return e.abrupt("return",t.synchronizeJobs());case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),setNotEnoughCreditAction:Object(p.b)((function(e,t){e.notEnoughCredit=t,Object(O.a)("ate-not-enough-credit",t)})),untranslatedContent:B,languages:U(i),notificationCenter:K,backgroundTasks:$};return Object(p.d)(C,{initialState:{backgroundTasks:A},injections:{untranslatedContentService:r,languagesService:a}})}(ke(ke({},e),{},{ateAPI:t,backgroundTasksData:n})),Object(g.a)("shouldTranslateEverything",ate_jobs_sync)?window.wpmlAteStatusBarStore.getActions().translateEverything():parseInt(Object(g.a)("jobsToSyncCount",ate_jobs_sync))>0&&window.wpmlAteStatusBarStore.getActions().synchronizeJobs(),Object(O.a)("ate-jobs-count-updated",{allCount:ate_jobs_sync.jobsToSyncCount,allAutomaticCount:ate_jobs_sync.automaticJobsInProgressTotal,needsReviewCount:ate_jobs_sync.needsReviewCount}),document.addEventListener("WPMLTooltipCreditsFixClicked",(function(){e.ateConsole&&Object(D.b)({onIssueSolved:function(){return window.wpmlAteStatusBarStore.getActions().afterIssueSolving()},onAteWidgetDisappears:function(){Object(O.a)("ate-issue-solved-popup-closed",!0)}})})),Object(O.b)("translate-everything-start").then((function(e){var t=e.shouldUseStatusUpdater,n=void 0===t||t;window.wpmlAteStatusBarStore.getActions().setShouldUseStatusUpdater(n),window.wpmlAteStatusBarStore.getActions().setShouldTranslateEverything(!0),window.wpmlAteStatusBarStore.getActions().translateEverything(),window.wpmlAteStatusBarStore.getActions().setIsAutomaticTranslations(!0)})),Object(O.b)("translate-everything-stop").then((function(){window.wpmlAteStatusBarStore.getActions().setIsAutomaticTranslations(!1)})),Object(O.b)("ate-sync-start").then((function(e){var t=e.createdTranslations,n=e.shouldUseStatusUpdater,r=void 0===n||n;window.wpmlAteStatusBarStore.getActions().setShouldUseStatusUpdater(r),window.wpmlAteStatusBarStore.getActions().setAutomaticJobsInProgressTotal(parseInt(window.wpmlAteStatusBarStore.getState().automaticJobsInProgressTotal)+t.length),window.wpmlAteStatusBarStore.getActions().setJobsToSyncCount(parseInt(window.wpmlAteStatusBarStore.getState().jobsToSyncCount)+t.length),window.wpmlAteStatusBarStore.getActions().setAutomaticJobsInProgress(parseInt(window.wpmlAteStatusBarStore.getState().automaticJobsInProgress)+t.length),window.wpmlAteStatusBarStore.getActions().synchronizeJobs()}))}return window.wpmlAteStatusBarStore}},345:function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var r=n(15),a=n.n(r),s=n(2),o=n.n(s),i=n(9),c=n.n(i),u=n(6),l=n.n(u),p=n(25),d=n.n(p),f=n(14),b=n.n(f),h=n(16),g=n.n(h),m=n(404),v=n.n(m),y=n(405),j=n.n(y),O=n(406),w=n.n(O),T=n(51),k=n(40),E=n(122),S=n(152),_=n(65),A=n(204),P=n(47),D=n(611),I=n(613),C=n(63),x=n(612),L=n(360),R=n(203),N=n(376),M=n(418),J=n(362),B=n(11);n(93);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=T.a(k.a("ateStatus"),E.a(S.a,[B.a.TRANSLATED,B.a.DELIVERING,B.a.EDITED]));function q(e){return new Promise((function(t){return setTimeout(t,e)}))}var z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;b()(this,e),this.insufficientBalanceJobs=t,this.stillInProgressJobs=n,this.downloaded=r,this.notDownloaded=a,this.lockKey=s}return g()(e,[{key:"prepandPrevioslyDownloadedJobs",value:function(t){return new e(this.insufficientBalanceJobs,this.stillInProgressJobs,[].concat(d()(t),d()(this.downloaded)),this.notDownloaded,this.lockKey)}}]),e}(),F=function(){function e(t){var n=t.synchronize,r=t.download,a=t.releaseLock,s=t.listeners,o=(s=void 0===s?{}:s).onInsufficientBalance,i=void 0===o?[]:o,c=s.onDownloadedChunk,u=void 0===c?[]:c,l=s.onSyncDownloadCycleCompleted,p=void 0===l?[]:l,d=s.onSyncDownloadCompleted,f=void 0===d?[]:d,h=s.onSyncStart,g=void 0===h?[]:h,m=s.onSyncLocked,v=void 0===m?[]:m,y=t.getJobsCount,j=t.repeatTimeouts,O=(j=void 0===j?{}:j).sync,w=void 0===O?5e3:O,T=j.syncDelayed,k=void 0===T?1e4:T,E=j.syncIsLockedDelay,S=void 0===E?6e4:E;b()(this,e),this.synchronize=n,this.download=r,this.releaseLock=a,this.getJobsCount=y,this.onInsufficientBalance=i,this.onDownloadedChunk=u,this.onSyncStart=g,this.onSyncDownloadCycleCompleted=p,this.onSyncDownloadCompleted=f,this.onSyncLocked=v,this.repeatTimeouts={sync:w,syncDelayed:k,syncIsLockedDelay:S}}var t,n,r,a,s,i,u;return g()(e,[{key:"syncSinglePage",value:(u=l()(o.a.mark((function e(){var t,n,r,a,s,i,u,l,p,d,f,b=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.synchronize(t);case 3:return n=e.sent,r=_.a([],"jobs",n),a=A.a(P.a("ateStatus",B.a.NO_CREDIT),r),s=c()(a,2),i=s[0],u=s[1],l=A.a(U,u),p=c()(l,2),d=p[0],f=p[1],i.length&&this.onInsufficientBalance.forEach((function(e){return e(i)})),e.abrupt("return",{insufficientBalanceJobs:i,readyToDownloadJobs:d,stillInProgressJobs:f,response:n});case 9:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"synchronizeAllPages",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return w()(o.a.mark((function r(){var a,s,i;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=n?{lockKey:n}:{},s={};case 2:return s=D.a(["lockKey","ateToken","nextPage","numberOfPages"],a),r.next=5,j()(e.syncSinglePage(H(H({},s),{},{includeManualAndLongstandingJobs:t})));case 5:return i=r.sent,a=i.response,r.next=9,{insufficientBalanceJobs:i.insufficientBalanceJobs||[],readyToDownloadJobs:i.readyToDownloadJobs||[],stillInProgressJobs:i.stillInProgressJobs||[],lockKey:k.a("lockKey",a)};case 9:if(_.a(!1,"ateToken",a)){r.next=2;break}case 10:case"end":return r.stop()}}),r)})))()}},{key:"downloadSingleBatch",value:(i=l()(o.a.mark((function e(t,n){var r,a,s,i,u,l,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=I.a(parseInt),e.prev=1,e.next=4,this.download(t,n);case 4:return a=e.sent,a=C.a(x.a({jobId:r,status:r}),a),s=function(e){var t=a.find(P.a("jobId",e.jobId));return t?H(H({},e),t):e},i=T.a(C.a(s),A.a(P.a("status",B.b.COMPLETED)))(t),u=c()(i,2),l=u[0],p=u[1],e.abrupt("return",{downloadedJobs:l,notDownloaded:p});case 11:return e.prev=11,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",{notDownloaded:t,downloadedJobs:[]});case 15:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(e,t){return i.apply(this,arguments)})},{key:"downloadAll",value:(s=l()(o.a.mark((function e(t,n){var r,a,s,i,c,u,l,p,f=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=L.a(P.a("status",B.b.COMPLETED)),a=[],s=[],i=R.a(N.a(U,r),t),c=M.a(5,i),u=M.a((b=void 0,h=void 0,"undefined"==typeof ate_jobs_sync||null===ate_jobs_sync?2:(null===(b=ate_jobs_sync)||void 0===b||null===(h=b.settings)||void 0===h?void 0:h.numberOfParallelDownloads)||2),c),l=o.a.mark((function e(t){var r,i,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(C.a((function(e){return f.downloadSingleBatch(e,n)}),u[t]));case 2:if(r=e.sent,i=J.a(C.a(k.a("downloadedJobs"),r)),c=J.a(C.a(k.a("notDownloaded"),r)),!i.length||!f.onDownloadedChunk.length){e.next=8;break}return e.next=8,Promise.all(C.a((function(e){return e(i,parseInt(t))}),f.onDownloadedChunk));case 8:a.push.apply(a,d()(i)),s.push.apply(s,d()(c));case 10:case"end":return e.stop()}}),e)})),e.t0=o.a.keys(u);case 8:if((e.t1=e.t0()).done){e.next=13;break}return p=e.t1.value,e.delegateYield(l(p),"t2",11);case 11:e.next=8;break;case 13:return e.abrupt("return",{downloaded:a,notDownloaded:s});case 14:case"end":return e.stop()}var b,h}),e)}))),function(e,t){return s.apply(this,arguments)})},{key:"syncAndDownloadCycle",value:(a=l()(o.a.mark((function e(){var t,n,r,a,s,i,c,u,l,p,f,b,h,g,m,y=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!(y.length>0&&void 0!==y[0])||y[0],n=y.length>1&&void 0!==y[1]?y[1]:null,r=[],a=[],s=[],i=[],c=n,u=!0,l=!1,e.prev=9,f=v()(this.synchronizeAllPages(t,c));case 11:return e.next=13,f.next();case 13:return b=e.sent,u=b.done,e.next=17,b.value;case 17:if(h=e.sent,u){e.next=32;break}if(g=h,r.push.apply(r,d()(g.insufficientBalanceJobs)),a.push.apply(a,d()(g.stillInProgressJobs)),c=g.lockKey,!g.lockKey){e.next=29;break}return e.next=26,this.downloadAll(g.readyToDownloadJobs,g.lockKey);case 26:m=e.sent,s.push.apply(s,d()(m.downloaded)),i.push.apply(i,d()(m.notDownloaded));case 29:u=!0,e.next=11;break;case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(9),l=!0,p=e.t0;case 38:if(e.prev=38,e.prev=39,u||null==f.return){e.next=43;break}return e.next=43,f.return();case 43:if(e.prev=43,!l){e.next=46;break}throw p;case 46:return e.finish(43);case 47:return e.finish(38);case 48:return e.abrupt("return",new z(r,a,s,i,c));case 49:case"end":return e.stop()}}),e,this,[[9,34,38,48],[39,,43,47]])}))),function(){return a.apply(this,arguments)})},{key:"syncAndDownload",value:(r=l()(o.a.mark((function e(){var t,n,r,a,s,i,c,u,l,p=this,d=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=d.length>0&&void 0!==d[0]?d[0]:{},n=t.suspendCycleRepeat,r=void 0!==n&&n,this.onSyncStart.forEach((function(e){return e()})),i=1,c=!0,u=null,l=o.a.mark((function e(){var t,n,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.syncAndDownloadCycle(c,u);case 2:return n=e.sent,s=n.prepandPrevioslyDownloadedJobs((null===(t=s)||void 0===t?void 0:t.downloaded)||[]),u=n.lockKey||null,c=!u,e.next=8,p.getJobsCount.get();case 8:return l=e.sent,e.next=11,Promise.all(p.onSyncDownloadCycleCompleted.map((function(e){return e(l,n)})));case 11:if(!r){e.next=17;break}if(e.t0=u,!e.t0){e.next=16;break}return e.next=16,p.releaseLock(n.lockKey);case 16:return e.abrupt("return","break");case 17:if(!u){e.next=23;break}return e.next=20,p._shouldRetryWithLock(i,n,l);case 20:e.t1=e.sent,e.next=26;break;case 23:return e.next=25,p._shouldRetryWithoutLock(i,l,a);case 25:e.t1=e.sent;case 26:i=e.t1,a=l;case 28:case"end":return e.stop()}}),e)}));case 6:return e.delegateYield(l(),"t0",7);case 7:if("break"!==e.t0){e.next=10;break}return e.abrupt("break",11);case 10:if(i){e.next=6;break}case 11:return this.onSyncDownloadCompleted.forEach((function(e){return e(s)})),e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"_shouldRetryWithLock",value:(n=l()(o.a.mark((function e(t,n,r){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.automaticWithoutLongstandingCount<=n.insufficientBalanceJobs.length||t>=10)){e.next=4;break}return e.next=3,this.releaseLock(n.lockKey);case 3:return e.abrupt("return",!1);case 4:return t=n.downloaded.length>0?1:t+1,a=n.downloaded.length>0?this.repeatTimeouts.sync:t*this.repeatTimeouts.syncDelayed,e.next=8,q(a);case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"_shouldRetryWithoutLock",value:(t=l()(o.a.mark((function e(t,n,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.automaticWithoutLongstandingCount<=0)){e.next=2;break}return e.abrupt("return",!1);case 2:if(!((t=!r||r.automaticWithoutLongstandingCount>n.automaticWithoutLongstandingCount?1:t+1)>=3)){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,q(this.repeatTimeouts.syncIsLockedDelay);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})}]),e}()},346:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(2),a=n.n(r),s=n(6),o=n.n(s),i=n(14),c=n.n(i),u=n(16),l=n.n(u),p=n(17),d=n(182),f=function(){function e(t){c()(this,e),this.endpoint=t}var t;return l()(e,[{key:"get",value:(t=o()(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)(this.endpoint,{});case 2:return t=e.sent,n=function(e){return parseInt(Object(d.a)(0,["data","data",e],t))},e.abrupt("return",{allCount:n("allCount"),allAutomaticCount:n("allAutomaticCount"),automaticWithoutLongstandingCount:n("automaticWithoutLongstandingCount"),needsReviewCount:n("needsReviewCount")});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}()},347:function(e,t,n){"use strict";var r=n(2),a=n.n(r),s=n(6),o=n.n(s),i=n(14),c=n.n(i),u=n(16),l=n.n(u),p={createJob:"/wpml/tm/v1/ate/jobs",sync:"/wpml/tm/v1/ate/jobs/sync",retry:"/wpml/tm/v1/ate/jobs/retry",download:"/wpml/tm/v1/ate/jobs/download",fixJobStatus:function(e,t){return"/wpml/tm/v1/ate/jobs/".concat(e,"/fix?jobId=").concat(t)},getJobStatus:function(e){return"/wpml/tm/v1/ate/jobs/".concat(e)}},d=function(){function e(t){c()(this,e),this.request=t}var t,n,r;return l()(e,[{key:"createJob",value:function(e){var t=e.xliff,n=e.returnURL,r=t.sourceLang,a=t.targetLang,s=t.content;return this.request.post(p.createJob,{source_language:r,target_language:a,file:{name:"some_page_en_fr.xliff",type:"data:application/x-xliff;base64",content:s},return_url:n})}},{key:"getJobStatus",value:function(e){return this.request.get(p.getJobStatus(e))}},{key:"fixJobStatus",value:function(e,t){return this.request.get(p.fixJobStatus(e,t))}},{key:"sync",value:(r=o()(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request.post(p.sync,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"retry",value:(n=o()(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request.post(p.retry,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"download",value:(t=o()(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.request.post(p.download,{jobs:t,lockKey:n}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),e}();t.a=d},424:function(e,t,n){},441:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return w}));var r=n(25),a=n.n(r),s=n(2),o=n.n(s),i=n(6),c=n.n(i),u=n(14),l=n.n(u),p=n(16),d=n.n(p),f=n(168),b=n(169),h=n(167),g=n(11),m=n(67),v=n(100),y=n(104),j=n(191),O=function(){function e(t,n,r,a,s){l()(this,e),this.jobsLoader=t,this.syncJobs=n,this.downloadTranslations=r,this.batchSync=a,this.hooks=s}var t,n,r;return d()(e,[{key:"mapSyncedJobsToWpmlJobs",value:(r=c()(o.a.mark((function e(t,n){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.some((function(e){return void 0!==t.find((function(t){return t.id===e.id}))}))){e.next=7;break}return e.next=4,this.jobsLoader.load();case 4:r=e.sent,a=r.jobs,t=a;case 7:return e.abrupt("return",n.map((function(e){return t.find((function(t){return t.id===e.id}))})));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"run",value:(n=c()(o.a.mark((function e(t){var n,r,a,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncJobs.sync(t);case 2:if(n=e.sent,r=n.ready,a=n.cancelled,!this.hooks){e.next=9;break}this.hooks.doAction("wpml-tm-job-translations-processed",a),e.next=14;break;case 9:return e.t0=y.a,e.next=12,this.mapSyncedJobsToWpmlJobs(t,a);case 12:e.t1=e.sent,e.t0.dispatchCancelledJobsEvent.call(e.t0,e.t1);case 14:if(e.t2=this.downloadTranslations,!this.hooks){e.next=19;break}e.t3=r,e.next=22;break;case 19:return e.next=21,this.mapSyncedJobsToWpmlJobs(t,r);case 21:e.t3=e.sent;case 22:return e.t4=e.t3,e.t5=e.t2.download.call(e.t2,e.t4),s=[e.t5],t.length>r.length+a.length&&(i=t.filter((function(e){return void 0===r.find((function(t){return Object(g.m)(e,t)}))})),s.push(this.syncBatch(i))),e.next=28,Promise.all(s);case 28:return e.abrupt("return",!0);case 29:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"syncBatch",value:(t=c()(o.a.mark((function e(t){var n,r,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a()(new Set(t.map((function(e){return e.batch?e.batch.tp_id:0})).filter((function(e){return!!e}))))){e.next=3;break}return e.abrupt("return",!0);case 3:return e.next=5,this.batchSync.run(n);case 5:return e.next=7,this.syncJobs.sync([]);case 7:if(r=e.sent,s=r.ready,i=r.cancelled,!this.hooks){e.next=14;break}this.hooks.doAction("wpml-tm-job-translations-processed",i),e.next=19;break;case 14:return e.t0=y.a,e.next=17,this.mapSyncedJobsToWpmlJobs(t,i);case 17:e.t1=e.sent,e.t0.dispatchCancelledJobsEvent.call(e.t0,e.t1);case 19:if(e.t2=this.downloadTranslations,!this.hooks){e.next=24;break}e.t3=s,e.next=27;break;case 24:return e.next=26,this.mapSyncedJobsToWpmlJobs(t,s);case 26:e.t3=e.sent;case 27:return e.t4=e.t3,e.abrupt("return",e.t2.download.call(e.t2,e.t4));case 29:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),w=function(e){var t=new m.a,n=new v.a(t);return new O(new j.a(n),new f.a(n),new b.a(n,e),new h.a(n,1e4),e)}},490:function(e,t,n){var r={"./af":209,"./af.js":209,"./ar":210,"./ar-dz":211,"./ar-dz.js":211,"./ar-kw":212,"./ar-kw.js":212,"./ar-ly":213,"./ar-ly.js":213,"./ar-ma":214,"./ar-ma.js":214,"./ar-sa":215,"./ar-sa.js":215,"./ar-tn":216,"./ar-tn.js":216,"./ar.js":210,"./az":217,"./az.js":217,"./be":218,"./be.js":218,"./bg":219,"./bg.js":219,"./bm":220,"./bm.js":220,"./bn":221,"./bn-bd":222,"./bn-bd.js":222,"./bn.js":221,"./bo":223,"./bo.js":223,"./br":224,"./br.js":224,"./bs":225,"./bs.js":225,"./ca":226,"./ca.js":226,"./cs":227,"./cs.js":227,"./cv":228,"./cv.js":228,"./cy":229,"./cy.js":229,"./da":230,"./da.js":230,"./de":231,"./de-at":232,"./de-at.js":232,"./de-ch":233,"./de-ch.js":233,"./de.js":231,"./dv":234,"./dv.js":234,"./el":235,"./el.js":235,"./en-au":236,"./en-au.js":236,"./en-ca":237,"./en-ca.js":237,"./en-gb":238,"./en-gb.js":238,"./en-ie":239,"./en-ie.js":239,"./en-il":240,"./en-il.js":240,"./en-in":241,"./en-in.js":241,"./en-nz":242,"./en-nz.js":242,"./en-sg":243,"./en-sg.js":243,"./eo":244,"./eo.js":244,"./es":245,"./es-do":246,"./es-do.js":246,"./es-mx":247,"./es-mx.js":247,"./es-us":248,"./es-us.js":248,"./es.js":245,"./et":249,"./et.js":249,"./eu":250,"./eu.js":250,"./fa":251,"./fa.js":251,"./fi":252,"./fi.js":252,"./fil":253,"./fil.js":253,"./fo":254,"./fo.js":254,"./fr":255,"./fr-ca":256,"./fr-ca.js":256,"./fr-ch":257,"./fr-ch.js":257,"./fr.js":255,"./fy":258,"./fy.js":258,"./ga":259,"./ga.js":259,"./gd":260,"./gd.js":260,"./gl":261,"./gl.js":261,"./gom-deva":262,"./gom-deva.js":262,"./gom-latn":263,"./gom-latn.js":263,"./gu":264,"./gu.js":264,"./he":265,"./he.js":265,"./hi":266,"./hi.js":266,"./hr":267,"./hr.js":267,"./hu":268,"./hu.js":268,"./hy-am":269,"./hy-am.js":269,"./id":270,"./id.js":270,"./is":271,"./is.js":271,"./it":272,"./it-ch":273,"./it-ch.js":273,"./it.js":272,"./ja":274,"./ja.js":274,"./jv":275,"./jv.js":275,"./ka":276,"./ka.js":276,"./kk":277,"./kk.js":277,"./km":278,"./km.js":278,"./kn":279,"./kn.js":279,"./ko":280,"./ko.js":280,"./ku":281,"./ku.js":281,"./ky":282,"./ky.js":282,"./lb":283,"./lb.js":283,"./lo":284,"./lo.js":284,"./lt":285,"./lt.js":285,"./lv":286,"./lv.js":286,"./me":287,"./me.js":287,"./mi":288,"./mi.js":288,"./mk":289,"./mk.js":289,"./ml":290,"./ml.js":290,"./mn":291,"./mn.js":291,"./mr":292,"./mr.js":292,"./ms":293,"./ms-my":294,"./ms-my.js":294,"./ms.js":293,"./mt":295,"./mt.js":295,"./my":296,"./my.js":296,"./nb":297,"./nb.js":297,"./ne":298,"./ne.js":298,"./nl":299,"./nl-be":300,"./nl-be.js":300,"./nl.js":299,"./nn":301,"./nn.js":301,"./oc-lnc":302,"./oc-lnc.js":302,"./pa-in":303,"./pa-in.js":303,"./pl":304,"./pl.js":304,"./pt":305,"./pt-br":306,"./pt-br.js":306,"./pt.js":305,"./ro":307,"./ro.js":307,"./ru":308,"./ru.js":308,"./sd":309,"./sd.js":309,"./se":310,"./se.js":310,"./si":311,"./si.js":311,"./sk":312,"./sk.js":312,"./sl":313,"./sl.js":313,"./sq":314,"./sq.js":314,"./sr":315,"./sr-cyrl":316,"./sr-cyrl.js":316,"./sr.js":315,"./ss":317,"./ss.js":317,"./sv":318,"./sv.js":318,"./sw":319,"./sw.js":319,"./ta":320,"./ta.js":320,"./te":321,"./te.js":321,"./tet":322,"./tet.js":322,"./tg":323,"./tg.js":323,"./th":324,"./th.js":324,"./tk":325,"./tk.js":325,"./tl-ph":326,"./tl-ph.js":326,"./tlh":327,"./tlh.js":327,"./tr":328,"./tr.js":328,"./tzl":329,"./tzl.js":329,"./tzm":330,"./tzm-latn":331,"./tzm-latn.js":331,"./tzm.js":330,"./ug-cn":332,"./ug-cn.js":332,"./uk":333,"./uk.js":333,"./ur":334,"./ur.js":334,"./uz":335,"./uz-latn":336,"./uz-latn.js":336,"./uz.js":335,"./vi":337,"./vi.js":337,"./x-pseudo":338,"./x-pseudo.js":338,"./yo":339,"./yo.js":339,"./zh-cn":340,"./zh-cn.js":340,"./zh-hk":341,"./zh-hk.js":341,"./zh-mo":342,"./zh-mo.js":342,"./zh-tw":343,"./zh-tw.js":343};function a(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=s,e.exports=a,a.id=490},491:function(e,t,n){},55:function(e,t,n){},593:function(e,t,n){},67:function(e,t,n){"use strict";var r=n(2),a=n.n(r),s=n(6),o=n.n(s),i=n(14),c=n.n(i),u=n(16),l=n.n(u),p=n(36),d=n.n(p),f=n(42),b=n.n(f),h=n(35),g=n.n(h),m=n(71),v=n(69);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b()(this,n)}}Object(v.a)();var j=function(e){d()(r,e);var t,n=y(r);function r(){return c()(this,r),n.apply(this,arguments)}return l()(r,[{key:"get",value:function(e){return this.request(e,"GET")}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.request(e,"POST",t)}},{key:"download",value:(t=o()(a.a.mark((function e(t){var n=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t,this.generateArgs("GET")).then((function(e){return e.ok?e.blob():n.buildError(e)})));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"request",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.generateArgs(t,n);return this.restUrl.includes("?")&&(e=e.replace("?","&")),this.handleRequest(this.restUrl+e,r)}},{key:"handleRequest",value:function(e,t){var n=this;return fetch(e,t).then((function(e){return e.ok?e.json():n.buildError(e)}))}},{key:"generateArgs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={method:e.toUpperCase(),headers:{Accept:"application/json","Content-Type":"application/json","X-WP-Nonce":this.restNonce},credentials:"same-origin"};return"GET"!==n.method&&t&&(n.body="string"==typeof t?t:JSON.stringify(t)),n}},{key:"buildError",value:function(e){return e.json().then((function(t){var n=new Error(t.message||e.statusText);return Promise.reject(Object.assign(n,{response:e}))}))}}]),r}(m.a);t.a=j},68:function(e,t,n){"use strict";var r=n(31),a=n.n(r),s=n(0),o=n.n(s);t.a=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t){return function(n){return o.a.createElement(t,null,(function(t){return o.a.createElement(e,a()({},n,t))}))}}),(function(t){return o.a.createElement(e,t)}))}},71:function(e,t,n){"use strict";var r=n(14),a=n.n(r),s=function e(t){a()(this,e),this.ID=t.ID,this.caps=t.caps,this.roles=t.roles,this.user_email=t.data,this.user_login=t.data.user_email,this.user_nicename=t.data.user_login};t.a=function e(){a()(this,e),this.restUrl=WPML_TM_SETTINGS.restUrl,this.restNonce=WPML_TM_SETTINGS.restNonce,this.ateSettings=WPML_TM_SETTINGS.ate,this.currentUser=new s(WPML_TM_SETTINGS.currentUser)}},82:function(e,t,n){"use strict";n.d(t,"b",(function(){return _})),n.d(t,"a",(function(){return A}));var r=n(15),a=n.n(r),s=n(2),o=n.n(s),i=n(6),c=n.n(i),u=n(14),l=n.n(u),p=n(16),d=n.n(p),f=n(36),b=n.n(f),h=n(42),g=n.n(h),m=n(35),v=n.n(m),y=n(0),j=n.n(y),O=n(18),w=n.n(O);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var S=j.a.createContext({}),_=function(e){b()(r,e);var t,n=E(r);function r(e){var t;return l()(this,r),(t=n.call(this,e)).jobsAPI=e.jobsAPI,t.jobsLoader=e.jobsLoader,t.loadJobsOnMount=!0===t.props.loadOnMount||void 0===t.props.loadOnMount,t.state={jobs:[],lastPickupDate:null},t}return d()(r,[{key:"componentDidMount",value:function(){this.loadJobsOnMount&&this.loadJobs()}},{key:"loadJobs",value:(t=c()(o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.jobsLoader.load().then((function(e){return t.setState({jobs:e.jobs,lastPickupDate:e.last_picked_up_date})}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.props.children;return j.a.createElement(S.Provider,{value:k(k({},this.state),{},{setJobs:function(t){return e.setState({jobs:t})},refreshLastPickupDate:function(){return e.setState({lastPickupDate:w()()})}})},t)}}]),r}(y.Component),A=S.Consumer},91:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return v}));var r=n(14),a=n.n(r),s=n(16),o=n.n(s),i=n(36),c=n.n(i),u=n(42),l=n.n(u),p=n(35),d=n.n(p),f=n(0),b=n.n(f);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var a=d()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return l()(this,n)}}var g=b.a.createContext({}),m=function(e){c()(n,e);var t=h(n);function n(e){return a()(this,n),t.call(this,e)}return o()(n,[{key:"render",value:function(){var e=this.props.children;return b.a.createElement(g.Provider,{value:{strings:WPML_TM_DASHBOARD.strings}},e)}}]),n}(f.Component),v=g.Consumer},92:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r=n(2),a=n.n(r),s=n(15),o=n.n(s),i=n(6),c=n.n(i),u=n(14),l=n.n(u),p=n(16),d=n.n(p),f=n(36),b=n.n(f),h=n(42),g=n.n(h),m=n(35),v=n.n(m),y=n(0),j=n.n(y),O=n(68),w=n(82),T=n(69),k=n(133),E=n(11);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var P=j.a.createContext({}),D=function(e){b()(r,e);var t,n=A(r);function r(e){var t;return l()(this,r),(t=n.call(this,e)).initialState={inProgress:!1,finished:!1,error:!1,confirmationHidden:!1,processedJobs:[]},t.state=t.initialState,t}return d()(r,[{key:"run",value:(t=c()(a.a.mark((function e(){var t,n,r=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState(_(_({},this.initialState),{},{inProgress:!0})),t=this.defineHooks(),e.prev=2,e.next=5,this.props.createProcess(t).run(this.props.jobs);case 5:this.setState({inProgress:!1,finished:!0}),this.updateJobsIconOnTheList(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.setState({inProgress:!1,finished:!1,error:e.t0});case 12:n=this.props.jobs.filter((function(e){return void 0===r.state.processedJobs.find((function(t){return Object(E.m)(e,t)}))})),this.props.setJobs(n),this.props.refreshLastPickupDate();case 15:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(){return t.apply(this,arguments)})},{key:"defineHooks",value:function(){var e=this,t=Object(T.a)();return t.addAction("wpml-tm-job-translations-processed","CheckAndDownloadTranslations",(function(t){return e.setState((function(e){return{processedJobs:e.processedJobs.concat(t)}}))})),t}},{key:"updateJobsIconOnTheList",value:function(){var e=new k.a(document,null,WPML_TM_DASHBOARD.statusIcons);this.state.processedJobs.map((function(t){e.updateIcon(t)}))}},{key:"render",value:function(){var e=this,t=this.props.children;return j.a.createElement(P.Provider,{value:{process:_(_({},this.state),{},{run:function(){return e.run()},hideConfirmation:function(){return e.setState({confirmationHidden:!0})}})}},t)}}]),r}(y.Component),I=P.Consumer;t.b=Object(O.a)(D,w.a)}});